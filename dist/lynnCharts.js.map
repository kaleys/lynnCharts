{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6b144c52cfee5d1488b3","webpack:///./src/Lynncharts.js","webpack:///external {\"root\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./src/plugin/LynnLayout.js","webpack:///./src/plugin/LynnTabs.js","webpack:///./src/plugin/lynnScrollbar.js","webpack:///./src/plugin/lynnSpinner.js","webpack:///./src/plugin/lynnDropDown.js","webpack:///./src/plugin/colorpicker/spectrum.js","webpack:///./src/ChartBox.js","webpack:///./src/common.js","webpack:///./src/CandlestickChart.js","webpack:///./src/YAxisChart.js","webpack:///./src/VolumeChart.js","webpack:///./src/XAxisChart.js","webpack:///./src/PolylineChart.js","webpack:///./src/HollowCandleChart.js","webpack:///./src/MAChart.js","webpack:///./src/DragEvent.js","webpack:///./src/WheelEvent.js","webpack:///./src/vendor/jquery.mousewheel.min.js","webpack:///./src/CrossLineEvent.js","webpack:///./src/FollowTip.js","webpack:///./src/RightClickEvent.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,aAAY,IAAI;AAChB;AACA;AACA;AACA;AACA,oBAAmB;AACnB,mBAAkB;AAClB,mBAAkB;AAClB,sBAAqB;AACrB,WAAU;AACV,kBAAiB;AACjB,WAAU;AACV,8BAA6B;AAC7B,4BAA2B;AAC3B;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,QAAO;AACP;AACA;AACA,SAAQ,wCAAwC;AAChD,SAAQ,2BAA2B;AACnC,SAAQ,6BAA6B;AACrC,SAAQ,0BAA0B;AAClC,SAAQ,0BAA0B;AAClC,SAAQ,2BAA2B;AACnC,SAAQ;AACR;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,SAAQ,+BAA+B;AACvC,SAAQ,8CAA8C;AACtD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,gCAAgC;AACxC,SAAQ,kCAAkC;AAC1C,SAAQ,kCAAkC;AAC1C,SAAQ;AACR;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,4BAA2B,oEAAoE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAQ,oCAAoC;AAC5C,SAAQ,sBAAsB;AAC9B,SAAQ,sBAAsB;AAC9B,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,SAAQ;AACR;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,mCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,qCAAoC,yDAAyD;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD;AACrD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,2BAA0B;AAC1B;AACA;AACA;AACA;AACA,iBAAgB,6CAA6C;AAC7D;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI,M;AACJ;AACA;;AAEA;AACA,qBAAoB,0BAA0B;AAC9C;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA,eAAc;AACd;AACA,OAAM;AACN;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,oBAAmB,wBAAwB;AAC3C;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA,OAAM;AACN;AACA;;AAEA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,uBAAsB,kBAAkB;AACxC,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,oBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA,qBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,oBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA,6BAA4B;AAC5B;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,iCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,oBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,wBAAuB;AACvB,yBAAwB,mDAAmD;;AAE3E;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA,yBAAwB,gDAAgD;;AAExE;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,kBAAiB,0BAA0B;AAC3C;;AAEA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAwB,wDAAwD;AAChF;AACA;AACA,oBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC31BA,gD;;;;;;ACAA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;AACA,4CAA2C;AAC3C,sCAAqC;AACrC,2BAA0B;AAC1B,8BAA6B;AAC7B,6BAA4B;AAC5B,8BAA6B;AAC7B,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAE;AACF;AACA;AACA,uBAAsB,oBAAoB;AAC1C;AACA;AACA,4BAA2B;AAC3B;AACA,+FAA8F,uBAAuB,wBAAwB;;AAE7I;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,kCAAiC,SAAS;AAC1C;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,UAAU;AAChE,yCAAwC;AACxC,2CAA0C;AAC1C;AACA;AACA;AACA;AACA,sFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;;AAEA,2BAA0B;AAC1B;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,+BAA+B;AAChD;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,kBAAiB,iDAAiD;AAClE;AACA,KAAI;AACJ;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH,2CAA0C,uBAAuB;AACjE;AACA,GAAE;AACF;AACA;AACA;AACA;;;AAGA,6B;;;;;;ACxUA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA,EAAC,wBAAwB;;AAEzB;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,S;AACA;AACA;AACA;AACA,sCAAqC;AACrC,uCAAsC;AACtC;AACA,iCAAgC;AAChC;AACA,+B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA,mCAAkC,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,KAAI;AACJ,2BAA0B;AAC1B;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;;;;;;AC/RH;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,kEAAiE,yBAAyB;AAC1F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,gFAA+E,QAAQ;AACvF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;;AAEA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA2B,oBAAoB,qCAAqC,2BAA2B;AAC/G;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4EAA2E,yBAAyB;AACpG;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA,GAAE;AACF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA,gC;;;;;;AC7MA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAsE,yEAAyE;;AAE/I;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;;;AAIA,8B;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,iDAAiD;AAC7D,aAAY,6BAA6B;AACzC;AACA,aAAY;AACZ;AACA;AACA,sBAAqB,IAAI,EAAE,KAAK,EAAE,KAAK;AACvC;AACA,mCAAkC,iCAAiC,EAAE,WAAW;AAChF,sDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,YAAW;AACX;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAe;AACf;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,mBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ,mCAAkC,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY;AACZ;AACA,YAAW;AACX;AACA;;;AAGA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,I;AACA;AACA;AACA,yCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,WAAU;;AAEV,GAAE;;AAEF;AACA;AACA;;AAEA;AACA,oBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU;AACV,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,e;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;AAED,+B;;;;;;ACrgBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gBAAqD;AACrD;AACA;AACA,wEAAuE;AACvE;AACA;AACA,WAAU;AACV;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA2B,QAAQ;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,wBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oLAAmL;AACnL,cAAa;AACb;AACA;AACA,wFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gCAA+B,yBAAyB;AACxD,oCAAmC,4BAA4B;AAC/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb,6CAA4C,uBAAuB,oBAAoB,EAAE,EAAE;;AAE3F;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wFAAuF,eAAe;AACtG;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,2BAA0B;;AAE1B;AACA,qFAAoF;AACpF;AACA,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wFAAuF;AACvF;AACA,+BAA8B;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAA+B,6BAA6B;AAC5D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,QAAQ;;AAExC;AACA;AACA,8BAA6B,QAAQ;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,QAAQ;AAC3C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,GAAG,gDAAgD;AAChE;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,kDAAiD,4BAA4B;AAC7E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAiC,iBAAiB;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,uFAAsF,kBAAkB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC,2CAA0C;AAC1C,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA,sCAAqC;AACrC;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D;AACA;AACA;AACA;;AAEA,mBAAkB;AAClB,gCAA+B;AAC/B,4BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA0B,8BAA8B;AACxD,2BAA0B,8BAA8B;AACxD,2BAA0B,8BAA8B;;AAExD;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,qBAAoB;AACpB,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,qBAAoB;AACpB,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,qBAAoB;AACpB,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,qBAAoB;AACpB,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,2DAA0D;AAC1D,6CAA4C;AAC5C,6CAA4C;AAC5C;;AAEA;AACA;;AAEA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,mBAAkB;AAClB;AACA;AACA;AACA,2DAA0D;AAC1D,6CAA4C;AAC5C,6CAA4C;AAC5C;AACA;AACA;AACA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yCAAyC;AAChE,wBAAuB,yCAAyC;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAuB,wCAAwC;AAC/D,wBAAuB,yCAAyC;AAChE,wBAAuB,yCAAyC;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uCAAuC;AAC9D,wBAAuB,wCAAwC;AAC/D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAmE,WAAW;AAC9E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,kBAAkB;AAClD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,sBAAsB;;AAE3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,UAAS,kBAAkB,YAAY,kBAAkB;AACzD;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iCAAgC,YAAY;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,EAAE,cAAc,EAAE,cAAc,EAAE;AACnE,kCAAiC,EAAE,cAAc,EAAE,cAAc,EAAE;AACnE,kCAAiC,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACnF;AACA,MAAK;;AAEL;AACA;AACA,6CAA4C,UAAU,OAAO,UAAU,OAAO,SAAS;AACvF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL,EAAC;;;;;;;AClxED;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA,gBAAe,6BAA6B;AAC5C,yCAAwC;AACxC;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB,gBAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA,UAAS;AACT,iB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,oBAAmB;AACnB;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP,eAAc;AACd;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,eAAc;AACd;AACA;AACA;AACA;AACA,QAAO;AACP,SAAQ;AACR,oBAAmB;AACnB;AACA,SAAQ;AACR,iBAAgB;AAChB,WAAU;AACV,+B;AACA;AACA;AACA,KAAI;AACJ,YAAW;AACX;AACA,gCAA+B;AAC/B;AACA,KAAI;AACJ,eAAc;AACd;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,yB;AACA;AACA,KAAI;;AAEJ;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,uD;AACA;AACA;AACA;AACA,gCAA+B;AAC/B,YAAW;AACX;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,0BAAyB,qBAAqB;AAC9C;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAQ;;AAER,KAAI;AACJ;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAwD;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE;AACrE;AACA,0CAAyC,MAAM;AAC/C,2DAA0D,OAAO,QAAQ;AACzE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;;AAE9C;;AAEA;AACA;;AAEA,uBAAsB,kDAAkD;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA,yB;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA8E,QAAQ,sBAAsB;AAC5G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oDAAmD,OAAO,SAAS;AACnE;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,cAAa,UAAU;AACvB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,U;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,U;AACA,iBAAgB;AAChB;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,kBAAkB;AAC/C;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,MAAM;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,cAAa,UAAU;AACvB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAa,QAAQ;AACrB,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,cAAa,YAAY;AACzB,cAAa,YAAY;AACzB,cAAa,WAAW;AACxB,cAAa,UAAU;AACvB,cAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,QAAQ;AACrB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA,sCAAqC,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA,cAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,mBAAkB,kBAAkB;AACpC;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA,aAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,qCAAqC;AACtD,uBAAsB,kDAAkD;AACxE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,MAAM;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA,qBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC3yCA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,iBAAgB,SAAS;AACzB,iBAAgB,MAAM;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,wBAAuB;AACvB,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,E;;;;;;AC/KA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb,6BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,U;;;AAGA;AACA;AACA;AACA;AACA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wF;AACA;;;AAGA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;;;AAGzB;AACA,0EAAyE;AACzE;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA,0BAAyB,kBAAkB;AAC3C;;AAEA,iDAAgD,kDAAkD;AAClG,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;;;AAIL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;;;;;;;;AC3QA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,6B;;;;;;ACrCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,0B;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,sCAAqC,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;;AAGA;AACA;;AAEA,8B;;;;;;ACjIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;;AAEnB;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA,4BAA2B,MAAM;AACjC;AACA;AACA;AACA,kBAAiB,gBAAgB;AACjC;;AAEA;;AAEA;;AAEA,mBAAkB,kBAAkB;AACpC;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,mBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA,6B;;;;;;AClFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,gBAAgB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,OAAO;AAC7C;AACA;AACA,0BAAyB,kBAAkB;AAC3C;;AAEA,iDAAgD,kDAAkD;AAClG,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2B;;;;;;;AChJA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA,+B;;;;;;AC9BA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,uCAAsC,KAAK;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,MAAM;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;AACA,kCAAiC,mBAAmB,O;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gI;AACA;;AAEA;;AAEA,0B;;;;;;AChKA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,qB;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;;AAEA;AACA;;AAEA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3FA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,sBAAqB,qBAAqB;AAC1C;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA,6B;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,qcAA+G,aAAa,cAAc,oEAAoE,kVAAkV,oBAAoB,4CAA4C,eAAe,yBAAyB,4CAA4C,eAAe,+PAA+P,mCAAmC,qCAAqC,+LAA+L,aAAa,OAAO,gBAAgB,oEAAoE,iNAAiN,uCAAuC,EAAE,6CAA6C,kCAAkC,kCAAkC,4CAA4C,EAAE,oCAAoC,yBAAyB,wHAAwH,qBAAqB,+CAA+C,EAAE,uCAAuC,4BAA4B,wFAAwF,2BAA2B,gEAAgE,kGAAkG,2BAA2B,qBAAqB,WAAW,wCAAwC,aAAa,uBAAuB,8DAA8D,0BAA0B,oCAAoC,EAAE,E;;;;;;ACP/iF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA,KAAI;;AAEJ,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA,KAAI;AACJ,2BAA0B,OAAO,gBAAgB;AACjD;;AAEA;AACA;AACA;AACA,iCAAgC,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,mCAAmC;AAC1E,OAAM;;AAEN;AACA;AACA,YAAW;AACX,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,e;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iC;;;;;;AC7MA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA4E,oBAAoB,QAAQ,OAAO,wBAAwB;AACvI;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;AAGA,WAAU;;AAEV,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACxFA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kBAAkB;AAC7C,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAsD,iDAAiD;AACvG;;AAEA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;;AAEH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,kC","file":"lynnCharts.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lynnCharts\"] = factory(require(\"jquery\"));\n\telse\n\t\troot[\"lynnCharts\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6b144c52cfee5d1488b3\n **/","\r\n\tvar $ = require('jquery');\r\n\tvar LynnLayout = require('./plugin/LynnLayout');\r\n\tvar LynnSpinner = require('./plugin/lynnSpinner.js');\r\n\tvar LynnDropDown = require('./plugin/lynnDropDown.js');\r\n\trequire('./plugin/colorpicker/spectrum.js')\r\n\tvar ChartBox = require('./ChartBox');\r\n\r\n\t\r\n\t/**\r\n\t * 总chart,把其他的结合起来而来\r\n\t * @param {obj} opts {\r\n\t *      container: element\t//该插件跟据哪个元素生成\r\n\t *      width:1500,\r\n\t *      height:600,\r\n\t *      toolbar: {\r\n\t *      \tperiod:{}\t\t//显示什么时间周期\r\n\t *      \ttype: {} \t\t//选择类型\r\n\t *       \tMAS: {}\t\t\t//平均线\r\n\t *       \tlayout: {}\t\t//展现形式\r\n\t *      },\r\n\t *      chart: {\t//ChartBox里面的配置\r\n\t *      },\r\n\t *      onError:function(){},\t//错误处理函数\r\n\t *      onAdd:function(){},\r\n\t *      onRemove: function(){}\r\n\t * }\r\n\t */\r\n\tvar newGmail =  [[\"#000\",\"#444\",\"#666\",\"#999\",\"#ccc\",\"#eee\",\"#f3f3f3\",\"#fff\"],[\"#f00\",\"#f90\",\"#ff0\",\"#0f0\",\"#0ff\",\"#00f\",\"#90f\",\"#f0f\"],[\"#f4cccc\",\"#fce5cd\",\"#fff2cc\",\"#d9ead3\",\"#d0e0e3\",\"#cfe2f3\",\"#d9d2e9\",\"#ead1dc\"],[\"#ea9999\",\"#f9cb9c\",\"#ffe599\",\"#b6d7a8\",\"#a2c4c9\",\"#9fc5e8\",\"#b4a7d6\",\"#d5a6bd\"],[\"#e06666\",\"#f6b26b\",\"#ffd966\",\"#93c47d\",\"#76a5af\",\"#6fa8dc\",\"#8e7cc3\",\"#c27ba0\"],[\"#c00\",\"#e69138\",\"#f1c232\",\"#6aa84f\",\"#45818e\",\"#3d85c6\",\"#674ea7\",\"#a64d79\"],[\"#900\",\"#b45f06\",\"#bf9000\",\"#38761d\",\"#134f5c\",\"#0b5394\",\"#351c75\",\"#741b47\"],[\"#600\",\"#783f04\",\"#7f6000\",\"#274e13\",\"#0c343d\",\"#073763\",\"#20124d\",\"#4c1130\"]];\r\n\t\r\n\r\n\t\r\n\r\n\tfunction LynnCharts(opts){\r\n\t\t\tvar defaults = {\r\n\t\t\t\tdpWrap:document.body,\r\n\t\t\t\ttoolbar: {\r\n\t\t\t\t\tapplyAll:false,\r\n\t\t\t\t\tperiod: {\r\n\t\t\t\t\t\tlabelWidth: 85,\r\n\t\t\t\t\t\tlabel: function(activeEle){\r\n\t\t\t\t\t\t\tif(activeEle){\r\n\t\t\t\t\t\t\t\tvar v = activeEle.item;\r\n\t\t\t\t\t\t\t\treturn v.label;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn '选择周期'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlistCls:'chart-period',\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{label: '1 Minute', value:1, active:true},\r\n\t\t\t\t\t\t\t{label: '5 Minute', value:5},\r\n\t\t\t\t\t\t\t{label: '15 Minute', value:15},\r\n\t\t\t\t\t\t\t{label: '1 Hour', value:60},\r\n\t\t\t\t\t\t\t{label: '1 Day', value:100},\r\n\t\t\t\t\t\t\t{label: '1 Week', value:200},\r\n\t\t\t\t\t\t\t{label: '1 Month', value:300}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tformatItemTpl: function(item) {\r\n\t\t\t\t\t\t\tvar cls = item.active ? 'active':''\r\n\t\t\t\t\t\t\treturn '<a class=\"clearfix '+ cls +'\">'+ item.label + '<i class=\"icon icon-shoucang\"></i></a>';\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titemClick: function(data,obj) {\r\n\t\t\t\t\t\t\tobj.c.changePeriod(data.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: {\r\n\t\t\t\t\t\tlabel: function(activeEle){\r\n\t\t\t\t\t\t\tif(activeEle){\r\n\t\t\t\t\t\t\t\tvar v = activeEle.item;\r\n\t\t\t\t\t\t\t\treturn v.label;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn '切换类型'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlistCls:'chart-type',\r\n\t\t\t\t\t\tlabelWidth: 70,\r\n\t\t\t\t\t\twidth:100,\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{label:'折线图', value:'polyline' },\r\n\t\t\t\t\t\t\t{label: 'k线图', value:'candlestick',active:true},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tformatItemTpl: function(item) {\r\n\t\t\t\t\t\t\tvar cls = item.active ? 'active':''\r\n\t\t\t\t\t\t\treturn '<a class=\"clearfix '+ cls +'\">'+ item.label + '<i class=\"icon icon-shoucang\"></i></a>';\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titemClick: function(data,obj){\r\n\t\t\t\t\t\t\tvar chart = obj.c;\r\n\t\t\t\t\t\t\tchart.changeType(data.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tMAS: {\r\n\t\t\t\t\t\tlabel:'MAs',\r\n\t\t\t\t\t\tlabelWidth:60,\r\n\t\t\t\t\t\twidth: 152,\r\n\t\t\t\t\t\tmultiple:true,\r\n\t\t\t\t\t\tlistCls:'MAList',\r\n\t\t\t\t\t\tmaxCount:8,\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{label:'MA5',value:5,active:true},\r\n\t\t\t\t\t\t\t{label:'MA10',value:10,active:true},\r\n\t\t\t\t\t\t\t{label:'MA20',value:20,active:true},\r\n\t\t\t\t\t\t\t{label:'MA60',value:60,active:true}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tonError: function(status,msg) {\r\n\t\t\t\t\t\t\tthis.c.onError(status,msg);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfooter: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tplugin: LynnSpinner,\r\n\t\t\t\t\t\t\t\tname:'spinner',\r\n\t\t\t\t\t\t\t\ttpl:'<input type=\"text\"></input>',\r\n\t\t\t\t\t\t\t\toptions: {min:1,step:1,max:250}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname:'colorpicker',\r\n\t\t\t\t\t\t\t\ttpl:'<input type=\"text\"></input>',\r\n\t\t\t\t\t\t\t\tinit: function(opts,fatherObj){\r\n\t\t\t\t\t\t\t\t\tvar appendTo = fatherObj.dpListWrap;\r\n\t\t\t\t\t\t\t\t\tvar opts = {\r\n\t\t\t\t\t\t\t\t\t\tcolor:'yellow',\r\n\t\t\t\t\t\t\t\t\t\tshowPaletteOnly: true,\r\n\t\t\t\t\t\t\t\t\t    togglePaletteOnly: true,\r\n\t\t\t\t\t\t\t\t\t    hideAfterPaletteSelect:true,\r\n\t\t\t\t\t\t\t\t\t    togglePaletteMoreText: '自定义',\r\n\t\t\t\t\t\t\t\t\t    togglePaletteLessText: '返回',\r\n\t\t\t\t\t\t\t\t\t    palette:newGmail,\r\n\t\t\t\t\t\t\t\t\t    appendTo:appendTo\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn this.spectrum(opts);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttpl:'<button class=\"btn btn-add btn-dark\">添加</button>',\r\n\t\t\t\t\t\t\t\tonClick: function(dpObj){\r\n\t\t\t\t\t\t\t\t\tvar value = dpObj.plugins['spinner'].getVal();\r\n\t\t\t\t\t\t\t\t\tvar color = dpObj.plugins['colorpicker'].spectrum('get').toHexString();\r\n\t\t\t\t\t\t\t\t\tvar item = {label:'MA'+value, value:value, active:true, canDel:true, group:'add'};\r\n\t\t\t\t\t\t\t\t\tvar add = dpObj.addItem(item);\r\n\t\t\t\t\t\t\t\t\tif(add) {\r\n\t\t\t\t\t\t\t\t\t\tvar chart = dpObj.c;\r\n\t\t\t\t\t\t\t\t\t\tchart.changeMas({label:item.label,type:'MA',color: color,daysCount: value,sort:value},true);\r\n\t\t\t\t\t\t\t\t\t\tdpObj.plugins['spinner'].setVal(1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\titemClick: function(data,dpObj){\r\n\t\t\t\t\t\t\tvar chart = dpObj.c;\r\n\t\t\t\t\t\t\tchart.changeMas(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjumpLastestBtn:'<i class=\"icon icon-justify-r\"></i>',\r\n\t\t\t\t\tfullscreen: {\r\n\t\t\t\t\t\tbig:'全屏',\r\n\t\t\t\t\t\tsmall:'返回'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlayoutCtrl: {\r\n\t\t\t\t\t\tlabel: function(activeEle){\r\n\t\t\t\t\t\t\tif(activeEle){\r\n\t\t\t\t\t\t\t\tvar v = activeEle.item;\r\n\t\t\t\t\t\t\t\treturn v.label;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn '布局'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlabelWidth:110,\r\n\t\t\t\t\t\twidth: 150,\r\n\t\t\t\t\t\tlistCls:'layoutCtrl',\r\n\t\t\t\t\t\tmaxCount:6,\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{label:'单窗口多标签',value:0,active: true},\r\n\t\t\t\t\t\t\t{label:'多窗口1列',value:1},\r\n\t\t\t\t\t\t\t{label:'多窗口2列',value:2},\r\n\t\t\t\t\t\t\t{label:'多窗口3列',value:3}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\titemClick: function(data,dpObj){\r\n\t\t\t\t\t\t\tvar chart = dpObj.c;\r\n\t\t\t\t\t\t\tchart.changeLayout(data.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlock:false,\r\n\t\t\t\t},\r\n\t\t\t\tlayout: {\r\n\t\t\t\t},\r\n\t\t\t\tchartbox: {\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\tdrag: {\r\n\t\t\t\t\t\t\tonBeforeDrag: function(){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.operateChart(function(chartBox) {\r\n\t\t\t\t\t\t\t\t\tif(chartBox!==this) {\r\n\t\t\t\t\t\t\t\t\t\tvar crossLineEvents = chartBox.eventList['crossLine'];\r\n\t\t\t\t\t\t\t\t\t\tif(crossLineEvents) {\r\n\t\t\t\t\t\t\t\t\t\t\tcrossLineEvents.mouseout.call(crossLineEvents);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tchartBox.tempOldRanges = chartBox.dataRanges;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonDrag:function(oldRanges){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.synchronizeDrag(this,oldRanges);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonAfterDrag: function(){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.operateChart(function(chartBox) {\r\n\t\t\t\t\t\t\t\t\tif(chartBox!==this) {\r\n\t\t\t\t\t\t\t\t\t\tdelete chartBox.tempOldRanges;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twheel: {\r\n\t\t\t\t\t\t\tstep:6,\r\n\t\t\t\t\t\t\tonBeforeWheel: function(){\r\n\t\t\t\t\t\t\t\tconsole.log('onBeforeWheel');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonWheel: function(oldRanges){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.synchronizeWheel(this,oldRanges)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcrossLine: {\r\n\t\t\t\t\t\t\tonCross: function(info){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.synchronizeCross(this,info)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonAfterCross: function(){\r\n\t\t\t\t\t\t\t\tvar chart = this.c;\r\n\t\t\t\t\t\t\t\tchart.synchronizeAfterCross(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\trightClick:{}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tpolyline: {\r\n\t\t\t\t\tlineColor:'yellow',\r\n\t\t\t\t},\r\n\t\t\t\tformatTabTpl: function(item) {\r\n\t\t\t\t\tvar tpl = '<span class=\"title\">'+item.title+'</span>';\r\n\t\t\t\t\tif(item.ask != void 0) tpl += '<span class=\"number-plus price ask\">卖价:'+item.ask+'</span>';\r\n\t\t\t\t\tif(item.bid != void 0) tpl += '<span class=\"number-fall price bid\">买价:'+item.bid+'</span>';\r\n\t\t\t\t\treturn tpl\r\n\t\t\t\t},\r\n\t\t\t\titems: [],\r\n\t\t\t\tonError: function(status,msg){alert(msg)}\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t$.extend(true,this,defaults,opts);\r\n\t\t\tvar container = this.container||document.body\r\n\t\t\tthis.container = $(container).addClass('lynn-chart');\r\n\t\t\tif(!/^p|r|f/.test(this.container.css('position'))) {\r\n\t\t\t\tthis.container.css('position','relative');\r\n\t\t\t}\r\n\t\t\tthis.chartList = [];\r\n\t\t\tthis.init();\r\n\t}\r\n\tLynnCharts.prototype = {\r\n\t\tconstructor: LynnCharts,\r\n\t\tinit: function(){\r\n\t\t\tthis.initToolBar();\r\n\t\t\tthis.initLayout();\r\n\t\t},\r\n\t\tinitSize: function(){\r\n\t\t\tif(!this.width) {\r\n\t\t\t\tthis.width = this.container.width();\r\n\t\t\t}\r\n\t\t\tif(!this.height) {\r\n\t\t\t\tthis.height = this.container.height();\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitToolBar: function(){\r\n\t\t\tvar toolbarOpts = this.toolbar;\r\n\t\t\tif(!toolbarOpts) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar me = this;\r\n\t\t\tthis.toolbarEle = $('<div class=\"lynn-chart-toolbar\"></div>').appendTo(this.container);\r\n\t\t\tfor(var tool in toolbarOpts) {\r\n\t\t\t\tvar opts = toolbarOpts[tool];\r\n\t\t\t\tswitch(tool) {\r\n\t\t\t\t\tcase 'period':\r\n\t\t\t\t\tcase 'type':\r\n\t\t\t\t\tcase 'MAS':\r\n\t\t\t\t\tcase 'layoutCtrl':\r\n\t\t\t\t\t\tvar div = $('<div class=\"'+tool+'-dp\"></div>').appendTo(this.toolbarEle);\r\n\t\t\t\t\t\topts.dpListWrap = this.dpListWrap;\r\n\t\t\t\t\t\tvar dpObj = new LynnDropDown(div,opts);\r\n\t\t\t\t\t\tdpObj.c = this;\r\n\t\t\t\t\t\tthis[tool+\"DpObj\"] = dpObj\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'applyAll':\r\n\t\t\t\t\t\tvar check = opts ? 'checked=checked':'';\r\n\t\t\t\t\t\tvar applyAllDiv = $('<span class=\"lynn-chart-apply-all\"><input id=\"apply-all\" type=\"checkbox\" '+check+' /><label for=\"apply-all\">应用到全部</label></span>').appendTo(this.toolbarEle);\r\n\t\t\t\t\t\tthis.applyAllEle = applyAllDiv;\r\n\t\t\t\t\t\tthis.applyAll = opts;\r\n\t\t\t\t\t\tvar me = this;\r\n\t\t\t\t\t\tapplyAllDiv.find('#apply-all').on('click',function(e){\r\n\t\t\t\t\t\t\tme.applyAll = !me.applyAll;\r\n\t\t\t\t\t\t\tvar checked = $(this).prop('checked');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'jumpLastestBtn':\r\n\t\t\t\t\t\tvar btn = $('<div class=\"lynn-chart-jumpLastestbtn\"><a href=\"javascript:void(0)\" >'+opts+'</a></div>').appendTo(this.toolbarEle);\r\n\t\t\t\t\t\tbtn.find('a').on('click',function(){\r\n\t\t\t\t\t\t\tme.jumpLastest();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'fullscreen':\r\n\t\t\t\t\t\tvar ele = $('<div class=\"lynn-chart-fullscreen\"><a href=\"javascript:void(0)\">'+opts.big+'</a></div>').appendTo(this.toolbarEle);\r\n\t\t\t\t\t\tthis.fullscreenOpts = opts;\r\n\t\t\t\t\t\tthis.fullscreenEle = ele;\r\n\t\t\t\t\t\tele.find('a').on('click',function(e){\r\n\t\t\t\t\t\t\tme.changeFullscreenStatus(this,e);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'lock':\r\n\t\t\t\t\t\tvar lockDiv = $('<div class=\"lynn-chart-lock\"><span class=\"lock-label\"></span><a href=\"javascript:void(0)\" class=\"lock-btn\"><i></i></a></div>').appendTo(this.toolbarEle);\r\n\t\t\t\t\t\tthis.lockEle = lockDiv;\r\n\t\t\t\t\t\tif(this.layoutCtrlDpObj) {\r\n\t\t\t\t\t\t\tvar value;\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tvalue = this.layoutCtrlDpObj.activedEle.item.value\r\n\t\t\t\t\t\t\t}catch(e){}\r\n\t\t\t\t\t\t\tif(value==0) {\r\n\t\t\t\t\t\t\t\tlockDiv.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlockDiv.find('.lock-btn').on('click',function(e){\r\n\t\t\t\t\t\t\tme.changeLockedStatus(!me.locked);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.changeLockedStatus(opts);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitLayout: function(){\r\n\t\t\tvar me = this;\r\n\t\t\tvar layoutOpts = this.layout;\r\n\t\t\tvar col = this.layoutCtrlDpObj.activedEle.item.value;\r\n\t\t\tvar opts = $.extend(this.layout,{col:col,items:this.items,formatTabTpl: this.formatTabTpl});\r\n\t\t\tvar onAdd = opts.onAdd,onRemove = opts.onRemove;\r\n\t\t\topts.onAdd = function(item){\r\n\t\t\t\tvar wrap = this;\r\n\t\t\t\tme.addChart.call(me,wrap,item);\r\n\t\t\t\tonAdd&&onAdd.call(this,item);\r\n\t\t\t}\r\n\t\t\topts.onRemove = function(index) {\r\n\t\t\t\tme.removeChart.call(me,index);\r\n\t\t\t}\r\n\t\t\topts.onZoomIn = function(index){\r\n\t\t\t\tvar chartBox = me.chartList[index];\r\n\t\t\t\tchartBox.resize();\r\n\t\t\t}\r\n\t\t\topts.onZoomOut = function(index) {\r\n\t\t\t\tvar chartBox = me.chartList[index];\r\n\t\t\t\tchartBox.resize();\r\n\t\t\t}\r\n\t\t\topts.onChangeActive = function(index) {\r\n\t\t\t\tme.synchronizeToolBar.call(me,index);\r\n\t\t\t\tme.onChange&&me.onChange.call(me,index);\r\n\t\t\t}\r\n\t\t\tvar toolbarHeight = this.toolbarEle.outerHeight();\r\n\t\t\tthis.toolbarHeight = toolbarHeight;\r\n\t\t\tvar layoutWrapHeight = this.container.height() - toolbarHeight;\r\n\t\t\tvar layoutWrap = $('<div style=\"position:relative;height:'+layoutWrapHeight+'px\"></div>').appendTo(this.container);\r\n\t\t\topts.container = layoutWrap;\r\n\t\t\tthis.layoutEle = layoutWrap;\r\n\t\t\tthis.layoutObj = new LynnLayout(opts);\r\n\t\t\tthis.layoutObj.c = this;\r\n\t\t},\r\n\t\tsynchronizeToolBar: function(index){\r\n\t\t\tvar chartBox = this.chartList[index];\r\n\t\t\tif(!chartBox) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar toolbar = ['period','type','MAS'];\r\n\t\t\tfor(var i=0,cur;cur=toolbar[i++];) {\r\n\t\t\t\tvar item = chartBox[cur+\"DpItem\"];\r\n\t\t\t\tif(item) {\r\n\t\t\t\t\tthis[cur+'DpObj'].setActiveByItem(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeLockedStatus: function(status){\r\n\t\t\tif(this.layoutObj) {\r\n\t\t\t\tif(this.layoutObj.col==0) {\r\n\t\t\t\t\tstatus = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.locked == status) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar text = status ? '解锁':'锁定';\r\n\t\t\tthis.lockEle.find('.lock-label').html(text);\r\n\t\t\tvar clsFn = status ? 'addClass' : 'removeClass';\r\n\t\t\tthis.lockEle.find('.lock-btn')[clsFn]('locked');\r\n\t\t\tthis.locked  = status;\r\n\r\n\t\t\tif(status==true) {\r\n\t\t\t\tthis.synchronizeFn();\r\n\t\t\t}\r\n\t\t},\r\n\t\taddChart: function(wrap,item){\r\n\t\t\tvar me = this;\r\n\t\t\tvar chartOpts = this.chartbox;\r\n\t\t\tif(item.opts) {\r\n\t\t\t\tchartOpts = $.extend(true,{},chartOpts,item.opts);\r\n\t\t\t\tdelete item.opts;\r\n\t\t\t}\r\n\t\t\tchartOpts.formatTitleTpl = this.formatTabTpl;\r\n\t\t\tchartOpts.title = item;\r\n\t\t\tchartOpts.container = wrap;\r\n\r\n\t\t\tvar chartObj = new ChartBox(chartOpts);\r\n\t\t\tchartObj.c = this;\r\n\t\t\tchartObj.ajaxTime = +new Date();\r\n\t\t\tthis.initChartObjDpItem(chartObj)\r\n\t\t\tthis.chartList.push(chartObj);\r\n\t\t\tif(this.locked && this.chartList.length > 1) {\r\n\t\t\t\tvar oldActiveBox = null;\r\n\t\t\t\tif(this.oldActiveIndex!==void 0) {\r\n\t\t\t\t\toldActiveBox = this.chartList[this.oldActiveIndex];\r\n\t\t\t\t\tdelete this.oldActiveIndex ;\r\n\t\t\t\t}\r\n\t\t\t\tchartObj.readyList.push(function(){\r\n\t\t\t\t\tme.synchronizeFn(oldActiveBox,null,chartObj);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(item.active) {\r\n\t\t\t\t//同步toolbar\r\n\t\t\t\tchartObj.readyList.push(function(){\r\n\t\t\t\t\tme.synchronizeToolBar(me.chartList.length-1);\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tthis.onAdd&&this.onAdd.call(null,item);\r\n\t\t},\r\n\t\tremoveChart: function(index) {\r\n\t\t\tvar chartBox = this.chartList[index];\r\n\t\t\tthis.chartList.splice(index,1);\r\n\t\t\tthis.resize();\r\n\t\t\tthis.onRemove&&this.onRemove.call(null,index,chartBox.title);\r\n\t\t},\r\n\t\tinitChartObjDpItem:function(chartObj) {\r\n\t\t\tvar chartOpts = chartObj.chartOpts;\r\n\t\t\tvar period = chartOpts.period;\r\n\t\t\tvar chartType = chartOpts.mainArea.type;\r\n\t\t\tvar subCharts = chartOpts.mainArea.subCharts;\r\n\t\t\tchartObj.periodDpItem = {value:period};\r\n\t\t\tchartObj.typeDpItem = {value:chartType};\r\n\t\t\tvar items = [];\r\n\t\t\tfor(var c in subCharts) {\r\n\t\t\t\tvar cur = subCharts[c];\r\n\t\t\t\tvar active = (cur.show!==false);\r\n\t\t\t\titems.push({value: cur.daysCount,label: c, active:active});\r\n\t\t\t}\r\n\t\t\tchartObj.MASDpItem = items;\r\n\t\t},\r\n\t\toperateChart: function(){\r\n\t\t\tvar args = arguments, activeChartBox, callback, isApplyAll;\r\n\t\t\tvar type = $.type(args[0]);\r\n\t\t\tif(type=='function') {\r\n\t\t\t\tvar activeIndex = this.layoutObj.getActiveIndex();\r\n\t\t\t\tactiveChartBox = this.chartList[activeIndex];\r\n\t\t\t\tcallback = args[0];\r\n\t\t\t\tisApplyAll = args[1];\r\n\t\t\t}else if(type=='object') {\r\n\t\t\t\tactiveChartBox = args[0]\r\n\t\t\t\tcallback = args[1];\r\n\t\t\t\tisApplyAll = args[2];\r\n\t\t\t}\r\n\t\t\tvar status;\r\n\t\t\tif(isApplyAll) {\r\n\t\t\t\tstatus = this.applyAll;\r\n\t\t\t}else {\t\r\n\t\t\t\tstatus = this.locked;\r\n\t\t\t}\r\n\r\n\t\t\tif(status) {\r\n\t\t\t\tfor(var i=0,cur;cur = this.chartList[i++];) {\r\n\t\t\t\t\tcallback(cur);\r\n\t\t\t\t}\r\n\t\t\t}else {\r\n\t\t\t\tcallback(activeChartBox);\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangePeriod: function(period){\r\n\t\t\tvar me = this;\r\n\t\t\tthis.operateChart(function(chartBox){\r\n\t\t\t\tvar p = chartBox.chartOpts.period;\r\n\t\t\t\tif(p!=period) {\r\n\t\t\t\t\tchartBox.chartOpts.period = period;\r\n\t\t\t\t\tchartBox.dataRanges = null;\r\n\t\t\t\t\tchartBox.ajaxData(null,null,function(datas){\r\n\t\t\t\t\t\tchartBox.datas = datas;\r\n\t\t\t\t\t\tchartBox.painter();\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tchartBox.periodDpItem = me.periodDpObj.activedEle.item;\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t},\r\n\t\tchangeType: function(type) {\r\n\t\t\tvar obj = {type:type};\r\n\t\t\tvar typeOpts = this[type];\r\n\t\t\tif(typeOpts) {\r\n\t\t\t\tobj.opts = typeOpts;\r\n\t\t\t}\r\n\t\t\tvar me = this;\r\n\t\t\tthis.operateChart(function(chartBox){\r\n\t\t\t\tchartBox.changeAreaChart('mainArea',obj);\r\n\t\t\t\tchartBox.typeDpItem = me.typeDpObj.activedEle.item;\r\n\t\t\t},true);\r\n\t\t},\r\n\t\tchangeMas: function(data,add) {\r\n\t\t\tvar del = data.delete, show = data.show, me = this;\r\n\t\t\tif(add) {\r\n\t\t\t\tthis.operateChart(function(chartBox){\r\n\t\t\t\t\tvar chartObj = chartBox.chartOpts.mainArea.subCharts;\r\n\t\t\t\t\tvar key = data.label;\r\n\t\t\t\t\tdelete data.label;\r\n\t\t\t\t\tchartObj[key] = data;\r\n\t\t\t\t\tchartBox.changeAreaChart('mainArea');\r\n\t\t\t\t\tchartBox.MASDpItem = me.MASDpObj.items;\r\n\t\t\t\t},true)\r\n\t\t\t}else {\r\n\t\t\t\tthis.operateChart(function(chartBox){\r\n\t\t\t\t\tvar chartObj = chartBox.chartOpts.mainArea.subCharts;\r\n\t\t\t\t\tif(del) {\t//表示删除\r\n\t\t\t\t\t\tdelete chartObj[data.label]\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tchartObj[data.label].show = show;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchartBox.changeAreaChart('mainArea');\r\n\t\t\t\t\tchartBox.MASDpItem = me.MASDpObj.items;\r\n\t\t\t\t},true)\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeLayout: function(col){\r\n\t\t\tif(col==0) {\r\n\t\t\t\tthis.lockEle.hide();\r\n\t\t\t\tthis.changeLockedStatus(false);\r\n\t\t\t}else {\r\n\t\t\t\tthis.lockEle.show();\r\n\t\t\t}\r\n\t\t\tthis.layoutObj.changeCol(col);\r\n\t\t\tfor(var i=0,cur;cur=this.chartList[i++];) {\r\n\t\t\t\tcur.resize();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsynchronizeDrag: function(chartbox,oldRanges){\r\n\t\t\tvar dataRanges = chartbox.dataRanges;\r\n\t\t\tvar count = dataRanges.to - oldRanges.to;\r\n\t\t\tvar time;\r\n\t\t\tif(count >0) {\r\n\t\t\t\tif(dataRanges.start > 0) {\r\n\t\t\t\t\ttime = chartbox.datas[dataRanges.start].quoteTime;\r\n\t\t\t\t}else {\r\n\t\t\t\t\ttime = count;\r\n\t\t\t\t}\r\n\t\t\t}else if(count<0) {\r\n\t\t\t\tif(dataRanges.to < chartbox.datas.length-1) {\r\n\t\t\t\t\ttime = chartbox.datas[dataRanges.to].quoteTime;\r\n\t\t\t\t}else {\r\n\t\t\t\t\ttime = count;\r\n\t\t\t\t}\r\n\t\t\t}else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar dir = count > 0 ? 0: 1;\r\n\r\n\t\t\tthis.operateChart(chartbox,function(chartBox){\r\n\t\t\t\tif(chartBox!==chartbox) {\r\n\t\t\t\t\tif(Math.abs(time)<1000) {\r\n\t\t\t\t\t\tvar tempOldRanges = chartBox.tempOldRanges;\r\n\t\t\t\t\t\tvar start = tempOldRanges.start + time, to = tempOldRanges.to + time;\r\n\t\t\t\t\t\tvar ranges = {start:start,to:to};\r\n\t\t\t\t\t\tchartBox.synchronizeX(ranges,dir);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tchartBox.synchronizeX(time,dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tsynchronizeCross: function(chartbox,crossInfo) {\r\n\t\t\tthis.operateChart(chartbox,function(chartBox){\r\n\t\t\t\tif(chartBox!==chartbox) {\r\n\t\t\t\t\tvar crossLineEvents = chartBox.eventList['crossLine'];\r\n\t\t\t\t\tif(crossLineEvents) {\r\n\t\t\t\t\t\tcrossLineEvents.drawByValue.call(crossLineEvents,crossInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tsynchronizeAfterCross: function(chartbox) {\r\n\t\t\tthis.operateChart(chartbox,function(chartBox){\r\n\t\t\t\tif(chartBox!==chartbox) {\r\n\t\t\t\t\tvar crossLineEvents = chartBox.eventList['crossLine'];\r\n\t\t\t\t\tif(crossLineEvents) {\r\n\t\t\t\t\t\tcrossLineEvents.mouseout.apply(crossLineEvents);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tsynchronizeWheel: function(chartbox,oldRanges){\r\n\t\t\tvar dataRanges = chartbox.dataRanges;\r\n\t\t\tif(dataRanges.to==oldRanges.to&&dataRanges.start==oldRanges.start) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar time;\r\n\t\t\tif(dataRanges.to > chartbox.datas.length-1) {\r\n\t\t\t\ttime = dataRanges.to - oldRanges.to;\r\n\t\t\t}else {\r\n\t\t\t\ttime = chartbox.datas[dataRanges.to].quoteTime;\r\n\t\t\t}\r\n\t\t\tthis.synchronizeFn(chartbox,time);\r\n\t\t},\r\n\t\tjumpLastest: function(){\r\n\t\t\tthis.operateChart(function(chartBox){\r\n\t\t\t\tvar dataRanges = chartBox.dataRanges;\r\n\t\t\t\tvar count = dataRanges.to - dataRanges.start;\r\n\t\t\t\tvar to = chartBox.datas.length-1, start = to - count;\r\n\t\t\t\tchartBox.painter({start:start,to:to});\r\n\t\t\t},true)\r\n\t\t},\r\n\r\n\t\t//同步x轴\r\n\t\tsynchronizeFn: function(activebox,time,changeChartBox){\r\n\t\t\tif(!activebox) {\r\n\t\t\t\tvar activeIndex  = this.layoutObj.getActiveIndex();\r\n\t\t\t\tvar activebox = this.chartList[activeIndex];\r\n\t\t\t}\r\n\t\t\tvar changeTime;\r\n\t\t\tif(time) {\r\n\t\t\t\tchangeTime = time;\r\n\t\t\t}else {\r\n\t\t\t\tif( activebox.dataRanges.to > activebox.datas.length-1) {\r\n\t\t\t\t\tchangeTime = activebox.dataRanges.to - activebox.datas.length -1;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tchangeTime = activebox.datas[activebox.dataRanges.to].quoteTime;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar barWidth = activebox.chartOpts.theme.barWidth,spaceWidth = activebox.chartOpts.theme.spaceWidth;\r\n\t\t\tif(changeChartBox) {\r\n\t\t\t\tchange(changeChartBox,changeTime,barWidth,spaceWidth);\r\n\t\t\t}else {\r\n\t\t\t\tthis.operateChart(activebox,function(chartBox) {\r\n\t\t\t\t\tif(chartBox!=activebox) {\r\n\t\t\t\t\t\tchange(chartBox,changeTime,barWidth,spaceWidth);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfunction change(chartBox,time,barWidth,spaceWidth){\r\n\t\t\t\tif(Math.abs(time) < 1000) {\r\n\t\t\t\t\tvar dataRanges = chartBox.dataRanges;\r\n\t\t\t\t\tvar obj = {start:dataRanges.start+time,to:dataRanges.to+time};\r\n\t\t\t\t\tchartBox.synchronizeX(obj,1,barWidth,spaceWidth);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tchartBox.synchronizeX(time,1,barWidth,spaceWidth);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetActive: function(v) {\r\n\t\t\tif(v=='undefined') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar ret = this.layoutObj.setActive(v);\r\n\t\t},\r\n\t\tadd: function(item){\r\n\t\t\tvar chartboxes = [];\r\n\t\t\tfor(var i=0,cur;cur=this.chartList[i++];) {\r\n\t\t\t\tchartboxes.push(cur);\r\n\t\t\t}\r\n\t\t\tthis.oldActiveIndex  = this.layoutObj.getActiveIndex();\r\n\t\t\tvar ret = this.layoutObj.addItem(item);\r\n\t\t\tif(ret!==false) {\r\n\t\t\t\tfor(var i=0,box;box=chartboxes[i++];) {\r\n\t\t\t\t\tbox.resize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ret;\r\n\t\t},\r\n\t\tupdateLatestDatas: function(datas){\r\n\t\t\tvar now = +new Date();\r\n\t\t\tfor(var i=0,cur;cur = this.chartList[i++];) {\r\n\t\t\t\tif(now - cur.ajaxTime < 1000) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcur.ajaxTime  = now;\r\n\r\n\t\t\t\t//如果没有数据，就用ajax\r\n\t\t\t\tif(!datas) {\r\n\t\t\t\t\tcur.ajaxData(null,null,function(datas){\r\n\t\t\t\t\t\tupdateDatas(this,datas);\r\n\t\t\t\t\t},false,false)\r\n\t\t\t\t}else {\r\n\t\t\t\t\tvar symbol = cur.title.title;\r\n\t\t\t\t\tvar curDatas = (datas[symbol]||[]).reverse();\r\n\t\t\t\t\tupdateDatas(cur,curDatas)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//更新数据\r\n\t\t\tfunction updateDatas(chartBox,datas){\r\n\t\t\t\tif(!datas||!datas.length) return false;\r\n\t\t\t\tvar to = chartBox.dataRanges.to,start = chartBox.dataRanges.start;\r\n\t\t\t\tvar oldDatasLength = chartBox.datas.length;\r\n\r\n\t\t\t\tvar appendDatas = compareDatas(chartBox,datas);\r\n\t\t\t\tif(!appendDatas) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tappendDatas = chartBox.formatDatas(appendDatas);\r\n\t\t\t\tchartBox.datas.pop();\r\n\t\t\t\tchartBox.appendDatas(appendDatas,1);\r\n\t\t\t\tvar dataLength = appendDatas.length - 1;\r\n\r\n\t\t\t\t//如果当前显示的是最新的数据，那么需要更新图\r\n\t\t\t\tif(to >= oldDatasLength -1) {\r\n\t\t\t\t\tvar max = to - (oldDatasLength -1);\r\n\t\t\t\t\tif(dataLength <= max) {\r\n\t\t\t\t\t\tto = to + dataLength;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tvar count = to - start;\r\n\t\t\t\t\t\tto = chartBox.datas.length-1;\r\n\t\t\t\t\t\tstart = to - count;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tchartBox.dataRanges = {start: start,to:to};\r\n\t\t\t\t\tchartBox.painter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//比较数据\r\n\t\t\tfunction compareDatas(chartBox,newDatas) {\r\n\t\t\t\tvar oldDatas = chartBox.datas, oldLatestTime = oldDatas[oldDatas.length-1].quoteTime;\r\n\t\t\t\tvar spliceIndex,appendDatas;\r\n\t\t\t\tfor(var i=newDatas.length-1; i>=0; i--) {\r\n\t\t\t\t\tvar curTime = newDatas[i][0];\r\n\t\t\t\t\tif(curTime==oldLatestTime) {\r\n\t\t\t\t\t\tspliceIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(spliceIndex !== void 0) {\r\n\t\t\t\t\tappendDatas = newDatas.slice(spliceIndex,newDatas.length);\r\n\t\t\t\t\tif(!appendDatas.length) {\r\n\t\t\t\t\t\tappendDatas = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn appendDatas;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateTitles: function(titles){\r\n\t\t\tfor(var i=0,cur;cur = this.chartList[i++];) {\r\n\t\t\t\tvar index = i -1;\r\n\t\t\t\tvar symbol = cur.title.title;\r\n\t\t\t\tvar title = titles[symbol];\r\n\t\t\t\tcur.setTitle(title);\r\n\t\t\t\tthis.layoutObj.setTitle(title,index);\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeFullscreenStatus: function(target,e){\r\n\t\t\tif(!this.fullscreenStatus) {\r\n\t\t\t\tthis.fullscreenStatus = true;\r\n\t\t\t\tvar zIndex = 999999;\r\n\t\t\t\tthis.normalSize = {width:this.container.outerWidth(),height:this.container.outerHeight()};\r\n\t\t\t\tthis.container.css({position:'fixed','z-index':zIndex++, top:0, left:0});\r\n\r\n\t\t\t\tvar container = this.container[0];\r\n\t\t\t\tthis.oldParentNode = container.parentNode;\r\n\t\t\t\tdocument.body.appendChild(container);\r\n\t\t\t\tif(this.dpListWrap == document.body) {\r\n\t\t\t\t\tthis.oldzIndex = $(\".lynn-dplist\").css('z-index');\r\n\t\t\t\t\t$('.lynn-dplist,.sp-container').css('z-index',zIndex);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tvar dpListWrap = $(this.dpListWrap);\r\n\t\t\t\t\tthis.oldzIndex = dpListWrap.css('z-index');\r\n\t\t\t\t\tdpListWrap.css('z-index',zIndex);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.resize(true);\r\n\t\t\t\t$(target).html(this.fullscreenOpts.small);\r\n\t\t\t}else {\r\n\t\t\t\tvar container = this.container[0];\r\n\t\t\t\tthis.oldParentNode.appendChild(container);\r\n\t\t\t\tthis.container.css({position:'relative','z-index':'',top:'',left:''});\r\n\r\n\t\t\t\tthis.fullscreenStatus = false;\r\n\t\t\t\tvar width = this.normalSize.width,height = this.normalSize.height;\r\n\t\t\t\tdelete this.normalSize;\r\n\r\n\t\t\t\tif(this.dpListWrap == document.body) {\r\n\t\t\t\t\t$('.lynn-dplist,.sp-container').css('z-index',this.oldzIndex);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$(this.dpListWrap).css('z-index',this.oldzIndex);\r\n\t\t\t\t}\r\n\t\t\t\tdelete this.oldzIndex;\r\n\r\n\t\t\t\tthis.resize({width:width,height:height});\r\n\t\t\t\t$(target).html(this.fullscreenOpts.big);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tresize: function(sizeObj){\r\n\t\t\tvar isChangeTabs = false,width,height;\r\n\t\t\tif(this.fullscreenStatus) {\r\n\t\t\t\twidth = $(window).width();\r\n\t\t\t\theight = $(window).height();\r\n\t\t\t}\r\n\t\t\tvar type = $.type(sizeObj);\r\n\t\t\tif(type=='object'){\r\n\t\t\t\tif(sizeObj.width) {\r\n\t\t\t\t\tif(this.fullscreenStatus) {\r\n\t\t\t\t\t\tthis.normalSize.width = sizeObj.width;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\twidth = sizeObj.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(sizeObj.height) {\r\n\t\t\t\t\tif(this.fullscreenStatus) {\r\n\t\t\t\t\t\tthis.normalSize.height = sizeObj.height;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\theight = sizeObj.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tisChangeTabs = true;\r\n\r\n\t\t\t}else if(type=='boolean') {\r\n\t\t\t\tisChangeTabs = true;\r\n\t\t\t}\r\n\t\t\twidth&&(this.container.outerWidth(width));\r\n\t\t\theight&&(this.container.outerHeight(height));\r\n\r\n\t\t\tif(isChangeTabs) {\r\n\t\t\t\tvar layoutWrapHeight = this.container.outerHeight() - this.toolbarHeight;\r\n\t\t\t\tthis.layoutEle.css({'height':layoutWrapHeight, width:this.container.width()});\r\n\t\t\t\tthis.layoutObj.resize.call(this.layoutObj);\r\n\t\t\t}\r\n\t\t\tfor(var i=0,cur; cur=this.chartList[i++];) {\r\n\t\t\t\tcur.resize.call(cur);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = LynnCharts;\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Lynncharts.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 1\n ** module chunks = 0\n **/","var $ = require('jquery');\r\nvar LynnTabs = require('./LynnTabs');\r\nvar LynnScrollbar = require('./lynnScrollbar');\r\n\r\n/**\r\n * 页面如何显示\r\n * @param {object} opts {\r\n *     container: 哪个元素生成,\r\n *     onError: function('action',status){}\t//操作错误时的回调函数\r\n *     formatTabTpl: function(item){}\t\t//设置tab的html\r\n *     onAdd: function(){}\t\t\t\t\t//添加的回调函数\r\n *     onRemove: function(){}\t\t\t\t//删除回调函数\r\n *     onClick: function(){}\t\t\t\t//选中后的回调函数\r\n *     onZoomIn: function(){}\t\t\t\t//放大后的回调函数\r\n *     onZoomOut: function(){}\t\t\t\t//缩小后的回调函数\r\n *     col:0\t\t\t\t\t\t\t\t//以几列显示，如果为0的话，就多tab显示\r\n *     margin:8\t\t\t\t\t\t\t\t//每个子项目的间隔\r\n *     items: []\t\t\t\t\t\t\t//初始化数据\r\n * }\r\n */\r\n\r\nfunction LynnLayout(opts){\r\n\tthis.container = opts.element||document.body;\r\n\tdelete opts.element;\r\n\tvar defaults = {\r\n\t\tonError: function(){},\r\n\t\tmargin:8,\r\n\t\tcol:0,\r\n\t\titems:[],\r\n\t\tminHeight:240\r\n\t};\r\n\t$.extend(this,defaults,opts);\r\n\tthis.count = 0;\r\n\r\n\tthis.init();\r\n}\r\n\r\nLynnLayout.prototype = {\r\n\tconstructor: LynnLayout,\r\n\tinit: function(){\r\n\t\tthis.width = this.container.width();\r\n\t\tthis.height = this.container.height();\r\n\t\tthis.activeIndex = 0;\r\n\t\tthis.initTabs();\r\n\t\tthis.initItems();\r\n\t\tthis.initEvents();\r\n\r\n\t},\r\n\tinitTabs: function(){\r\n\t\tvar me = this;\r\n\t\tthis.container.css({padding:this.margin}).addClass('lynn-layout');\r\n\t\tvar display=''\r\n\t\tif(this.col!=0) {\r\n\t\t\tdisplay = 'display:none;';\r\n\t\t}\r\n\t\tvar tabControl = $('<div class=\"lynn-layout-tabbar\" style=\"'+display+'top:'+this.margin+'px;left:'+this.margin+'px;right:'+this.margin+'px;\"></div>').appendTo(this.container);\r\n\r\n\t\tvar opts = {\r\n\t\t\tcontainer: tabControl,\r\n\t\t\tonRemoveError: function(error){\r\n\t\t\t\tme.onError.call(this,'remove',error);\r\n\t\t\t},\r\n\t\t\tonAddError: function(error){\r\n\t\t\t\tme.onError.call(this,'add',error);\r\n\t\t\t},\r\n\t\t\tonRemove: function(index){\r\n\t\t\t\tme.removeItem.call(me,index)\r\n\t\t\t},\r\n\t\t\tonClick: function(index){\r\n\t\t\t\tme.clickItem.call(me,index,true);\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.tabControlEle = tabControl;\r\n\t\tif(this.formatTabTpl) {\r\n\t\t\topts.formatItemTpl = this.formatTabTpl;\r\n\t\t}\r\n\t\tif(this.items) {\r\n\t\t\topts.items = this.items;\r\n\t\t}\r\n\t\tthis.tabObj = new LynnTabs(opts);\r\n\t},\r\n\tinitItems: function(){\r\n\t\tthis.itemsWrap = $('<div class=\"lynn-layout-items lynn-scrollbar-content\"></div>').appendTo(this.container);\r\n\t\tvar items = this.items;\r\n\t\tfor(var i=0,len = items.length; i < len; i++) {\r\n\t\t\tthis.addItem(items[i],true);\r\n\t\t}\r\n\t\tthis.changeCol();\r\n\t},\r\n\tinitEvents: function(){\r\n\t\tvar me = this;\r\n\t\tthis.container.on('click','.lynn-layout-item',function(e){\r\n\t\t\tvar target = $(e.target), index = $(this).index();\r\n\t\t\tif(me.placeholder) {\r\n\t\t\t\tindex -=1;\r\n\t\t\t}\r\n\t\t\tif(target.is('.win-close')) {\r\n\t\t\t\tme.tabObj.remove(index);\r\n\t\t\t\tme.removeItem(index);\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\treturn ;\r\n\t\t\t}else if(target.is('.win-big')) {\r\n\t\t\t\tme.zoomIn.call(me,target,index);\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\treturn ;\r\n\t\t\t}else if(target.is('.win-small')) {\r\n\t\t\t\tme.zoomOut.call(me,target,index);\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tme.clickItem.call(me,index);\r\n\t\t})\r\n\t},\r\n\taddItem: function(item,init){\r\n\t\tvar tabAdd;\r\n\t\tif(!init) {\r\n\t\t\ttabAdd = this.tabObj.add(item);\r\n\t\t}\r\n\t\tif(tabAdd!==false) {\r\n\t\t\tvar itemCtrls = '<div class=\"lynn-layout-item-ctrl\">'+\r\n\t\t\t\t'<span class=\"win-small icon\" style=\"display:none;\">&#xe644;</span>'+\r\n\t\t\t\t'<span class=\"win-big icon\">&#xe645;</span>'+\r\n\t\t\t\t'<span class=\"win-close icon\">&#xe636;</span>'+\r\n\t\t\t'</div>';\r\n\t\t\tthis.count +=1;\r\n\t\t\tvar marginTop = this.col==0 ? 0 : ((this.count<=this.col) ? 0 : this.margin);\r\n\t\t\tvar marginLeft = this.col<=1 ? 0 :((this.count%this.col==1) ? 0 : this.margin);\r\n\t\t\tvar itemWrap = $('<div class=\"lynn-layout-item\" style=\"margin-top:'+marginTop+'px;margin-left:'+marginLeft+'px\">'+itemCtrls+'</div>').appendTo(this.itemsWrap);\r\n\t\t\tthis.setLayoutActive();\r\n\t\t\tthis.changeCol();\r\n\t\t\tthis.onAdd&&this.onAdd.call(itemWrap,item);\r\n\t\t}\r\n\t\treturn tabAdd;\r\n\t},\r\n\tgetActiveIndex: function(){\r\n\t\treturn this.activeIndex;\r\n\t},\r\n\tsetLayoutActive: function(index){\r\n\t\tif(index==void 0) {\r\n\t\t\tindex = this.tabObj.activeIndex;\r\n\t\t}else {\r\n\t\t\tif(index==this.activeIndex) return false;\r\n\t\t}\r\n\t\tvar itemCls = '.lynn-layout-item';\r\n\t\tvar item = this.container.find(itemCls+':eq('+index+')');\r\n\t\titem.addClass('active').siblings(itemCls).removeClass('active');\r\n\t\tif(this.col==0) {\r\n\t\t\titem.show().siblings(itemCls).hide();\r\n\t\t}\r\n\t\tthis.activeIndex = index;\r\n\t\tthis.onChangeActive&&this.onChangeActive.call(null,index);\r\n\t\treturn index;\r\n\t},\r\n\tsetActive: function(){\r\n\t\tvar arg = arguments[0];\r\n\t\tvar ret = this.tabObj.setActive(arg);\r\n\t\tif(ret!==false) {\r\n\t\t\tthis.setLayoutActive();\r\n\t\t}\r\n\t\treturn ret;\r\n\t},\r\n\tremoveItem: function(index){\r\n\t\tvar item = this.container.find('.lynn-layout-item:eq('+index+')').remove();\r\n\t\tthis.count-=1;\r\n\t\tthis.setLayoutActive();\r\n\t\tthis.calcSize();\r\n\t\tthis.checkIsOnlyOne();\r\n\t\tthis.onRemove&&this.onRemove.call(null,index)\r\n\t},\r\n\tclickItem: function(index){\r\n\t\tthis.setLayoutActive(index);\r\n\t},\r\n\t//放大\r\n\tzoomIn: function(target,index){\r\n\t\tif(this.placeholder) return ;\r\n\t\tvar curItem = this.container.find('.lynn-layout-item:eq('+index+')');\r\n\t\tthis.zoomItem = curItem;\r\n\r\n\t\tvar style = 'float:left;'+curItem.attr('style');\r\n\t\tvar div = '<div style=\"'+style+'\"></div>';\r\n\r\n\t\tthis.placeholder = $(div).insertBefore(curItem);\r\n\t\t\r\n\t\tcurItem.css({\r\n\t\t\t'position':'absolute',\r\n\t\t \t'z-index':10, \r\n\t\t \t'width': this.width, \r\n\t\t \t'height': this.height,\r\n\t\t \t'margin-left':0,\r\n\t\t \t'margin-top' :0\r\n\t\t });\r\n\t\ttarget.hide().prev().show();\r\n\t\tthis.placeholder.data('target',target.prev());\r\n\t\tthis.placeholder.data('index',index);\r\n\r\n\t\t//滚动条处理\r\n\t\tvar scrollbars = this.scrollbarObj.getScrollbarDoms();\r\n\t\tvar scrollStatus = {};\r\n\t\tfor(var sb in scrollbars) {\r\n\t\t\tscrollStatus[sb] = scrollbars[sb].css('display');\r\n\t\t\tscrollbars[sb].hide();\r\n\t\t}\r\n\r\n\t\tthis.scrollStatus = scrollStatus;\r\n\r\n\t\tthis.onZoomIn && this.onZoomIn.call(target[0],index);\r\n\t},\r\n\t//缩小\r\n\tzoomOut: function(target,index){\r\n\t\tvar marginLeft = this.placeholder.css('margin-left');\r\n\t\tvar marginTop = this.placeholder.css('margin-top');\r\n\t\tvar styles = {\r\n\t\t\t'position': '',\r\n\t\t\t'z-index': '',\r\n\t\t\t'width': this.itemWidth,\r\n\t\t\t'height': this.itemHeight,\r\n\t\t\t'margin-left': marginLeft,\r\n\t\t\t'margin-top' : marginTop\r\n\t\t}\r\n\t\tthis.placeholder.remove();\r\n\t\tthis.placeholder = null;\r\n\t\tthis.zoomItem.css(styles);\r\n\t\ttarget.hide().next().show();\r\n\r\n\t\tvar scrollbars = this.scrollbarObj.getScrollbarDoms();\r\n\t\tvar scrollStatus = this.scrollStatus;\r\n\t\tfor(var sb in scrollbars) {\r\n\t\t\tvar status = scrollStatus[sb]||'none';\r\n\t\t\tscrollbars[sb].css('display',status);\r\n\t\t}\r\n\t\tvar isAuto = arguments[2];\r\n\t\tif(isAuto == false) return false;\r\n\t\tthis.onZoomOut && this.onZoomOut.call(target[0],index);\r\n\t},\r\n\tcalcSize: function(count,col){\r\n\t\tvar count = count||this.count, col = col||this.col;\r\n\t\tthis.width = this.container.width()-1;\r\n\t\tthis.height  = this.container.height();\r\n\t\t\r\n\t\tvar col = col||1;\r\n\t\tthis.itemWidth = Math.floor((this.width-this.margin*(col-1))/col);\r\n\t\t\r\n\t\tvar row = Math.ceil(count/col),height;\r\n\t\tif(this.col !==0) {\r\n\t\t\t height= Math.floor((this.height-this.margin*(row-1))/row);\r\n\t\t}else {\r\n\t\t\theight= this.height;\r\n\t\t}\r\n\r\n\t\tthis.itemHeight = Math.max(height,this.minHeight);\r\n\t\t\r\n\r\n\r\n\t\tthis.container.find('.lynn-layout-item').css({\r\n\t\t\twidth: this.itemWidth,\r\n\t\t\theight: this.itemHeight\r\n\t\t})\r\n\t},\r\n\tresize: function(){\r\n\t\tthis.tabObj.resize();\r\n\t\tthis.calcSize();\r\n\t\tthis.scrollbarResize();\r\n\t},\r\n\tchangeCol: function(col){\r\n\t\tvar me = this;\r\n\t\tvar oldCol = this.col;\r\n\t\tif(typeof col=='number') {\r\n\t\t\tif(col==this.col) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.col = col;\r\n\t\t}\r\n\t\tthis.itemsWrap.removeClass('col_'+oldCol).addClass('col_'+this.col);\r\n\r\n\t\t//如果处于放大状态，要取消放大状态\r\n\t\tif(this.placeholder) {\r\n\t\t\tvar target = this.placeholder.data('target');\r\n\t\t\tconsole.log(target);\r\n\t\t\tvar index = this.placeholder.data('index');\r\n\t\t\tthis.zoomOut(target,index,false)\r\n\t\t}\r\n\r\n\t\tthis.calcSize();\r\n\t\tvar items = this.container.find('.lynn-layout-item');\r\n\t\tif(this.col==0) {\r\n\t\t\tvar activeIndex = this.activeIndex;\r\n\t\t\titems.each(function(i){\r\n\t\t\t\t$(this).css({'margin-top':0,'margin-left':0});\r\n\t\t\t\tif(i==activeIndex) {\r\n\t\t\t\t\t$(this).show();\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$(this).hide();\r\n\t\t\t\t}\r\n\t\t\t\t$(this).find('.lynn-layout-item-ctrl').hide();\r\n\t\t\t})\r\n\t\t\tthis.tabControlEle.show();\r\n\t\t}else {\r\n\t\t\titems.each(function(i){\r\n\t\t\t\tvar index = i+1;\r\n\t\t\t\tvar marginTop = index <=me.col ? 0 : me.margin;\r\n\t\t\t\tvar marginLeft = (index % me.col ==1||me.col==1) ? 0 : me.margin;\r\n\t\t\t\t$(this).css({'margin-left': marginLeft,'margin-top':marginTop}).show();\r\n\t\t\t\t$(this).find('.lynn-layout-item-ctrl').show();\r\n\t\t\t})\r\n\t\t\tthis.tabControlEle.hide();\r\n\t\t}\r\n\t\tthis.scrollbarResize();\r\n\t},\r\n\tcheckIsOnlyOne: function(){\r\n\t\tif(this.count==1) {\r\n\t\t\tthis.container.find('.lynn-layout-item-ctrl').hide();\r\n\t\t}else {\r\n\t\t\tthis.container.find('.lynn-layout-item-ctrl').show();\r\n\t\t}\r\n\t},\r\n\tscrollbarResize: function(){\r\n\t\tif(this.scrollbarObj) {\r\n\t\t\tthis.scrollbarObj.setSize.call(this.scrollbarObj);\r\n\t\t}else {\r\n\t\t\tthis.scrollbarObj = new LynnScrollbar({element:this.container})\r\n\t\t}\r\n\t},\r\n\tsetTitle: function(title,index) {\r\n\t\tthis.tabObj.setTitle.call(this.tabObj,title,index);\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = LynnLayout;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/LynnLayout.js\n ** module id = 2\n ** module chunks = 0\n **/","/*\r\n(function(factory){\r\n\tif(typeof define==='function' && define.amd){\r\n\t\tdefine(['jquery'],factory);\r\n\t}else if(typeof exports=='object'&& typeof module =='object') {\r\n\t\tmodule.exports = factory(require('jquery'));\r\n\t}else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n})(function($,undefined){*/\r\n\r\n\tvar $ = require('jquery');\r\n\t/**\r\n\t * Tab切换\r\n\t * @param {object} opts [配置信息]\r\n\t * {\r\n\t *  \t\r\n\t *  \tcontainer: 被包含的element,\r\n\t *  \tminItemWidth: 200,\r\n\t *  \titems: [\t//这里面的格式可以自己定义，与formatItemTpl结合，最少要有一个title,每个tab所需要数据\r\n\t *  \t\t{title:xxx,\r\n\t *  \t\tsellPrice:buyPrice,\r\n\t *  \t\t}\t\r\n\t *  \t]\r\n\t *  \tshowRemove: true\t\t\t\t//是否显示删除图标\r\n\t *\r\n\t * \t\tformatItemTpl: function(item){}    \t//每个tab的展示形式\r\n\t *  \tonRemove:function(item,parent){}\t\t//点击删除后的回调函数\r\n\t *  \tonRemoveError: function(){}\r\n\t *  \tonClick: function(index){}\t\t//点击item时的回调函数\r\n\t *  \tonAdd: function(item)\t\t\t//添加item完成后的回调函数  \r\n\t *  \tonAddError: function(){}  \r\n\t * }\r\n\t */\r\n\t\r\n\tfunction LynnTabs(opts){\r\n\t\tvar defaults = {\r\n\t\t\tcontainer: document.body,\r\n\t\t\titems: [],\r\n\t\t\tshowRemove: true,\r\n\t\t\tformatItemTpl: function(item) {\r\n\t\t\t\treturn '<span>'+item.title+'</span>';\r\n\t\t\t},\r\n\t\t\tminItemWidth:200,\r\n\t\t\tminTabCount:1,\r\n\t\t\tmaxTabCount: 8,\r\n\t\t}\r\n\t\t$.extend(this,defaults,opts);\r\n\t\tthis.init();\r\n\r\n\t}\r\n\r\n\tLynnTabs.prototype = {\r\n\t\tconstructor: LynnTabs,\r\n\t\tinit: function(){\r\n\t\t\tvar me = this;\r\n\t\t\tthis.container = $(this.container);\r\n\t\t\tthis.container.addClass(LynnTabs.opts.containerCls);\r\n\t\t\tthis.wrap = $('<div class=\"lynn-tab-wrap\"></div>').appendTo(this.container);\r\n\t\t\tthis.formatItems();\r\n\t\t\tthis.computedWidth();\r\n\t\t\tvar tabCls = LynnTabs.opts.tabCls;\r\n\t\t\tthis.container.on('click','.'+tabCls, function(e){\r\n\t\t\t\tvar itemData = this.item;\r\n\t\t\t\tvar target = e.target;\r\n\t\t\t\tvar index = $(this).index();\r\n\t\t\t\tif(target.className == LynnTabs.opts.removeIcon) {\r\n\t\t\t\t\tvar removed = me.remove(index);\r\n\t\t\t\t\tremoved&&me.onRemove && me.onRemove.call(target,index)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ret = me.setActive(index,this);\r\n\t\t\t\t\tif(ret!==false) {\r\n\t\t\t\t\t\tme.onClick && me.onClick.call(target,index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tformatItems: function(){\r\n\t\t\tvar items = this.items;\r\n\t\t\tif(!items.length) return false;\r\n \t\t\tvar frag  = document.createDocumentFragment();\r\n\t\t\tfor(var i=0,len = items.length;i<len; i++) {\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tvar ele = this.formatItem(item);\r\n\t\t\t\tif(item.active&&this.activeIndex==void 0) {\r\n\t\t\t\t\tthis.activeIndex = i;\r\n\t\t\t\t\t$(ele).addClass('active');\r\n\t\t\t\t}\r\n\t\t\t\titems[i].ele = ele;\r\n\t\t\t\tfrag.appendChild(ele);\r\n\t\t\t}\r\n\t\t\tif(this.activeIndex==void 0) {\r\n\t\t\t\tthis.activeIndex = 0;\r\n\t\t\t\t$(this.items[0].ele).addClass('active');\r\n\t\t\t}\r\n\t\t\tthis.wrap.append(frag);\r\n\t\t\tthis.checkIsOnlyOne();\r\n\t\t},\r\n\t\tformatItem: function(item){\r\n\t\t\tvar itemTpl = this.formatItemTpl(item)||'';\r\n\t\t\titemTpl = '<div class=\"lynn-item\">'+itemTpl+'</div>';\r\n\t\t\tif(this.showRemove) {\r\n\t\t\t\titemTpl += '<i class=\"'+LynnTabs.opts.removeIcon+'\"></i>';\r\n\t\t\t}\r\n\t\t\tvar tpl = '<a href=\"javascript:void(0)\" class=\"'+LynnTabs.opts.tabCls+'\">'+itemTpl+'</a>';\r\n\t\t\tvar ele = $(tpl)[0];\r\n\t\t\treturn ele;\r\n\t\t},\r\n\t\tindexOf: function(title){\r\n\t\t\tvar items = this.items,exist = -1;\r\n\t\t\tvar len = items.length;\r\n\t\t\tfor(var i=0; i<len; i++) {\r\n\t\t\t\tvar currTitle = items[i].title;\r\n\t\t\t\tif(currTitle==title) {\r\n\t\t\t\t\texist = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif(i<len-1) {\r\n\t\t\t\t\tlen = len-1;\r\n\t\t\t\t\tvar lastTitle = items[len].title;\r\n\t\t\t\t\tif(lastTitle==title) {\r\n\t\t\t\t\t\texist = len;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn exist;\r\n\t\t},\r\n\t\tadd: function(item){\r\n\t\t\tif(!item.title) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tvar len = this.items.length;\r\n\t\t\tif(len == this.maxTabCount) {\r\n\t\t\t\tthis.onAddError&&this.onAddError.call(this);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar indexOf = this.indexOf(item.title);\r\n\t\t\tif(indexOf==-1) {\r\n\t\t\t\tvar ele = this.formatItem(item);\r\n\t\t\t\tif(item.active) {\r\n\t\t\t\t\tif(this.activeIndex!==void 0) {\r\n\t\t\t\t\t\tvar activeEle = this.items[this.activeIndex].ele;\r\n\t\t\t\t\t\t$(activeEle).removeClass('active');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(ele).addClass('active');\r\n\t\t\t\t\tthis.activeIndex = len;\r\n\t\t\t\t}\r\n\t\t\t\titem.ele = ele;\r\n\t\t\t\tthis.items.push(item);\r\n\t\t\t\tthis.wrap.append(ele);\r\n\t\t\t\tthis.computedWidth();\r\n\t\t\t\tthis.checkIsOnlyOne();\r\n\t\t\t\tthis.onAdd&&this.onAdd.call(this,item);\r\n\t\t\t}else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tremove: function(){\r\n\t\t\tif(this.items.length==this.minTabCount) {\r\n\t\t\t\tthis.onRemoveError&&this.onRemoveError.call(this);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar arg = arguments[0];\r\n\t\t\tvar type = typeof arg,indexOf;\r\n\t\t\tswitch(type) {\r\n\t\t\t\tcase 'number':\r\n\t\t\t\t\tindexOf = arg;\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tindexOf = this.indexOf(arg);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'object':\r\n\t\t\t\t\tvar v = arg.title;\r\n\t\t\t\t\tindexOf = this.indexOf(v);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(indexOf==void 0||indexOf==-1) {return false;}\r\n\t\t\t\r\n\t\t\tvar item = this.items[indexOf];\r\n\t\t\t$(item.ele).remove();\r\n\t\t\tthis.items.splice(indexOf,1);\r\n\t\t\tif(indexOf==this.activeIndex) {\r\n\t\t\t\tvar maxIndex = this.items.length;\r\n\t\t\t\tif(indexOf==maxIndex) {\r\n\t\t\t\t\tthis.activeIndex = maxIndex -1;\r\n\t\t\t\t}\r\n\t\t\t\tvar activeEle = this.items[this.activeIndex].ele;\r\n\t\t\t\t$(activeEle).addClass('active');\r\n\t\t\t}\r\n\r\n\t\t\tthis.checkIsOnlyOne();\r\n\t\t\tthis.computedWidth();\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tcomputedWidth: function(){\r\n\t\t\tvar me = this;\r\n\t\t\tvar maxWidth  = this.container.width();\r\n\t\t\tvar tabs = this.wrap.find('.'+LynnTabs.opts.tabCls);\r\n\t\t\tvar totalW = 0,activeWidth=0,count=0;\r\n\t\t\ttabs.each(function(i){\r\n\t\t\t\tcount+=1;\r\n\t\t\t\tvar width = $(this).data('w');\r\n\t\t\t\tif(!width) {\r\n\t\t\t\t\twidth = $(this).outerWidth();\r\n\t\t\t\t\t$(this).data('w',width);\r\n\t\t\t\t}\r\n\t\t\t\tif(i==me.activeIndex) {\r\n\t\t\t\t\tactiveWidth = width;\r\n\t\t\t\t\tcount-=1;\r\n\t\t\t\t}\r\n\t\t\t\ttotalW +=width;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tif(totalW > maxWidth) {\r\n\t\t\t\tvar avgWidth = Math.floor((maxWidth - activeWidth)/count);\r\n\t\t\t\tvar activeWidth = maxWidth - avgWidth*count;\r\n\t\t\t\ttabs.each(function(i){\r\n\t\t\t\t\tvar width = i!==me.activeIndex ? avgWidth: activeWidth;\r\n\t\t\t\t\tthis.style.width = width+\"px\";\r\n\t\t\t\t})\r\n\t\t\t\tthis.zoom = true;\r\n\t\t\t}else {\r\n\t\t\t\tif(this.zoom!==true) {return false;}\r\n\t\t\t\ttabs.each(function(){\r\n\t\t\t\t\tthis.style.width = \"\";\r\n\t\t\t\t})\r\n\t\t\t\tthis.zoom = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetActive: function(index,target){\r\n\t\t\tvar args = arguments,index;\r\n\t\t\tif(typeof args[0] =='number') {\r\n\t\t\t\tindex = args[0];\r\n\t\t\t\tif(index<0||index>this.items.length) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}else if(typeof args[0]=='string') {\r\n\t\t\t\tindex = this.indexOf(args[0]);\r\n\t\t\t}else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar cbFn = args[1]&&$.type(args[1])=='function' ? args[1] : null;\r\n\t\t\tif(index !== void 0 && index!==-1) {\r\n\t\t\t\tvar item = this.items[index];\r\n\t\t\t\tele = item.ele;\r\n\t\t\t\tif(index==this.activeIndex) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tvar activeEle = this.items[this.activeIndex].ele;\r\n\t\t\t\t\t$(activeEle).removeClass('active');\r\n\t\t\t\t\tthis.activeIndex = index;\r\n\t\t\t\t\t$(ele).addClass('active');\r\n\t\t\t\t\tthis.computedWidth();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetTitle: function(title,index) {\r\n\t\t\tvar itemTpl = this.formatItemTpl(title) ||'';\r\n\t\t\tvar item = $.extend(this.items[index],title);\r\n\t\t\tvar tabEle = this.wrap.find('.'+LynnTabs.opts.tabCls+\":eq(\"+index+\")\");\r\n\t\t\ttabEle.find('.lynn-item').html(itemTpl);\r\n\t\t\ttabEle[0].item = item;\r\n\t\t},\r\n\t\tcheckIsOnlyOne: function(){\r\n\t\t\tvar len = this.items.length;\r\n\t\t\tvar ele = this.items[0].ele;\r\n\t\t\tif(len==1) {\r\n\t\t\t\t$(ele).find('.icon-close').hide();\r\n\t\t\t}else {\r\n\t\t\t\t$(ele).find('.icon-close').show();\r\n\t\t\t}\r\n\t\t},\r\n\t\tresize: function(){\r\n\t\t\tthis.computedWidth();\r\n\t\t}\r\n\t}\r\n\r\n\tLynnTabs.opts = {\r\n\t\tcontainerCls: 'lynn-tabs',\r\n\t\ttabCls:'lynn-tab',\r\n\t\tremoveIcon:'icon icon-close',\r\n\t}\r\n\r\n\tmodule.exports = LynnTabs;\r\n/*})*/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/LynnTabs.js\n ** module id = 3\n ** module chunks = 0\n **/","var $ = require('jquery');\r\n\r\n/**\r\n * [LynnScrollbar description]\r\n * @param {[object]} opts {\r\n *   element:��Ҫscrollbar��Ԫ��\r\n * }\r\n */\r\nvar noop = function(){};\r\nvar defaults = {\r\n\tonScroll:noop,\r\n\tonUpdate:noop,\r\n\tduration:200,\r\n\tdir:'y',\r\n}\r\nvar namespace = {index:0,name:'scrollbar'};\r\nfunction LynnScrollbar(opts){\r\n\tif(!opts.element) return false;\r\n\t$.extend(this,defaults,opts);\r\n\tthis.element = $(this.element);\r\n\tthis.element.addClass(LynnScrollbar.defaults.pluginCls);\r\n\tthis.contentWrap = this.element.find('.'+LynnScrollbar.defaults.contentWrapCls) || this.element.find(':first-child').addClass(LynnScrollbar.defaults.contentWrapCls);\r\n\tthis.namespace = '.' + namespace.name + \"_\" + namespace.index++;\r\n\tthis.init();\r\n\r\n}\r\n\r\nLynnScrollbar.prototype = {\r\n\tinit: function(){\r\n\t\tthis.initScrollX();\r\n\t\tthis.initScrollY();\r\n\t\tthis.setSize();\r\n\t},\r\n\tinitScrollX: function(){\r\n\t\tif(this.dir.indexOf('x')==-1) return false;\r\n\t\tvar me = this;\r\n\t\tvar position = this.contentWrap.position();\r\n\t\tvar tpl = [\r\n\t\t\t'<div class=\"lynn-scrollbar-element scroll-x\" style=\"bottom:0;left:'+position.left+'px;display:none\">',\r\n\t\t\t'<div class=\"lynn-scrollbar-track\"></div>',\r\n\t\t\t'<a href=\"javascript:void(0)\" class=\"lynn-scrollbar-thumb\"></a>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\tthis.scrollxWrap = $(tpl).appendTo(this.element);\r\n\r\n\t\tthis.scrollxWrap.find('.lynn-scrollbar-thumb').on('mousedown'+me.namespace,function(e){\r\n\t\t\tvar thumb = $(this);\r\n\t\t\tvar x= e.pageX;\r\n\t\t\tvar left = thumb.position().left, maxTop = me.clientWidth - $(this).height();\r\n\t\t\tvar mouseMoveFn = throttle(function(e){\r\n\t\t\t\tvar diff = e.pageX - x;\r\n\t\t\t\tvar changeLeft = left+diff;\r\n\t\t\t\tchangeLeft = Math.max(changeLeft,0);\r\n\t\t\t\tchangeLeft = Math.min(changeLeft,maxLeft);\r\n\t\t\t\tif(changeLeft!=Left) {\r\n\t\t\t\t\tvar scrollLeft = Math.ceil(changeLeft*me.scrollWidth/me.clientWidth);\r\n\t\t\t\t\tthumb.css('left',changeLeft);\r\n\t\t\t\t\tme.contentWrap.scrollLeft(scrollLeft);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$(document).on('mousemove' + me.namespace, mouseMoveFn);\r\n\t\t\treturn me.handleMouseDown(null,e);\r\n\t\t\t\r\n\t\t})\r\n\t},\r\n\tinitScrollY: function(){\r\n\t\tif(this.dir.indexOf('y')==-1) return false;\r\n\t\tvar me = this;\r\n\t\tvar position = this.contentWrap.position();\r\n\t\tvar tpl = [\r\n\t\t\t'<div class=\"lynn-scrollbar-element scroll-y\" style=\"top:'+position.top+'px;right:0;display:none\">',\r\n\t\t\t'<div class=\"lynn-scrollbar-track\"></div>',\r\n\t\t\t'<a  href=\"javascript:void(0)\" class=\"lynn-scrollbar-thumb\"></a>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\t\tthis.scrollyWrap = $(tpl).appendTo(this.element);\r\n\r\n\t\tthis.scrollyWrap.find('.lynn-scrollbar-thumb').on('mousedown'+me.namespace,function(e){\r\n\t\t\tvar thumb = $(this);\r\n\t\t\tvar y = e.pageY;\r\n\t\t\tvar top = thumb.position().top, maxTop = me.clientHeight - $(this).height();\r\n\t\t\tvar i=0;\r\n\t\t\tvar mouseMoveFn = throttle(function(e){\r\n\t\t\t\tvar diff = e.pageY - y;\r\n\t\t\t\tvar changeTop = top+diff;\r\n\t\t\t\tchangeTop = Math.max(changeTop,0);\r\n\t\t\t\tchangeTop = Math.min(changeTop,maxTop);\r\n\t\t\t\tvar scrollTop;\r\n\t\t\t\tif(changeTop==maxTop) {\r\n\t\t\t\t\tscrollTop = me.scrollHeight - me.clientHeight;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tscrollTop = Math.ceil(changeTop*me.scrollHeight/me.clientHeight);\r\n\t\t\t\t}\r\n\t\t\t\tthumb.css('top',changeTop);\r\n\t\t\t\tme.contentWrap.scrollTop(scrollTop);\r\n\t\t\t},20)\r\n\t\t\t$(document).on('mousemove' + me.namespace, mouseMoveFn)\r\n\t\t\t\r\n\t\t\treturn me.handleMouseDown(null,e);\r\n\t\t\t\r\n\t\t})\r\n\t},\r\n\tgetScrollbarDoms: function(){\r\n\t\tvar eles = {};\r\n\t\tif(this.scrollyWrap) {\r\n\t\t\teles.y = this.scrollyWrap\r\n\t\t}\r\n\t\tif(this.scrollxWrap) {\r\n\t\t\teles.x = this.scrollxWrap\r\n\t\t}\r\n\t\treturn eles;\r\n\t},\r\n\thandleMouseDown: function(callback,event){\r\n\t\tvar me = this, namespace = this.namespace;\r\n\t\twindow.mouseMoveLocked = true;\r\n\t\t$('body').on('selectstart'+namespace,function(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t})\r\n\t\t$(document).on('mouseup'+namespace,function(event){\r\n\t\t\tdelete window.mouseMoveLocked\r\n\t\t\t$(document).add('body').off(namespace);\r\n\t\t\tcallback&&callback();\r\n\t\t})\r\n\r\n\t\tevent&&event.preventDefault();\r\n\t\treturn false;\r\n\t},\r\n\r\n\tsetSize: function(){\r\n\t\tvar me = this;\r\n\t\tsetTimeout(function(){\r\n\t\t\tresize.call(me);\r\n\t\t},2)\r\n\t\tfunction resize(){\r\n\t\t\tif(this.scrollyWrap) {\r\n\t\t\t\tvar scrollHeight = this.contentWrap.prop('scrollHeight');\r\n\t\t\t\tvar clientHeight = this.contentWrap.outerHeight();\r\n\t\t\t\tif(clientHeight < scrollHeight-5) {\r\n\t\t\t\t\tthis.scrollHeight = scrollHeight;\r\n\t\t\t\t\tthis.clientHeight = clientHeight;\r\n\r\n\t\t\t\t\t//�����߶�\r\n\t\t\t\t\tvar thumbHeight = Math.ceil((clientHeight*clientHeight)/scrollHeight);\r\n\t\t\t\t\t//����scrollTopֵ\r\n\t\t\t\t\tvar scrollTop = this.contentWrap.scrollTop();\r\n\t\t\t\t\tvar top = Math.ceil(scrollTop*thumbHeight/scrollHeight);\r\n\t\t\t\t\tthis.scrollyWrap.css({height:clientHeight}).find('.lynn-scrollbar-thumb').css({height:thumbHeight,top:top});\r\n\t\t\t\t\tthis.scrollyWrap.show();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.scrollyWrap.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif(this.scrollxWrap) {\r\n\t\t\t\tvar scrollWidth = this.contentWrap.prop('scrollWidth');\r\n\t\t\t\tvar clientWidth = this.contentWrap.outerWidth();\r\n\r\n\t\t\t\tif(clientWidth <scrollWidth-5) {\r\n\t\t\t\t\tthis.scrollWidth = scrollWidth;\r\n\t\t\t\t\tthis.clientWidth = clientWidth;\r\n\r\n\t\t\t\t\tvar thumbWidth = (clientWidth*clientWidth)/scrollWidth;\r\n\t\t\t\t\tvar scrollLeft = this.contentWrap.scrollLeft();\r\n\t\t\t\t\tvar left = Math.ceil(scrollLeft*thumbWidth/scrollWidth);\r\n\t\t\t\t\tthis.scrollxWrap.width(thumbWidth).find('.lynn-scrollbar-thumb').css({width:thumbWidth,top:top});\r\n\t\t\t\t\tthis.scrollxWrap.show();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.scrollxWrap.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t},\r\n}\r\n\r\nLynnScrollbar.defaults = {\r\n\tpluginCls:'lynn-scrollbar',\r\n\tcontentWrapCls: 'lynn-scrollbar-content',\r\n}\r\n\r\nfunction throttle(fn,delay) {\r\n    var timer = null;\r\n    var t_start;\r\n    delay = delay||200;\r\n\r\n    return function() {\r\n        var context = this,t_curr = +new Date();\r\n        if(!t_start) {\r\n            t_start = t_curr;\r\n        }\r\n        var args = arguments;\r\n        if(t_curr - t_start <delay) {\r\n            clearTimeout(timer);\r\n            timer = setTimeout(function(){\r\n                fn.apply(context,args);\r\n            },delay)\r\n        }else {\r\n            fn.apply(context,args);\r\n            t_start = t_curr;\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nmodule.exports = LynnScrollbar;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/lynnScrollbar.js\n ** module id = 4\n ** module chunks = 0\n **/","var $ = require('jquery');\r\n/**\r\n * [LynnSpinner description]\r\n * @param {[type]} input [input元素]\r\n * @param {[type]} opts  {\r\n *  min: 最小值\r\n *  step: 每次改变时候改变多少\r\n *  max: 最大值\r\n * }\r\n */\r\nfunction LynnSpinner(input,opts){\r\n\tthis.textField = $(input);\r\n\tthis.opts = $.extend({\r\n\t\tmin:1,\r\n\t\tstep:1,\r\n\t\tmax:Infinity\r\n\t},opts)\r\n\r\n\tthis.init();\r\n\r\n}\r\n\r\nLynnSpinner.prototype = {\r\n\tconstructor: LynnSpinner,\r\n\tinit: function(){\r\n\t\tif(!this.textField) {\r\n\t\t\tthrow new Error('没给input')\r\n\t\t}\r\n\t\tvar container = $('<div class=\"lynn-spinner\"></div>');\r\n\t\tthis.textField.wrap(container);\r\n\t\tvar btns = $('<span class=\"spinner-btn\"><a href=\"javascritp:void(0);\" class=\"increase\"><i class=\"tgl-up\"></i></a><a href=\"javascritp:void(0);\" class=\"decrease\"><i class=\"tgl-down\"></i></a>').insertAfter(this.textField);\r\n\t\t\r\n\t\tthis.textField.val(this.opts.min).addClass('spinner-input');\r\n\r\n\t\tvar step = this.opts.step;\r\n\t\tvar dotIndex = (step+\"\").indexOf('.');\r\n\t\tthis.baseNum = 1;\r\n\t\tif(dotIndex!==-1) {\r\n\t\t\tvar dotLength = (step+\"\").length - dotIndex -1;\r\n\t\t\tthis.baseNum = Math.pow(10,dotLength*1);\r\n\t\t}\r\n\r\n\t\tvar me  = this;\r\n\t\tthis.textField.on('keyup',function(){\r\n\t\t\tvar val = $(this).val();\r\n\t\t\tvar v = me.valueChange.call(me,val);\r\n\t\t\t$(this).val(v);\r\n\t\t\t$(this).focus();\r\n\t\t})\r\n\t\t\r\n\t\tthis.increaseBtn = btns.find('.increase').on('click',function(e){\r\n\t\t\tvar ret = me.changeValue.call(me,1);\r\n\t\t\tif(ret){\r\n\t\t\t\tme.textField.focus();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tthis.decreaseBtn = btns.find('.decrease').on('click',function(e){\r\n\t\t\tvar ret =me.changeValue.call(me,-1);\r\n\t\t\tif(ret){\r\n\t\t\t\tme.textField.focus();\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t},\r\n\tgetVal: function(){\r\n\t\treturn parseFloat(this.textField.val())||this.opts.min;\r\n\t},\r\n\tsetVal: function(val){\r\n\t\tvar v = this.valueChange(val);\r\n\t\tthis.textField.val(v);\r\n\t},\r\n\tchangeValue: function(delta){\r\n\t\tvar value = this.getVal(),step = this.opts.step, min=this.opts.min, max = this.opts.max;\r\n\t\tif(delta<0&&value <= min) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(delta>0&&value >=max) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvalue = Math.floor(value*this.baseNum);//1.11*100==111.000000000001\r\n\t\tvar changeValue = delta*step*this.baseNum;\r\n\t\tvar ret = (value+changeValue)/this.baseNum;\r\n\t\tif(ret>max) {\r\n\t\t\tret = max\r\n\t\t}\r\n\t\tif(ret<min) {\r\n\t\t\tret = min\r\n\t\t}\r\n\t\tthis.textField.val(ret);\r\n\t\treturn ret;\r\n\t},\r\n\tvalueChange: function(v){\r\n\t\tvar v =v.toString();\r\n\t\tvar opts = this.opts,min = opts.min, max = opts.max;\r\n\t\tif(v.length==0) {\r\n\t\t\treturn min;\r\n\t\t}\r\n\t\tvar reg = /^\\d+$/;\r\n\t\tif(this.baseNum!=1) {\r\n\t\t\treg = /^(-?\\d+)(\\.\\d*|\\d+)$/;\r\n\t\t}\r\n\t\tif(!reg.test(v)){\r\n\t\t\treturn parseFloat(v);\r\n\t\t}\r\n\t\tif(v < min) {\r\n\t\t\treturn min;\r\n\t\t}\r\n\t\tif(v > max) {\r\n\t\t\treturn max\r\n\t\t}\r\n\t\tvar dotIndex = v.indexOf('.');\r\n\t\tif(this.baseNum==1||dotIndex==v.length-1){\r\n\t\t\treturn v;\r\n\t\t}else {\r\n\t\t\treturn Math.round(v*this.baseNum)/this.baseNum;\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\n\r\nmodule.exports = LynnSpinner;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/lynnSpinner.js\n ** module id = 5\n ** module chunks = 0\n **/","var $ = require('jquery');\r\n/**\r\n * opt{\r\n * \t\tlabel: 'string' Or function(this.value)\r\n * \t\tvalue: 'string' Or [],\r\n * \t\tshowGroup:true,\t\t\t\t\t\t\t\t\t\t//是否显示group，目前还没写样式\r\n * \t\tlistCls:''\t\t\t\t\t\t\t\t\t\t\t//自定义当前下拉列表的class名称\r\n * \t\titems: string [指下拉出现的元素的id]\t\t\t\t//生成下拉列表的数据\r\n * \t\t\t   Array [ \t//生成item的datas\r\n * \t\t\t   \t\t{value:1,label:'这时是1',active:true,group:'default'},\r\n * \t\t\t   \t\t{value:1,label:'这里是2',group:2},\r\n * \t\t\t   \t\t\t\r\n * \t\t\t   \t\t{value:2,label:'这里是2',active:false}\r\n * \t\t\t   ]\r\n * \t\t\t   object {\r\n * \t\t\t   \t\tdefault:[{...},{....},{....}]\r\n * \t\t\t   }\r\n * \t     formatItemTpl: function({value:1,label:'这时是1',active:true}){return tpl}\t//格式化item的展现形式,\r\n * \t     itemClick: function(itemEle,item,e.target){}\t\t\t\t\t\t\t\t//当选项点击时的回调函数\r\n * \t     multiple: true \t//多选\r\n * \t     width:100,\t\t\t//下拉列表的宽度\r\n * \t     labelWidth:80\t\t//上面label宽度\r\n * \t     footer:[\r\n * \t     \t{\r\n\t * \t     \tplugin:LynnSpinner,\t\t\t\t\t\t//插件类名\r\n\t * \t     \tname:xxx, \t\t\t\t\t\t\t\t//如果有name，可以在this.plugins[xx]获取到这个值\r\n\t * \t     \ttpl:'<input type=\"text\"></input>'\t\t//对应的html\r\n\t * \t     \toptions: {\t\t\t\t\t\t\t\t//插件配置\r\n\t * \t     \t\tmin:1,max:250,step:1\r\n\t * \t     \t}\r\n * \t     \t},\r\n * \t     \t{\r\n * \t     \t\ttpl:'<button class=\"addBtn\">添加</button>',\r\n * \t     \t\tonClick:function(){}\t\t\t\t\t//如果需要click，就需要填这个\r\n * \t     \t}\r\n * \t     ],\r\n * \t     onAdd:function(){}\r\n * \t     \t\r\n * \t     \r\n * }\r\n */\r\nfunction LynnDropDown (wrap,opts){\r\n\tif(!wrap || !opts.label) {\r\n\t\treturn false;\r\n\t}\r\n\tthis.wrap = $(wrap);\r\n\t$.extend(this,{\r\n\t\twidth:200,\r\n\t\theight: 150\r\n\t},opts);\r\n\tvar dpListWrap = opts.dpListWrap || document.body;\r\n\tthis.dpListWrap = $(dpListWrap);\r\n\tthis.open  = false;\r\n\tthis.groups = {};\r\n\tthis.init();\r\n}\r\n\r\n\r\nLynnDropDown.prototype = {\r\n\tconstructor: LynnDropDown,\r\n\tinit: function(){\r\n\t\tvar me = this;\r\n\t\tthis.plugins = {};\r\n\t\tthis.wrap.addClass('lynn-dropdown');\r\n\t\tvar width=this.labelWidth ? 'style=\"width:'+this.labelWidth+'px\"' :'';\r\n\t\t$('<div class=\"dp-label\" '+width+'></div><a href=\"javascript:;\" class=\"dp-toggle\"><i class=\"tgl-up\"></i></a>').appendTo(this.wrap);\r\n\t\tthis.labelEle = this.wrap.find('.dp-label');\r\n\t\tthis.toggleEle = this.wrap.find('.dp-toggle');\r\n\t\tthis.initdpListEle();\r\n\t\tthis.setLabel();\r\n\t\tthis.initEvents();\r\n\t\tthis.initFooter();\r\n\t\tLynnDropDown.default.list.push(this);\r\n\r\n\t},\r\n\r\n\tinitdpListEle: function(){\r\n\t\tvar items = this.items;\r\n\t\tvar type = $.type(items);\r\n\t\tswitch(type) {\r\n\t\t\tcase 'string':\r\n\t\t\t\tthis.dpListEle = $('#'+items).addClass(LynnDropDown.default.dpListCls).hide();\r\n\t\t\t\tthis.getValueFromHtml();\r\n\t\t\t\tthis.dpListEle.remove().appendTo(this.dpListWrap);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'array':\r\n\t\t\t\tvar ele = document.createElement('div');\r\n\t\t\t\tele.style.width = this.width+\"px\";\r\n\t\t\t\tele.style.display = 'none';\r\n\t\t\t\tele.className = LynnDropDown.default.dpListCls;\r\n\t\t\t\tvar frag = this.initArrayItems(this.items);\r\n\t\t\t\tele.appendChild(frag);\r\n\t\t\t\tthis.dpListEle = $(ele);\r\n\t\t\t\tthis.dpListWrap.append(this.dpListEle);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif(!this.dpListEle) {\r\n\t\t\tthrow new Error('没有生成下拉列表，请检查配置是否正确');\r\n\t\t}\r\n\t\tthis.dpListEle.addClass(this.listCls);\r\n\t},\r\n\r\n\tgetValueFromHtml: function(){\r\n\t\tvar a = this.dpListEle.children('.lynn-dpitem');\r\n\t\tvar me = this;\r\n\t\tvar items = {}\r\n\t\ta.each(function(i,v){\r\n\t\t\tvar value = $(this).data('v')||$(this).html();\r\n\t\t\tvar group = $(this).data('group')||'default';\r\n\t\t\tvar isActive = $(this).hasClass('active');\r\n\t\t\tif(!items[group]) {\r\n\t\t\t\titems[group] = [];\r\n\t\t\t}\r\n\r\n\t\t\tvar item = {value:value,label:$(this).html(),active: isActive, group:group};\r\n\t\t\tthis.item = item;\r\n\t\t\titem.ele = this;\r\n\t\t\titems[group].push(item);\r\n\t\t\tthis.href=\"javascript:;\"\r\n\t\t\tif(isActive) {\r\n\t\t\t\tif(me.multiple) {\r\n\t\t\t\t\tme.activedEle.push(this);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tme.activedEle = this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tinitArrayItems: function(items) {\r\n\t\tvar groups = {};\r\n\t\tfor(var i=0,cur;cur = items[i++];) {\r\n\t\t\tif(!cur.group) cur.group = 'default';\r\n\t\t\tif(!groups[cur.group]) {\r\n\t\t\t\tgroups[cur.group] = [];\r\n\t\t\t}\r\n\t\t\tcur.ele = this.getItemEle(cur);\r\n\t\t\tgroups[cur.group].push(cur);\r\n\t\t}\r\n\t\tfor(var g in groups) {\r\n\t\t\tgroups[g] = groups[g].sort(function(a,b){\r\n\t\t\t\tvar a = parseInt(a.value),b = parseInt(b.value);\r\n\t\t\t\tif(!isNaN(a)&&!isNaN(b)) {\r\n\t\t\t\t\treturn a-b;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar frag = this.initObjectItems(groups);\r\n\t\treturn frag;\r\n\t},\r\n\tinitObjectItems: function(items) {\r\n\t\tthis.items = items;\r\n\t\tthis.count=0,groupIndex=0, frag = document.createDocumentFragment();\r\n\t\tfor(var g in items) {\r\n\t\t\tif(groupIndex > 0) {\r\n\t\t\t\tvar span = this.getGroupEel(g);\r\n\t\t\t\tfrag.appendChild(span);\r\n\t\t\t}\r\n\r\n\t\t\tfor(var j=0,e;e=items[g][j++];) {\r\n\t\t\t\tfrag.appendChild(e.ele);\r\n\t\t\t\tthis.count++;\r\n\t\t\t}\r\n\t\t\tgroupIndex++;\r\n\t\t}\r\n\r\n\t\tif(this.activedEle) {\r\n\t\t\tvar list  = this.activedEle;\r\n\t\t\tif(!this.multiple) {\r\n\t\t\t\t$(list).addClass('active');\r\n\t\t\t}else {\r\n\t\t\t\tfor(var i=0,len = list.length;i<len;i++) {\r\n\t\t\t\t\t$(list[i]).addClass('active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn frag;\r\n\t},\r\n\r\n\tgetGroupEel: function(groupName){\r\n\t\tvar span = document.createElement('span');\r\n\t\tspan.className=\"separator\";\r\n\t\tspan.setAttribute('data-group',groupName);\r\n\t\treturn span;\r\n\t},\r\n\r\n\tgetItemEle: function(item) {\r\n\t\tvar tpl = '';\r\n\t\tif($.type(this.formatItemTpl)=='function') {\r\n\t\t\ttpl = this.formatItemTpl(item);\r\n\t\t}else {\r\n\t\t\tvar check = '';\r\n\t\t\tif(this.multiple) {\r\n\t\t\t\tvar checked = '';\r\n\t\t\t\tif(item.active){\r\n\t\t\t\t\tchecked = 'checked=\"checked\"';\r\n\t\t\t\t}\r\n\t\t\t\tcheck = '<input type=\"checkbox\" class=\"lynn-check\" '+checked+'></input>'\r\n\t\t\t}\r\n\t\t\tvar del = '';\r\n\t\t\tif(item.canDel) {\r\n\t\t\t\tdel = '<i class=\"icon icon-recycle\"></i>';\r\n\t\t\t}\r\n\t\t\ttpl = '<a href=\"javascript:;\">'+check+item.label+del+'</a>';\r\n\t\t}\r\n\t\tvar ele = $(tpl).addClass('lynn-dpitem')[0];\r\n\t\tele.item = item;\r\n\t\tif(item.active) {\r\n\t\t\tif(!this.multiple) {\r\n\t\t\t\tthis.activedEle = ele;\r\n\t\t\t}else {\r\n\t\t\t\tthis.activedEle = this.activedEle||[];\r\n\t\t\t\tthis.activedEle.push(ele);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ele;\r\n\t},\t\r\n\r\n\tinitEvents: function(){\r\n\t\tvar me = this;\r\n\t\tthis.toggleEle.on('click.dp', function(e){\r\n\t\t\tme.toggle.call(me)\r\n\t\t})\r\n\t\tthis.dpListEle.on('click.dp','> .lynn-dpitem',function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar item = this.item;\r\n\t\t\tvar target = e.target;\r\n\r\n\t\t\tvar isActive = item.active;\r\n\t\t\tvar del = $(target).is('.icon-recycle');\r\n\t\t\tvar obj={show:!isActive};\r\n\t\t\tif(del) {\r\n\t\t\t\tobj = {delete:true};\r\n\t\t\t}\r\n\t\t\tobj = $.extend(obj,item);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif(del) {\r\n\t\t\t\tme.deleteItem(item);\r\n\t\t\t}else {\r\n\t\t\t\tchangeStatus.call(this,isActive,e);\r\n\t\t\t\tme.setLabel();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(!me.multiple) {\r\n\t\t\t\tme.toggle();\r\n\t\t\t}\r\n\t\t\tme.itemClick&&me.itemClick.call(this,obj,me);\r\n\t\t\t\r\n\t\t})\r\n\r\n\t\tfunction changeStatus(isActive,e){\r\n\t\t\tif(me.multiple) {\r\n\t\t\t\tvar fn  = isActive ? 'removeClass' : 'addClass';\r\n\t\t\t\t$(this)[fn]('active');\r\n\t\t\t\tif(isActive) {\r\n\t\t\t\t\tvar index = me.activedEle.indexOf(this);\r\n\t\t\t\t\tif(index) {\r\n\t\t\t\t\t\tme.activedEle.splice(index+1,1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\t\tme.activedEle.push(this);\r\n\t\t\t\t}\r\n\t\t\t\t$(this).find('input').prop('checked',!isActive);\r\n\t\t\t\tthis.item.active = !isActive;\r\n\t\t\t}else {\r\n\t\t\t\tif(me.activedEle) {\r\n\t\t\t\t\tvar currItem = this;\r\n\t\t\t\t\tif(me.activedEle==currItem) {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(me.activedEle).removeClass('active');\r\n\t\t\t\t\tme.activedEle.item.active = false;\r\n\t\t\t\t}\r\n\t\t\t\tme.activedEle = $(this).addClass('active')[0];\r\n\t\t\t\tme.activedEle.item.active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetActiveByItem: function(item){\r\n\t\tif(!this.multiple) {\r\n\t\t\tif(this.activedEle&&item.value==this.activedEle.item.value) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!item.ele) {\r\n\t\t\t\tif(!item.group) item.group = 'default';\r\n\t\t\t\t\r\n\t\t\t\tvar indexInfo = this.indexOf(item);\r\n\t\t\t\tif(indexInfo.index==-1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\titem = this.items[item.group][indexInfo.index];\r\n\t\t\t}\r\n\t\t\tvar ele = item.ele;\r\n\t\t\tif(this.activedEle) {\r\n\t\t\t\tif(ele==this.activedEle) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t$(this.activedEle).removeClass('active');\r\n\t\t\t\tthis.activedEle.item.active = false;\r\n\t\t\t}\r\n\t\t\t$(ele).addClass('active');\r\n\t\t\titem.active = true;\r\n\t\t\tthis.activedEle = ele;\r\n\t\t\tthis.setLabel();\r\n\t\t\treturn true;\r\n\t\t}else {\r\n\t\t\tthis.activedEle = null;\r\n\t\t\tvar items = item,frag;\r\n\t\t\tif($.type(items)=='array') {\r\n\t\t\t\tfrag = this.initArrayItems(items);\r\n\t\t\t}else {\r\n\t\t\t\tfrag = this.initObjectItems(items);\r\n\t\t\t}\r\n\t\t\tvar wrap = this.dpListEle;\r\n\t\t\tif(this.footerEle) {\r\n\t\t\t\tthis.footerEle.siblings().remove();\r\n\t\t\t\t$(frag).insertBefore(this.footerEle);\r\n\t\t\t}else {\r\n\t\t\t\twrap.html('').append(frag);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setLabel();\r\n\t\t}\r\n\t},\r\n\r\n\tinitFooter: function(){\r\n\t\tvar me  = this;\r\n\t\tif(!this.footer) {\r\n\t\t\treturn false;\r\n\t\t}\t\r\n\t\tthis.footerEle = $('<div class=\"lynn-dp-footer\"></div>')\r\n\t\tif(this.footer&&$.type(this.footer)=='array') {\r\n\t\t\tfor(var i=0,len = this.footer.length; i<len; i++) {\r\n\t\t\t\tvar curr = this.footer[i];\r\n\t\t\t\tif(!curr.tpl) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar currNode = $(curr.tpl);\r\n\t\t\t\tthis.footerEle.append(currNode);\r\n\t\t\t\tif(curr.plugin) {\r\n\t\t\t\t\tvar PluginObj = curr.plugin;\r\n\t\t\t\t\tvar obj = new PluginObj(currNode,curr.options);\r\n\t\t\t\t\tif(curr.name) {\r\n\t\t\t\t\t\tthis.plugins[curr.name] = obj;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(curr.init&&$.type(curr.init) =='function'){\r\n\t\t\t\t\tvar ret = curr.init.call(currNode,curr,me);\r\n\t\t\t\t\tif(curr.name) {\r\n\t\t\t\t\t\tthis.plugins[curr.name] = ret;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(curr.onClick) {\r\n\t\t\t\t\tcurrNode.on('click',function(e){\r\n\t\t\t\t\t\tcurr.onClick.call(this,me,e);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.dpListEle.append(this.footerEle);\r\n\t},\r\n\r\n\tsetLabel: function(){\r\n\t\tvar label = this.label,title='';\r\n\t\tif($.type(label)=='string') {\r\n\t\t\tv= label\r\n\t\t}else if($.type(label)=='function') {\r\n\t\t\tv = label.call(this,this.activedEle);\r\n\t\t}\r\n\r\n\t\tthis.labelEle.html(v);\r\n\t},\r\n\r\n\ttoggle: function(){\r\n\t\tif(!this.open) {\r\n\t\t\tthis.wrap.addClass('open');\r\n\t\t\tvar pos = this.getPosition();\r\n\t\t\tthis.dpListEle.css({\r\n\t\t\t\ttop: pos.top,\r\n\t\t\t\tleft: pos.left\r\n\t\t\t});\r\n\t\t\tthis.dpListEle.show();\r\n\t\t} else {\r\n\t\t\tthis.wrap.removeClass('open');\r\n\t\t\tthis.dpListEle.hide();\r\n\t\t}\r\n\t\tthis.open = !this.open;\r\n\t},\r\n\r\n\tgetPosition: function(){\r\n\t\tvar offset = this.wrap.offset();\r\n\t\tvar width = this.wrap.outerWidth();\r\n\t\tvar height = this.wrap.outerHeight();\r\n\t\tvar left = offset.left + width, top = offset.top + height+1;\r\n\t\tif(left < this.width) {\r\n\t\t\tleft = offset.left;\r\n\t\t}else {\r\n\t\t\tleft = left - this.width;\r\n\t\t}\r\n\r\n\t\treturn {left: left, top: top};\r\n\r\n\t},\r\n\r\n\tindexOf: function(item,isInAllItemsIndex){\r\n\t\tvar group = item.group||'default';\r\n\t\tvar value = item.value,groupIndex, index = -1,gtIndex=-1;\r\n\r\n\t\tif(this.items[group]) {\r\n\t\t\tfor(var i=0,cur;cur=this.items[group][i++];) {\r\n\t\t\t\tif(value > cur.value) {\r\n\t\t\t\t\tgtIndex = i-1;\r\n\t\t\t\t}\r\n\t\t\t\tif(cur.value==value) {\r\n\t\t\t\t\tindex = i-1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar groupIndex = 0;\r\n\t\tif(isInAllItemsIndex) {\r\n\t\t\tfor(var g in this.items) {\r\n\t\t\t\tif(g==group) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tgroupIndex +=this.items[g].length;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {index: index,groupIndex: groupIndex,gtIndex:gtIndex};\r\n\t},\r\n\r\n\taddItem: function(item) {\r\n\t\tvar group = item.group = item.group||'default';\r\n\t\tvar indexInfo = this.indexOf(item,true);\r\n\t\tif(indexInfo.index!==-1) return false;\r\n\t\tvar frag = document.createDocumentFragment();\r\n\t\tif(!this.items[group]) {\r\n\t\t\tvar span = this.getGroupEel(item.group);\r\n\t\t\tfrag.appendChild(span);\r\n\t\t}\r\n\t\t\r\n\t\tvar ele = this.getItemEle(item);\r\n\t\titem.ele = ele;\r\n\t\tvar maxCount = this.maxCount,del;\r\n\t\tif(maxCount&&this.count>=maxCount) {\r\n\t\t\tthis.onError&&this.onError.call(this,'error','最多只能添加'+maxCount+'项');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar gtIndex = indexInfo.gtIndex;\r\n\t\tthis.items[group] = this.items[group]||[];\r\n\t\tthis.items[group].splice(gtIndex+1,0,item);\r\n\t\tfrag.appendChild(ele);\r\n\t\tvar groupIndex = indexInfo.groupIndex,baseEle;\r\n\r\n\t\t\r\n\t\tvar i = groupIndex+gtIndex;\r\n\t\tbaseEle = this.dpListEle.find('.lynn-dpitem:eq('+i+')');\r\n\t\tif(gtIndex==-1) {\r\n\t\t\tvar nextSpan = baseEle.next();\r\n\t\t\tif(nextSpan.data('group')==group) {\r\n\t\t\t\tbaseEle = nextSpan;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$(frag).insertAfter(baseEle);\r\n\t\t\r\n\t\tthis.count++;\r\n\t\treturn true;\t\t\r\n\t},\r\n\r\n\tdeleteItem: function(item) {\r\n\t\tvar indexInfo = this.indexOf(item);\r\n\t\tif(indexInfo.index!==-1) {\r\n\t\t\tvar ele = $(item.ele);\r\n\t\t\tthis.items[item.group].splice(indexInfo.index,1);\r\n\t\t\tif(this.items[item.group].length==0) {\r\n\t\t\t\tele.prev().remove();\r\n\t\t\t\tdelete this.items[item.group];\r\n\t\t\t}\r\n\t\t\tif(ele==this.activedEle) {\r\n\t\t\t\tthis.activedEle = null;\r\n\t\t\t}\r\n\t\t\tele.remove();\r\n\t\t\tthis.count--;\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\nLynnDropDown.default = {\r\n\tdpListCls : 'lynn-dplist',\r\n\tlist:[]\r\n}\r\n\r\n$(document).on('click.dp',function(e){\r\n\tvar list = LynnDropDown.default.list;\r\n\tvar target = e.target;\r\n\tfor(var i=0,len=list.length;i<len;i++) {\r\n\t\tvar curr = list[i];\r\n\t\tif(!curr.open) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvar isToggle = curr.toggleEle[0]==target||$.contains(curr.toggleEle[0],target);\r\n\t\tvar isList = $.contains(curr.dpListEle[0],target);\r\n\t\tif(!isToggle&&!isList){\r\n\t\t\tcurr.toggle();\r\n\t\t}\r\n\r\n\t}\r\n})\r\n\r\nmodule.exports = LynnDropDown;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/lynnDropDown.js\n ** module id = 6\n ** module chunks = 0\n **/","// Spectrum Colorpicker v1.8.0\r\n// https://github.com/bgrins/spectrum\r\n// Author: Brian Grinstead\r\n// License: MIT\r\n\r\n(function (factory) {\r\n    \"use strict\";\r\n\r\n    if (typeof define === 'function' && define.amd) { // AMD\r\n        define(['jquery'], factory);\r\n    }\r\n    else if (typeof exports == \"object\" && typeof module == \"object\") { // CommonJS\r\n        module.exports = factory(require('jquery'));\r\n    }\r\n    else { // Browser\r\n        factory(jQuery);\r\n    }\r\n})(function($, undefined) {\r\n    \"use strict\";\r\n\r\n    var defaultOpts = {\r\n\r\n        // Callbacks\r\n        beforeShow: noop,\r\n        move: noop,\r\n        change: noop,\r\n        show: noop,\r\n        hide: noop,\r\n\r\n        // Options\r\n        color: false,\r\n        flat: false,\r\n        showInput: false,\r\n        allowEmpty: false,\r\n        showButtons: true,\r\n        clickoutFiresChange: true,\r\n        showInitial: false,\r\n        showPalette: false,\r\n        showPaletteOnly: false,\r\n        hideAfterPaletteSelect: false,\r\n        togglePaletteOnly: false,\r\n        showSelectionPalette: true,\r\n        localStorageKey: false,\r\n        appendTo: \"body\",\r\n        maxSelectionSize: 7,\r\n        cancelText: \"cancel\",\r\n        chooseText: \"choose\",\r\n        togglePaletteMoreText: \"more\",\r\n        togglePaletteLessText: \"less\",\r\n        clearText: \"Clear Color Selection\",\r\n        noColorSelectedText: \"No Color Selected\",\r\n        preferredFormat: false,\r\n        className: \"\", // Deprecated - use containerClassName and replacerClassName instead.\r\n        containerClassName: \"\",\r\n        replacerClassName: \"\",\r\n        showAlpha: false,\r\n        theme: \"sp-light\",\r\n        palette: [[\"#ffffff\", \"#000000\", \"#ff0000\", \"#ff8000\", \"#ffff00\", \"#008000\", \"#0000ff\", \"#4b0082\", \"#9400d3\"]],\r\n        selectionPalette: [],\r\n        disabled: false,\r\n        offset: null\r\n    },\r\n    spectrums = [],\r\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\r\n    rgbaSupport = (function() {\r\n        function contains( str, substr ) {\r\n            return !!~('' + str).indexOf(substr);\r\n        }\r\n\r\n        var elem = document.createElement('div');\r\n        var style = elem.style;\r\n        style.cssText = 'background-color:rgba(0,0,0,.5)';\r\n        return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\r\n    })(),\r\n    replaceInput = [\r\n        \"<div class='sp-replacer'>\",\r\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\r\n            \"<div class='sp-dd'>&#9660;</div>\",\r\n        \"</div>\"\r\n    ].join(''),\r\n    markup = (function () {\r\n\r\n        // IE does not support gradients with multiple stops, so we need to simulate\r\n        //  that for the rainbow slider with 8 divs that each have a single gradient\r\n        var gradientFix = \"\";\r\n        if (IE) {\r\n            for (var i = 1; i <= 6; i++) {\r\n                gradientFix += \"<div class='sp-\" + i + \"'></div>\";\r\n            }\r\n        }\r\n\r\n        return [\r\n            \"<div class='sp-container sp-hidden'>\",\r\n                \"<div class='sp-palette-container'>\",\r\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-palette-button-container sp-cf'>\",\r\n                        \"<button type='button' class='sp-palette-toggle'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n                \"<div class='sp-picker-container'>\",\r\n                    \"<div class='sp-top sp-cf'>\",\r\n                        \"<div class='sp-fill'></div>\",\r\n                        \"<div class='sp-top-inner'>\",\r\n                            \"<div class='sp-color'>\",\r\n                                \"<div class='sp-sat'>\",\r\n                                    \"<div class='sp-val'>\",\r\n                                        \"<div class='sp-dragger'></div>\",\r\n                                    \"</div>\",\r\n                                \"</div>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-clear sp-clear-display'>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-hue'>\",\r\n                                \"<div class='sp-slider'></div>\",\r\n                                gradientFix,\r\n                            \"</div>\",\r\n                        \"</div>\",\r\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-input-container sp-cf'>\",\r\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-button-container sp-cf'>\",\r\n                        \"<a class='sp-cancel' href='#'></a>\",\r\n                        \"<button type='button' class='sp-choose'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n            \"</div>\"\r\n        ].join(\"\");\r\n    })();\r\n\r\n    function paletteTemplate (p, color, className, opts) {\r\n        var html = [];\r\n        for (var i = 0; i < p.length; i++) {\r\n            var current = p[i];\r\n            if(current) {\r\n                var tiny = tinycolor(current);\r\n                var c = tiny.toHsl().l < 0.5 ? \"sp-thumb-el sp-thumb-dark\" : \"sp-thumb-el sp-thumb-light\";\r\n                c += (tinycolor.equals(color, current)) ? \" sp-thumb-active\" : \"\";\r\n                var formattedString = tiny.toString(opts.preferredFormat || \"rgb\");\r\n                var swatchStyle = rgbaSupport ? (\"background-color:\" + tiny.toRgbString()) : \"filter:\" + tiny.toFilter();\r\n                html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\r\n            } else {\r\n                var cls = 'sp-clear-display';\r\n                html.push($('<div />')\r\n                    .append($('<span data-color=\"\" style=\"background-color:transparent;\" class=\"' + cls + '\"></span>')\r\n                        .attr('title', opts.noColorSelectedText)\r\n                    )\r\n                    .html()\r\n                );\r\n            }\r\n        }\r\n        return \"<div class='sp-cf \" + className + \"'>\" + html.join('') + \"</div>\";\r\n    }\r\n\r\n    function hideAll() {\r\n        for (var i = 0; i < spectrums.length; i++) {\r\n            if (spectrums[i]) {\r\n                spectrums[i].hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    function instanceOptions(o, callbackContext) {\r\n        var opts = $.extend({}, defaultOpts, o);\r\n        opts.callbacks = {\r\n            'move': bind(opts.move, callbackContext),\r\n            'change': bind(opts.change, callbackContext),\r\n            'show': bind(opts.show, callbackContext),\r\n            'hide': bind(opts.hide, callbackContext),\r\n            'beforeShow': bind(opts.beforeShow, callbackContext)\r\n        };\r\n\r\n        return opts;\r\n    }\r\n\r\n    function spectrum(element, o) {\r\n\r\n        var opts = instanceOptions(o, element),\r\n            flat = opts.flat,\r\n            showSelectionPalette = opts.showSelectionPalette,\r\n            localStorageKey = opts.localStorageKey,\r\n            theme = opts.theme,\r\n            callbacks = opts.callbacks,\r\n            resize = throttle(reflow, 10),\r\n            visible = false,\r\n            isDragging = false,\r\n            dragWidth = 0,\r\n            dragHeight = 0,\r\n            dragHelperHeight = 0,\r\n            slideHeight = 0,\r\n            slideWidth = 0,\r\n            alphaWidth = 0,\r\n            alphaSlideHelperWidth = 0,\r\n            slideHelperHeight = 0,\r\n            currentHue = 0,\r\n            currentSaturation = 0,\r\n            currentValue = 0,\r\n            currentAlpha = 1,\r\n            palette = [],\r\n            paletteArray = [],\r\n            paletteLookup = {},\r\n            selectionPalette = opts.selectionPalette.slice(0),\r\n            maxSelectionSize = opts.maxSelectionSize,\r\n            draggingClass = \"sp-dragging\",\r\n            shiftMovementDirection = null;\r\n\r\n        var doc = element.ownerDocument,\r\n            body = doc.body,\r\n            boundElement = $(element),\r\n            disabled = false,\r\n            container = $(markup, doc).addClass(theme),\r\n            pickerContainer = container.find(\".sp-picker-container\"),\r\n            dragger = container.find(\".sp-color\"),\r\n            dragHelper = container.find(\".sp-dragger\"),\r\n            slider = container.find(\".sp-hue\"),\r\n            slideHelper = container.find(\".sp-slider\"),\r\n            alphaSliderInner = container.find(\".sp-alpha-inner\"),\r\n            alphaSlider = container.find(\".sp-alpha\"),\r\n            alphaSlideHelper = container.find(\".sp-alpha-handle\"),\r\n            textInput = container.find(\".sp-input\"),\r\n            paletteContainer = container.find(\".sp-palette\"),\r\n            initialColorContainer = container.find(\".sp-initial\"),\r\n            cancelButton = container.find(\".sp-cancel\"),\r\n            clearButton = container.find(\".sp-clear\"),\r\n            chooseButton = container.find(\".sp-choose\"),\r\n            toggleButton = container.find(\".sp-palette-toggle\"),\r\n            isInput = boundElement.is(\"input\"),\r\n            isInputTypeColor = isInput && boundElement.attr(\"type\") === \"color\" && inputTypeColorSupport(),\r\n            shouldReplace = isInput && !flat,\r\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\r\n            offsetElement = (shouldReplace) ? replacer : boundElement,\r\n            previewElement = replacer.find(\".sp-preview-inner\"),\r\n            initialColor = opts.color || (isInput && boundElement.val()),\r\n            colorOnShow = false,\r\n            currentPreferredFormat = opts.preferredFormat,\r\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\r\n            isEmpty = !initialColor,\r\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\r\n\r\n        function applyOptions() {\r\n\r\n            if (opts.showPaletteOnly) {\r\n                opts.showPalette = true;\r\n            }\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n\r\n            if (opts.palette) {\r\n                palette = opts.palette.slice(0);\r\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\r\n                paletteLookup = {};\r\n                for (var i = 0; i < paletteArray.length; i++) {\r\n                    for (var j = 0; j < paletteArray[i].length; j++) {\r\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\r\n                        paletteLookup[rgb] = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            container.toggleClass(\"sp-flat\", flat);\r\n            container.toggleClass(\"sp-input-disabled\", !opts.showInput);\r\n            container.toggleClass(\"sp-alpha-enabled\", opts.showAlpha);\r\n            container.toggleClass(\"sp-clear-enabled\", allowEmpty);\r\n            container.toggleClass(\"sp-buttons-disabled\", !opts.showButtons);\r\n            container.toggleClass(\"sp-palette-buttons-disabled\", !opts.togglePaletteOnly);\r\n            container.toggleClass(\"sp-palette-disabled\", !opts.showPalette);\r\n            container.toggleClass(\"sp-palette-only\", opts.showPaletteOnly);\r\n            container.toggleClass(\"sp-initial-disabled\", !opts.showInitial);\r\n            container.addClass(opts.className).addClass(opts.containerClassName);\r\n\r\n            reflow();\r\n        }\r\n\r\n        function initialize() {\r\n\r\n            if (IE) {\r\n                container.find(\"*:not(input)\").attr(\"unselectable\", \"on\");\r\n            }\r\n\r\n            applyOptions();\r\n\r\n            if (shouldReplace) {\r\n                boundElement.after(replacer).hide();\r\n            }\r\n\r\n            if (!allowEmpty) {\r\n                clearButton.hide();\r\n            }\r\n\r\n            if (flat) {\r\n                boundElement.after(container).hide();\r\n            }\r\n            else {\r\n\r\n                var appendTo = opts.appendTo === \"parent\" ? boundElement.parent() : $(opts.appendTo);\r\n                if (appendTo.length !== 1) {\r\n                    appendTo = $(\"body\");\r\n                }\r\n\r\n                appendTo.append(container);\r\n            }\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            offsetElement.bind(\"click.spectrum touchstart.spectrum\", function (e) {\r\n                if (!disabled) {\r\n                    toggle();\r\n                }\r\n\r\n                e.stopPropagation();\r\n\r\n                if (!$(e.target).is(\"input\")) {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n\r\n            if(boundElement.is(\":disabled\") || (opts.disabled === true)) {\r\n                disable();\r\n            }\r\n\r\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\r\n            container.click(stopPropagation);\r\n\r\n            // Handle user typed input\r\n            textInput.change(setFromTextInput);\r\n            textInput.bind(\"paste\", function () {\r\n                setTimeout(setFromTextInput, 1);\r\n            });\r\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\r\n\r\n            cancelButton.text(opts.cancelText);\r\n            cancelButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                revert();\r\n                hide();\r\n            });\r\n\r\n            clearButton.attr(\"title\", opts.clearText);\r\n            clearButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                isEmpty = true;\r\n                move();\r\n\r\n                if(flat) {\r\n                    //for the flat style, this is a change event\r\n                    updateOriginalInput(true);\r\n                }\r\n            });\r\n\r\n            chooseButton.text(opts.chooseText);\r\n            chooseButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if (IE && textInput.is(\":focus\")) {\r\n                    textInput.trigger('change');\r\n                }\r\n\r\n                if (isValid()) {\r\n                    updateOriginalInput(true);\r\n                    hide();\r\n                }\r\n            });\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n            toggleButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                opts.showPaletteOnly = !opts.showPaletteOnly;\r\n\r\n                // To make sure the Picker area is drawn on the right, next to the\r\n                // Palette area (and not below the palette), first move the Palette\r\n                // to the left to make space for the picker, plus 5px extra.\r\n                // The 'applyOptions' function puts the whole container back into place\r\n                // and takes care of the button-text and the sp-palette-only CSS class.\r\n                if (!opts.showPaletteOnly && !flat) {\r\n                    container.css('left', '-=' + (pickerContainer.outerWidth(true) + 5));\r\n                }\r\n                applyOptions();\r\n            });\r\n\r\n            draggable(alphaSlider, function (dragX, dragY, e) {\r\n                currentAlpha = (dragX / alphaWidth);\r\n                isEmpty = false;\r\n                if (e.shiftKey) {\r\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\r\n                }\r\n\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(slider, function (dragX, dragY) {\r\n                currentHue = parseFloat(dragY / slideHeight);\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(dragger, function (dragX, dragY, e) {\r\n\r\n                // shift+drag should snap the movement to either the x or y axis.\r\n                if (!e.shiftKey) {\r\n                    shiftMovementDirection = null;\r\n                }\r\n                else if (!shiftMovementDirection) {\r\n                    var oldDragX = currentSaturation * dragWidth;\r\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\r\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\r\n\r\n                    shiftMovementDirection = furtherFromX ? \"x\" : \"y\";\r\n                }\r\n\r\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === \"x\";\r\n                var setValue = !shiftMovementDirection || shiftMovementDirection === \"y\";\r\n\r\n                if (setSaturation) {\r\n                    currentSaturation = parseFloat(dragX / dragWidth);\r\n                }\r\n                if (setValue) {\r\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\r\n                }\r\n\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n\r\n                move();\r\n\r\n            }, dragStart, dragStop);\r\n\r\n            if (!!initialColor) {\r\n                set(initialColor);\r\n\r\n                // In case color was black - update the preview UI and set the format\r\n                // since the set function will not run (default color is black).\r\n                updateUI();\r\n                currentPreferredFormat = opts.preferredFormat || tinycolor(initialColor).format;\r\n\r\n                addColorToSelectionPalette(initialColor);\r\n            }\r\n            else {\r\n                updateUI();\r\n            }\r\n\r\n            if (flat) {\r\n                show();\r\n            }\r\n\r\n            function paletteElementClick(e) {\r\n                if (e.data && e.data.ignore) {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                }\r\n                else {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                    updateOriginalInput(true);\r\n                    if (opts.hideAfterPaletteSelect) {\r\n                      hide();\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            var paletteEvent = IE ? \"mousedown.spectrum\" : \"click.spectrum touchstart.spectrum\";\r\n            paletteContainer.delegate(\".sp-thumb-el\", paletteEvent, paletteElementClick);\r\n            initialColorContainer.delegate(\".sp-thumb-el:nth-child(1)\", paletteEvent, { ignore: true }, paletteElementClick);\r\n        }\r\n\r\n        function updateSelectionPaletteFromStorage() {\r\n\r\n            if (localStorageKey && window.localStorage) {\r\n\r\n                // Migrate old palettes over to new format.  May want to remove this eventually.\r\n                try {\r\n                    var oldPalette = window.localStorage[localStorageKey].split(\",#\");\r\n                    if (oldPalette.length > 1) {\r\n                        delete window.localStorage[localStorageKey];\r\n                        $.each(oldPalette, function(i, c) {\r\n                             addColorToSelectionPalette(c);\r\n                        });\r\n                    }\r\n                }\r\n                catch(e) { }\r\n\r\n                try {\r\n                    selectionPalette = window.localStorage[localStorageKey].split(\";\");\r\n                }\r\n                catch (e) { }\r\n            }\r\n        }\r\n\r\n        function addColorToSelectionPalette(color) {\r\n            if (showSelectionPalette) {\r\n                var rgb = tinycolor(color).toRgbString();\r\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\r\n                    selectionPalette.push(rgb);\r\n                    while(selectionPalette.length > maxSelectionSize) {\r\n                        selectionPalette.shift();\r\n                    }\r\n                }\r\n\r\n                if (localStorageKey && window.localStorage) {\r\n                    try {\r\n                        window.localStorage[localStorageKey] = selectionPalette.join(\";\");\r\n                    }\r\n                    catch(e) { }\r\n                }\r\n            }\r\n        }\r\n\r\n        function getUniqueSelectionPalette() {\r\n            var unique = [];\r\n            if (opts.showPalette) {\r\n                for (var i = 0; i < selectionPalette.length; i++) {\r\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\r\n\r\n                    if (!paletteLookup[rgb]) {\r\n                        unique.push(selectionPalette[i]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return unique.reverse().slice(0, opts.maxSelectionSize);\r\n        }\r\n\r\n        function drawPalette() {\r\n\r\n            var currentColor = get();\r\n\r\n            var html = $.map(paletteArray, function (palette, i) {\r\n                return paletteTemplate(palette, currentColor, \"sp-palette-row sp-palette-row-\" + i, opts);\r\n            });\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            if (selectionPalette) {\r\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, \"sp-palette-row sp-palette-row-selection\", opts));\r\n            }\r\n\r\n            paletteContainer.html(html.join(\"\"));\r\n        }\r\n\r\n        function drawInitial() {\r\n            if (opts.showInitial) {\r\n                var initial = colorOnShow;\r\n                var current = get();\r\n                initialColorContainer.html(paletteTemplate([initial, current], current, \"sp-palette-row-initial\", opts));\r\n            }\r\n        }\r\n\r\n        function dragStart() {\r\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\r\n                reflow();\r\n            }\r\n            isDragging = true;\r\n            container.addClass(draggingClass);\r\n            shiftMovementDirection = null;\r\n            boundElement.trigger('dragstart.spectrum', [ get() ]);\r\n        }\r\n\r\n        function dragStop() {\r\n            isDragging = false;\r\n            container.removeClass(draggingClass);\r\n            boundElement.trigger('dragstop.spectrum', [ get() ]);\r\n        }\r\n\r\n        function setFromTextInput() {\r\n\r\n            var value = textInput.val();\r\n\r\n            if ((value === null || value === \"\") && allowEmpty) {\r\n                set(null);\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                var tiny = tinycolor(value);\r\n                if (tiny.isValid()) {\r\n                    set(tiny);\r\n                    updateOriginalInput(true);\r\n                }\r\n                else {\r\n                    textInput.addClass(\"sp-validation-error\");\r\n                }\r\n            }\r\n        }\r\n\r\n        function toggle() {\r\n            if (visible) {\r\n                hide();\r\n            }\r\n            else {\r\n                show();\r\n            }\r\n        }\r\n\r\n        function show() {\r\n            var event = $.Event('beforeShow.spectrum');\r\n\r\n            if (visible) {\r\n                reflow();\r\n                return;\r\n            }\r\n\r\n            boundElement.trigger(event, [ get() ]);\r\n\r\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n\r\n            hideAll();\r\n            visible = true;\r\n\r\n            $(doc).bind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).bind(\"click.spectrum\", clickout);\r\n            $(window).bind(\"resize.spectrum\", resize);\r\n            replacer.addClass(\"sp-active\");\r\n            container.removeClass(\"sp-hidden\");\r\n\r\n            reflow();\r\n            updateUI();\r\n\r\n            colorOnShow = get();\r\n\r\n            drawInitial();\r\n            callbacks.show(colorOnShow);\r\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\r\n        }\r\n\r\n        function onkeydown(e) {\r\n            // Close on ESC\r\n            if (e.keyCode === 27) {\r\n                hide();\r\n            }\r\n        }\r\n\r\n        function clickout(e) {\r\n            // Return on right click.\r\n            if (e.button == 2) { return; }\r\n\r\n            // If a drag event was happening during the mouseup, don't hide\r\n            // on click.\r\n            if (isDragging) { return; }\r\n\r\n            if (clickoutFiresChange) {\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                revert();\r\n            }\r\n            hide();\r\n        }\r\n\r\n        function hide() {\r\n            // Return if hiding is unnecessary\r\n            if (!visible || flat) { return; }\r\n            visible = false;\r\n\r\n            $(doc).unbind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).unbind(\"click.spectrum\", clickout);\r\n            $(window).unbind(\"resize.spectrum\", resize);\r\n\r\n            replacer.removeClass(\"sp-active\");\r\n            container.addClass(\"sp-hidden\");\r\n\r\n            callbacks.hide(get());\r\n            boundElement.trigger('hide.spectrum', [ get() ]);\r\n        }\r\n\r\n        function revert() {\r\n            set(colorOnShow, true);\r\n        }\r\n\r\n        function set(color, ignoreFormatChange) {\r\n            if (tinycolor.equals(color, get())) {\r\n                // Update UI just in case a validation error needs\r\n                // to be cleared.\r\n                updateUI();\r\n                return;\r\n            }\r\n\r\n            var newColor, newHsv;\r\n            if (!color && allowEmpty) {\r\n                isEmpty = true;\r\n            } else {\r\n                isEmpty = false;\r\n                newColor = tinycolor(color);\r\n                newHsv = newColor.toHsv();\r\n\r\n                currentHue = (newHsv.h % 360) / 360;\r\n                currentSaturation = newHsv.s;\r\n                currentValue = newHsv.v;\r\n                currentAlpha = newHsv.a;\r\n            }\r\n            updateUI();\r\n\r\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\r\n                currentPreferredFormat = opts.preferredFormat || newColor.getFormat();\r\n            }\r\n        }\r\n\r\n        function get(opts) {\r\n            opts = opts || { };\r\n\r\n            if (allowEmpty && isEmpty) {\r\n                return null;\r\n            }\r\n\r\n            return tinycolor.fromRatio({\r\n                h: currentHue,\r\n                s: currentSaturation,\r\n                v: currentValue,\r\n                a: Math.round(currentAlpha * 100) / 100\r\n            }, { format: opts.format || currentPreferredFormat });\r\n        }\r\n\r\n        function isValid() {\r\n            return !textInput.hasClass(\"sp-validation-error\");\r\n        }\r\n\r\n        function move() {\r\n            updateUI();\r\n\r\n            callbacks.move(get());\r\n            boundElement.trigger('move.spectrum', [ get() ]);\r\n        }\r\n\r\n        function updateUI() {\r\n\r\n            textInput.removeClass(\"sp-validation-error\");\r\n\r\n            updateHelperLocations();\r\n\r\n            // Update dragger background color (gradients take care of saturation and value).\r\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\r\n            dragger.css(\"background-color\", flatColor.toHexString());\r\n\r\n            // Get a format that alpha will be included in (hex and names ignore alpha)\r\n            var format = currentPreferredFormat;\r\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === \"name\")) {\r\n                if (format === \"hex\" || format === \"hex3\" || format === \"hex6\" || format === \"name\") {\r\n                    format = \"rgb\";\r\n                }\r\n            }\r\n\r\n            var realColor = get({ format: format }),\r\n                displayColor = '';\r\n\r\n             //reset background info for preview element\r\n            previewElement.removeClass(\"sp-clear-display\");\r\n            previewElement.css('background-color', 'transparent');\r\n\r\n            if (!realColor && allowEmpty) {\r\n                // Update the replaced elements background with icon indicating no color selection\r\n                previewElement.addClass(\"sp-clear-display\");\r\n            }\r\n            else {\r\n                var realHex = realColor.toHexString(),\r\n                    realRgb = realColor.toRgbString();\r\n\r\n                // Update the replaced elements background color (with actual selected color)\r\n                if (rgbaSupport || realColor.alpha === 1) {\r\n                    previewElement.css(\"background-color\", realRgb);\r\n                }\r\n                else {\r\n                    previewElement.css(\"background-color\", \"transparent\");\r\n                    previewElement.css(\"filter\", realColor.toFilter());\r\n                }\r\n\r\n                if (opts.showAlpha) {\r\n                    var rgb = realColor.toRgb();\r\n                    rgb.a = 0;\r\n                    var realAlpha = tinycolor(rgb).toRgbString();\r\n                    var gradient = \"linear-gradient(left, \" + realAlpha + \", \" + realHex + \")\";\r\n\r\n                    if (IE) {\r\n                        alphaSliderInner.css(\"filter\", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\r\n                    }\r\n                    else {\r\n                        alphaSliderInner.css(\"background\", \"-webkit-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-moz-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-ms-\" + gradient);\r\n                        // Use current syntax gradient on unprefixed property.\r\n                        alphaSliderInner.css(\"background\",\r\n                            \"linear-gradient(to right, \" + realAlpha + \", \" + realHex + \")\");\r\n                    }\r\n                }\r\n\r\n                displayColor = realColor.toString(format);\r\n            }\r\n\r\n            // Update the text entry input as it changes happen\r\n            if (opts.showInput) {\r\n                textInput.val(displayColor);\r\n            }\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            drawInitial();\r\n        }\r\n\r\n        function updateHelperLocations() {\r\n            var s = currentSaturation;\r\n            var v = currentValue;\r\n\r\n            if(allowEmpty && isEmpty) {\r\n                //if selected color is empty, hide the helpers\r\n                alphaSlideHelper.hide();\r\n                slideHelper.hide();\r\n                dragHelper.hide();\r\n            }\r\n            else {\r\n                //make sure helpers are visible\r\n                alphaSlideHelper.show();\r\n                slideHelper.show();\r\n                dragHelper.show();\r\n\r\n                // Where to show the little circle in that displays your current selected color\r\n                var dragX = s * dragWidth;\r\n                var dragY = dragHeight - (v * dragHeight);\r\n                dragX = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\r\n                );\r\n                dragY = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\r\n                );\r\n                dragHelper.css({\r\n                    \"top\": dragY + \"px\",\r\n                    \"left\": dragX + \"px\"\r\n                });\r\n\r\n                var alphaX = currentAlpha * alphaWidth;\r\n                alphaSlideHelper.css({\r\n                    \"left\": (alphaX - (alphaSlideHelperWidth / 2)) + \"px\"\r\n                });\r\n\r\n                // Where to show the bar that displays your current selected hue\r\n                var slideY = (currentHue) * slideHeight;\r\n                slideHelper.css({\r\n                    \"top\": (slideY - slideHelperHeight) + \"px\"\r\n                });\r\n            }\r\n        }\r\n\r\n        function updateOriginalInput(fireCallback) {\r\n            var color = get(),\r\n                displayColor = '',\r\n                hasChanged = !tinycolor.equals(color, colorOnShow);\r\n\r\n            if (color) {\r\n                displayColor = color.toString(currentPreferredFormat);\r\n                // Update the selection palette with the current color\r\n                addColorToSelectionPalette(color);\r\n            }\r\n\r\n            if (isInput) {\r\n                boundElement.val(displayColor);\r\n            }\r\n\r\n            if (fireCallback && hasChanged) {\r\n                callbacks.change(color);\r\n                boundElement.trigger('change', [ color ]);\r\n            }\r\n        }\r\n\r\n        function reflow() {\r\n            if (!visible) {\r\n                return; // Calculations would be useless and wouldn't be reliable anyways\r\n            }\r\n            dragWidth = dragger.width();\r\n            dragHeight = dragger.height();\r\n            dragHelperHeight = dragHelper.height();\r\n            slideWidth = slider.width();\r\n            slideHeight = slider.height();\r\n            slideHelperHeight = slideHelper.height();\r\n            alphaWidth = alphaSlider.width();\r\n            alphaSlideHelperWidth = alphaSlideHelper.width();\r\n\r\n            if (!flat) {\r\n                container.css(\"position\", \"absolute\");\r\n                if (opts.offset) {\r\n                    container.offset(opts.offset);\r\n                } else {\r\n                    container.offset(getOffset(container, offsetElement));\r\n                }\r\n            }\r\n\r\n            updateHelperLocations();\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            boundElement.trigger('reflow.spectrum');\r\n        }\r\n\r\n        function destroy() {\r\n            boundElement.show();\r\n            offsetElement.unbind(\"click.spectrum touchstart.spectrum\");\r\n            container.remove();\r\n            replacer.remove();\r\n            spectrums[spect.id] = null;\r\n        }\r\n\r\n        function option(optionName, optionValue) {\r\n            if (optionName === undefined) {\r\n                return $.extend({}, opts);\r\n            }\r\n            if (optionValue === undefined) {\r\n                return opts[optionName];\r\n            }\r\n\r\n            opts[optionName] = optionValue;\r\n\r\n            if (optionName === \"preferredFormat\") {\r\n                currentPreferredFormat = opts.preferredFormat;\r\n            }\r\n            applyOptions();\r\n        }\r\n\r\n        function enable() {\r\n            disabled = false;\r\n            boundElement.attr(\"disabled\", false);\r\n            offsetElement.removeClass(\"sp-disabled\");\r\n        }\r\n\r\n        function disable() {\r\n            hide();\r\n            disabled = true;\r\n            boundElement.attr(\"disabled\", true);\r\n            offsetElement.addClass(\"sp-disabled\");\r\n        }\r\n\r\n        function setOffset(coord) {\r\n            opts.offset = coord;\r\n            reflow();\r\n        }\r\n\r\n        initialize();\r\n\r\n        var spect = {\r\n            show: show,\r\n            hide: hide,\r\n            toggle: toggle,\r\n            reflow: reflow,\r\n            option: option,\r\n            enable: enable,\r\n            disable: disable,\r\n            offset: setOffset,\r\n            set: function (c) {\r\n                set(c);\r\n                updateOriginalInput();\r\n            },\r\n            get: get,\r\n            destroy: destroy,\r\n            container: container\r\n        };\r\n\r\n        spect.id = spectrums.push(spect) - 1;\r\n\r\n        return spect;\r\n    }\r\n\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function getOffset(picker, input) {\r\n        var extraY = 0;\r\n        var dpWidth = picker.outerWidth();\r\n        var dpHeight = picker.outerHeight();\r\n        var inputHeight = input.outerHeight();\r\n        var doc = picker[0].ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\r\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\r\n        var offset = input.offset();\r\n        offset.top += inputHeight;\r\n\r\n        offset.left -=\r\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offset.left + dpWidth - viewWidth) : 0);\r\n\r\n        offset.top -=\r\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\r\n\r\n        return offset;\r\n    }\r\n\r\n    /**\r\n    * noop - do nothing\r\n    */\r\n    function noop() {\r\n\r\n    }\r\n\r\n    /**\r\n    * stopPropagation - makes the code only doing this a little easier to read in line\r\n    */\r\n    function stopPropagation(e) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n    * Create a function bound to a given object\r\n    * Thanks to underscore.js\r\n    */\r\n    function bind(func, obj) {\r\n        var slice = Array.prototype.slice;\r\n        var args = slice.call(arguments, 2);\r\n        return function () {\r\n            return func.apply(obj, args.concat(slice.call(arguments)));\r\n        };\r\n    }\r\n\r\n    /**\r\n    * Lightweight drag helper.  Handles containment within the element, so that\r\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\r\n    */\r\n    function draggable(element, onmove, onstart, onstop) {\r\n        onmove = onmove || function () { };\r\n        onstart = onstart || function () { };\r\n        onstop = onstop || function () { };\r\n        var doc = document;\r\n        var dragging = false;\r\n        var offset = {};\r\n        var maxHeight = 0;\r\n        var maxWidth = 0;\r\n        var hasTouch = ('ontouchstart' in window);\r\n\r\n        var duringDragEvents = {};\r\n        duringDragEvents[\"selectstart\"] = prevent;\r\n        duringDragEvents[\"dragstart\"] = prevent;\r\n        duringDragEvents[\"touchmove mousemove\"] = move;\r\n        duringDragEvents[\"touchend mouseup\"] = stop;\r\n\r\n        function prevent(e) {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            }\r\n            if (e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            e.returnValue = false;\r\n        }\r\n\r\n        function move(e) {\r\n            if (dragging) {\r\n                // Mouseup happened outside of window\r\n                if (IE && doc.documentMode < 9 && !e.button) {\r\n                    return stop();\r\n                }\r\n\r\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\r\n                var pageX = t0 && t0.pageX || e.pageX;\r\n                var pageY = t0 && t0.pageY || e.pageY;\r\n\r\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\r\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\r\n\r\n                if (hasTouch) {\r\n                    // Stop scrolling in iOS\r\n                    prevent(e);\r\n                }\r\n\r\n                onmove.apply(element, [dragX, dragY, e]);\r\n            }\r\n        }\r\n\r\n        function start(e) {\r\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\r\n\r\n            if (!rightclick && !dragging) {\r\n                if (onstart.apply(element, arguments) !== false) {\r\n                    dragging = true;\r\n                    maxHeight = $(element).height();\r\n                    maxWidth = $(element).width();\r\n                    offset = $(element).offset();\r\n\r\n                    $(doc).bind(duringDragEvents);\r\n                    $(doc.body).addClass(\"sp-dragging\");\r\n\r\n                    move(e);\r\n\r\n                    prevent(e);\r\n                }\r\n            }\r\n        }\r\n\r\n        function stop() {\r\n            if (dragging) {\r\n                $(doc).unbind(duringDragEvents);\r\n                $(doc.body).removeClass(\"sp-dragging\");\r\n\r\n                // Wait a tick before notifying observers to allow the click event\r\n                // to fire in Chrome.\r\n                setTimeout(function() {\r\n                    onstop.apply(element, arguments);\r\n                }, 0);\r\n            }\r\n            dragging = false;\r\n        }\r\n\r\n        $(element).bind(\"touchstart mousedown\", start);\r\n    }\r\n\r\n    function throttle(func, wait, debounce) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var throttler = function () {\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            };\r\n            if (debounce) clearTimeout(timeout);\r\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\r\n        };\r\n    }\r\n\r\n    function inputTypeColorSupport() {\r\n        return $.fn.spectrum.inputTypeColorSupport();\r\n    }\r\n\r\n    /**\r\n    * Define a jQuery plugin\r\n    */\r\n    var dataID = \"spectrum.id\";\r\n    $.fn.spectrum = function (opts, extra) {\r\n\r\n        if (typeof opts == \"string\") {\r\n\r\n            var returnValue = this;\r\n            var args = Array.prototype.slice.call( arguments, 1 );\r\n\r\n            this.each(function () {\r\n                var spect = spectrums[$(this).data(dataID)];\r\n                if (spect) {\r\n                    var method = spect[opts];\r\n                    if (!method) {\r\n                        throw new Error( \"Spectrum: no such method: '\" + opts + \"'\" );\r\n                    }\r\n\r\n                    if (opts == \"get\") {\r\n                        returnValue = spect.get();\r\n                    }\r\n                    else if (opts == \"container\") {\r\n                        returnValue = spect.container;\r\n                    }\r\n                    else if (opts == \"option\") {\r\n                        returnValue = spect.option.apply(spect, args);\r\n                    }\r\n                    else if (opts == \"destroy\") {\r\n                        spect.destroy();\r\n                        $(this).removeData(dataID);\r\n                    }\r\n                    else {\r\n                        method.apply(spect, args);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return returnValue;\r\n        }\r\n\r\n        // Initializing a new instance of spectrum\r\n        return this.spectrum(\"destroy\").each(function () {\r\n            var options = $.extend({}, opts, $(this).data());\r\n            var spect = spectrum(this, options);\r\n            $(this).data(dataID, spect.id);\r\n        });\r\n    };\r\n\r\n    $.fn.spectrum.load = true;\r\n    $.fn.spectrum.loadOpts = {};\r\n    $.fn.spectrum.draggable = draggable;\r\n    $.fn.spectrum.defaults = defaultOpts;\r\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\r\n        if (typeof inputTypeColorSupport._cachedResult === \"undefined\") {\r\n            var colorInput = $(\"<input type='color'/>\")[0]; // if color element is supported, value will default to not null\r\n            inputTypeColorSupport._cachedResult = colorInput.type === \"color\" && colorInput.value !== \"\";\r\n        }\r\n        return inputTypeColorSupport._cachedResult;\r\n    };\r\n\r\n    $.spectrum = { };\r\n    $.spectrum.localization = { };\r\n    $.spectrum.palettes = { };\r\n\r\n    $.fn.spectrum.processNativeColorInputs = function () {\r\n        var colorInputs = $(\"input[type=color]\");\r\n        if (colorInputs.length && !inputTypeColorSupport()) {\r\n            colorInputs.spectrum({\r\n                preferredFormat: \"hex6\"\r\n            });\r\n        }\r\n    };\r\n\r\n    // TinyColor v1.1.2\r\n    // https://github.com/bgrins/TinyColor\r\n    // Brian Grinstead, MIT License\r\n\r\n    (function() {\r\n\r\n    var trimLeft = /^[\\s,#]+/,\r\n        trimRight = /\\s+$/,\r\n        tinyCounter = 0,\r\n        math = Math,\r\n        mathRound = math.round,\r\n        mathMin = math.min,\r\n        mathMax = math.max,\r\n        mathRandom = math.random;\r\n\r\n    var tinycolor = function(color, opts) {\r\n\r\n        color = (color) ? color : '';\r\n        opts = opts || { };\r\n\r\n        // If input is already a tinycolor, return itself\r\n        if (color instanceof tinycolor) {\r\n           return color;\r\n        }\r\n        // If we are called as a function, call using new instead\r\n        if (!(this instanceof tinycolor)) {\r\n            return new tinycolor(color, opts);\r\n        }\r\n\r\n        var rgb = inputToRGB(color);\r\n        this._originalInput = color,\r\n        this._r = rgb.r,\r\n        this._g = rgb.g,\r\n        this._b = rgb.b,\r\n        this._a = rgb.a,\r\n        this._roundA = mathRound(100*this._a) / 100,\r\n        this._format = opts.format || rgb.format;\r\n        this._gradientType = opts.gradientType;\r\n\r\n        // Don't let the range of [0,255] come back in [0,1].\r\n        // Potentially lose a little bit of precision here, but will fix issues where\r\n        // .5 gets interpreted as half of the total, instead of half of 1\r\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\r\n        if (this._r < 1) { this._r = mathRound(this._r); }\r\n        if (this._g < 1) { this._g = mathRound(this._g); }\r\n        if (this._b < 1) { this._b = mathRound(this._b); }\r\n\r\n        this._ok = rgb.ok;\r\n        this._tc_id = tinyCounter++;\r\n    };\r\n\r\n    tinycolor.prototype = {\r\n        isDark: function() {\r\n            return this.getBrightness() < 128;\r\n        },\r\n        isLight: function() {\r\n            return !this.isDark();\r\n        },\r\n        isValid: function() {\r\n            return this._ok;\r\n        },\r\n        getOriginalInput: function() {\r\n          return this._originalInput;\r\n        },\r\n        getFormat: function() {\r\n            return this._format;\r\n        },\r\n        getAlpha: function() {\r\n            return this._a;\r\n        },\r\n        getBrightness: function() {\r\n            var rgb = this.toRgb();\r\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n        },\r\n        setAlpha: function(value) {\r\n            this._a = boundAlpha(value);\r\n            this._roundA = mathRound(100*this._a) / 100;\r\n            return this;\r\n        },\r\n        toHsv: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\r\n        },\r\n        toHsvString: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\r\n            return (this._a == 1) ?\r\n              \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\r\n              \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHsl: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\r\n        },\r\n        toHslString: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\r\n            return (this._a == 1) ?\r\n              \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\r\n              \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHex: function(allow3Char) {\r\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\r\n        },\r\n        toHexString: function(allow3Char) {\r\n            return '#' + this.toHex(allow3Char);\r\n        },\r\n        toHex8: function() {\r\n            return rgbaToHex(this._r, this._g, this._b, this._a);\r\n        },\r\n        toHex8String: function() {\r\n            return '#' + this.toHex8();\r\n        },\r\n        toRgb: function() {\r\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\r\n        },\r\n        toRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\r\n              \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\r\n        },\r\n        toPercentageRgb: function() {\r\n            return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\r\n        },\r\n        toPercentageRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\r\n              \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\r\n        },\r\n        toName: function() {\r\n            if (this._a === 0) {\r\n                return \"transparent\";\r\n            }\r\n\r\n            if (this._a < 1) {\r\n                return false;\r\n            }\r\n\r\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\r\n        },\r\n        toFilter: function(secondColor) {\r\n            var hex8String = '#' + rgbaToHex(this._r, this._g, this._b, this._a);\r\n            var secondHex8String = hex8String;\r\n            var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\r\n\r\n            if (secondColor) {\r\n                var s = tinycolor(secondColor);\r\n                secondHex8String = s.toHex8String();\r\n            }\r\n\r\n            return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\r\n        },\r\n        toString: function(format) {\r\n            var formatSet = !!format;\r\n            format = format || this._format;\r\n\r\n            var formattedString = false;\r\n            var hasAlpha = this._a < 1 && this._a >= 0;\r\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"name\");\r\n\r\n            if (needsAlphaFormat) {\r\n                // Special case for \"transparent\", all other non-alpha formats\r\n                // will return rgba when there is transparency.\r\n                if (format === \"name\" && this._a === 0) {\r\n                    return this.toName();\r\n                }\r\n                return this.toRgbString();\r\n            }\r\n            if (format === \"rgb\") {\r\n                formattedString = this.toRgbString();\r\n            }\r\n            if (format === \"prgb\") {\r\n                formattedString = this.toPercentageRgbString();\r\n            }\r\n            if (format === \"hex\" || format === \"hex6\") {\r\n                formattedString = this.toHexString();\r\n            }\r\n            if (format === \"hex3\") {\r\n                formattedString = this.toHexString(true);\r\n            }\r\n            if (format === \"hex8\") {\r\n                formattedString = this.toHex8String();\r\n            }\r\n            if (format === \"name\") {\r\n                formattedString = this.toName();\r\n            }\r\n            if (format === \"hsl\") {\r\n                formattedString = this.toHslString();\r\n            }\r\n            if (format === \"hsv\") {\r\n                formattedString = this.toHsvString();\r\n            }\r\n\r\n            return formattedString || this.toHexString();\r\n        },\r\n\r\n        _applyModification: function(fn, args) {\r\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\r\n            this._r = color._r;\r\n            this._g = color._g;\r\n            this._b = color._b;\r\n            this.setAlpha(color._a);\r\n            return this;\r\n        },\r\n        lighten: function() {\r\n            return this._applyModification(lighten, arguments);\r\n        },\r\n        brighten: function() {\r\n            return this._applyModification(brighten, arguments);\r\n        },\r\n        darken: function() {\r\n            return this._applyModification(darken, arguments);\r\n        },\r\n        desaturate: function() {\r\n            return this._applyModification(desaturate, arguments);\r\n        },\r\n        saturate: function() {\r\n            return this._applyModification(saturate, arguments);\r\n        },\r\n        greyscale: function() {\r\n            return this._applyModification(greyscale, arguments);\r\n        },\r\n        spin: function() {\r\n            return this._applyModification(spin, arguments);\r\n        },\r\n\r\n        _applyCombination: function(fn, args) {\r\n            return fn.apply(null, [this].concat([].slice.call(args)));\r\n        },\r\n        analogous: function() {\r\n            return this._applyCombination(analogous, arguments);\r\n        },\r\n        complement: function() {\r\n            return this._applyCombination(complement, arguments);\r\n        },\r\n        monochromatic: function() {\r\n            return this._applyCombination(monochromatic, arguments);\r\n        },\r\n        splitcomplement: function() {\r\n            return this._applyCombination(splitcomplement, arguments);\r\n        },\r\n        triad: function() {\r\n            return this._applyCombination(triad, arguments);\r\n        },\r\n        tetrad: function() {\r\n            return this._applyCombination(tetrad, arguments);\r\n        }\r\n    };\r\n\r\n    // If input is an object, force 1 into \"1.0\" to handle ratios properly\r\n    // String input requires \"1.0\" as input, so 1 will be treated as 1\r\n    tinycolor.fromRatio = function(color, opts) {\r\n        if (typeof color == \"object\") {\r\n            var newColor = {};\r\n            for (var i in color) {\r\n                if (color.hasOwnProperty(i)) {\r\n                    if (i === \"a\") {\r\n                        newColor[i] = color[i];\r\n                    }\r\n                    else {\r\n                        newColor[i] = convertToPercentage(color[i]);\r\n                    }\r\n                }\r\n            }\r\n            color = newColor;\r\n        }\r\n\r\n        return tinycolor(color, opts);\r\n    };\r\n\r\n    // Given a string or object, convert that input to RGB\r\n    // Possible string inputs:\r\n    //\r\n    //     \"red\"\r\n    //     \"#f00\" or \"f00\"\r\n    //     \"#ff0000\" or \"ff0000\"\r\n    //     \"#ff000000\" or \"ff000000\"\r\n    //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\r\n    //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\r\n    //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\r\n    //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\r\n    //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\r\n    //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\r\n    //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\r\n    //\r\n    function inputToRGB(color) {\r\n\r\n        var rgb = { r: 0, g: 0, b: 0 };\r\n        var a = 1;\r\n        var ok = false;\r\n        var format = false;\r\n\r\n        if (typeof color == \"string\") {\r\n            color = stringInputToObject(color);\r\n        }\r\n\r\n        if (typeof color == \"object\") {\r\n            if (color.hasOwnProperty(\"r\") && color.hasOwnProperty(\"g\") && color.hasOwnProperty(\"b\")) {\r\n                rgb = rgbToRgb(color.r, color.g, color.b);\r\n                ok = true;\r\n                format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"v\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.v = convertToPercentage(color.v);\r\n                rgb = hsvToRgb(color.h, color.s, color.v);\r\n                ok = true;\r\n                format = \"hsv\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"l\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.l = convertToPercentage(color.l);\r\n                rgb = hslToRgb(color.h, color.s, color.l);\r\n                ok = true;\r\n                format = \"hsl\";\r\n            }\r\n\r\n            if (color.hasOwnProperty(\"a\")) {\r\n                a = color.a;\r\n            }\r\n        }\r\n\r\n        a = boundAlpha(a);\r\n\r\n        return {\r\n            ok: ok,\r\n            format: color.format || format,\r\n            r: mathMin(255, mathMax(rgb.r, 0)),\r\n            g: mathMin(255, mathMax(rgb.g, 0)),\r\n            b: mathMin(255, mathMax(rgb.b, 0)),\r\n            a: a\r\n        };\r\n    }\r\n\r\n\r\n    // Conversion Functions\r\n    // --------------------\r\n\r\n    // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\r\n    // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\r\n\r\n    // `rgbToRgb`\r\n    // Handle bounds / percentage checking to conform to CSS color spec\r\n    // <http://www.w3.org/TR/css3-color/>\r\n    // *Assumes:* r, g, b in [0, 255] or [0, 1]\r\n    // *Returns:* { r, g, b } in [0, 255]\r\n    function rgbToRgb(r, g, b){\r\n        return {\r\n            r: bound01(r, 255) * 255,\r\n            g: bound01(g, 255) * 255,\r\n            b: bound01(b, 255) * 255\r\n        };\r\n    }\r\n\r\n    // `rgbToHsl`\r\n    // Converts an RGB color value to HSL.\r\n    // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, l } in [0,1]\r\n    function rgbToHsl(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n\r\n            h /= 6;\r\n        }\r\n\r\n        return { h: h, s: s, l: l };\r\n    }\r\n\r\n    // `hslToRgb`\r\n    // Converts an HSL color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n    function hslToRgb(h, s, l) {\r\n        var r, g, b;\r\n\r\n        h = bound01(h, 360);\r\n        s = bound01(s, 100);\r\n        l = bound01(l, 100);\r\n\r\n        function hue2rgb(p, q, t) {\r\n            if(t < 0) t += 1;\r\n            if(t > 1) t -= 1;\r\n            if(t < 1/6) return p + (q - p) * 6 * t;\r\n            if(t < 1/2) return q;\r\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        if(s === 0) {\r\n            r = g = b = l; // achromatic\r\n        }\r\n        else {\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHsv`\r\n    // Converts an RGB color value to HSV\r\n    // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, v } in [0,1]\r\n    function rgbToHsv(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, v = max;\r\n\r\n        var d = max - min;\r\n        s = max === 0 ? 0 : d / max;\r\n\r\n        if(max == min) {\r\n            h = 0; // achromatic\r\n        }\r\n        else {\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return { h: h, s: s, v: v };\r\n    }\r\n\r\n    // `hsvToRgb`\r\n    // Converts an HSV color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n     function hsvToRgb(h, s, v) {\r\n\r\n        h = bound01(h, 360) * 6;\r\n        s = bound01(s, 100);\r\n        v = bound01(v, 100);\r\n\r\n        var i = math.floor(h),\r\n            f = h - i,\r\n            p = v * (1 - s),\r\n            q = v * (1 - f * s),\r\n            t = v * (1 - (1 - f) * s),\r\n            mod = i % 6,\r\n            r = [v, q, p, p, t, v][mod],\r\n            g = [t, v, v, q, p, p][mod],\r\n            b = [p, p, t, v, v, q][mod];\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHex`\r\n    // Converts an RGB color to hex\r\n    // Assumes r, g, and b are contained in the set [0, 255]\r\n    // Returns a 3 or 6 character hex\r\n    function rgbToHex(r, g, b, allow3Char) {\r\n\r\n        var hex = [\r\n            pad2(mathRound(r).toString(16)),\r\n            pad2(mathRound(g).toString(16)),\r\n            pad2(mathRound(b).toString(16))\r\n        ];\r\n\r\n        // Return a 3 character hex if possible\r\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\r\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\r\n        }\r\n\r\n        return hex.join(\"\");\r\n    }\r\n        // `rgbaToHex`\r\n        // Converts an RGBA color plus alpha transparency to hex\r\n        // Assumes r, g, b and a are contained in the set [0, 255]\r\n        // Returns an 8 character hex\r\n        function rgbaToHex(r, g, b, a) {\r\n\r\n            var hex = [\r\n                pad2(convertDecimalToHex(a)),\r\n                pad2(mathRound(r).toString(16)),\r\n                pad2(mathRound(g).toString(16)),\r\n                pad2(mathRound(b).toString(16))\r\n            ];\r\n\r\n            return hex.join(\"\");\r\n        }\r\n\r\n    // `equals`\r\n    // Can be called with any tinycolor input\r\n    tinycolor.equals = function (color1, color2) {\r\n        if (!color1 || !color2) { return false; }\r\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\r\n    };\r\n    tinycolor.random = function() {\r\n        return tinycolor.fromRatio({\r\n            r: mathRandom(),\r\n            g: mathRandom(),\r\n            b: mathRandom()\r\n        });\r\n    };\r\n\r\n\r\n    // Modification Functions\r\n    // ----------------------\r\n    // Thanks to less.js for some of the basics here\r\n    // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\r\n\r\n    function desaturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s -= amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function saturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s += amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function greyscale(color) {\r\n        return tinycolor(color).desaturate(100);\r\n    }\r\n\r\n    function lighten (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l += amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function brighten(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var rgb = tinycolor(color).toRgb();\r\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\r\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\r\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\r\n        return tinycolor(rgb);\r\n    }\r\n\r\n    function darken (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l -= amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\r\n    // Values outside of this range will be wrapped into this range.\r\n    function spin(color, amount) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var hue = (mathRound(hsl.h) + amount) % 360;\r\n        hsl.h = hue < 0 ? 360 + hue : hue;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Combination Functions\r\n    // ---------------------\r\n    // Thanks to jQuery xColor for some of the ideas behind these\r\n    // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\r\n\r\n    function complement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.h = (hsl.h + 180) % 360;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function triad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function tetrad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function splitcomplement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\r\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\r\n        ];\r\n    }\r\n\r\n    function analogous(color, results, slices) {\r\n        results = results || 6;\r\n        slices = slices || 30;\r\n\r\n        var hsl = tinycolor(color).toHsl();\r\n        var part = 360 / slices;\r\n        var ret = [tinycolor(color)];\r\n\r\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\r\n            hsl.h = (hsl.h + part) % 360;\r\n            ret.push(tinycolor(hsl));\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    function monochromatic(color, results) {\r\n        results = results || 6;\r\n        var hsv = tinycolor(color).toHsv();\r\n        var h = hsv.h, s = hsv.s, v = hsv.v;\r\n        var ret = [];\r\n        var modification = 1 / results;\r\n\r\n        while (results--) {\r\n            ret.push(tinycolor({ h: h, s: s, v: v}));\r\n            v = (v + modification) % 1;\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    // Utility Functions\r\n    // ---------------------\r\n\r\n    tinycolor.mix = function(color1, color2, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 50);\r\n\r\n        var rgb1 = tinycolor(color1).toRgb();\r\n        var rgb2 = tinycolor(color2).toRgb();\r\n\r\n        var p = amount / 100;\r\n        var w = p * 2 - 1;\r\n        var a = rgb2.a - rgb1.a;\r\n\r\n        var w1;\r\n\r\n        if (w * a == -1) {\r\n            w1 = w;\r\n        } else {\r\n            w1 = (w + a) / (1 + w * a);\r\n        }\r\n\r\n        w1 = (w1 + 1) / 2;\r\n\r\n        var w2 = 1 - w1;\r\n\r\n        var rgba = {\r\n            r: rgb2.r * w1 + rgb1.r * w2,\r\n            g: rgb2.g * w1 + rgb1.g * w2,\r\n            b: rgb2.b * w1 + rgb1.b * w2,\r\n            a: rgb2.a * p  + rgb1.a * (1 - p)\r\n        };\r\n\r\n        return tinycolor(rgba);\r\n    };\r\n\r\n\r\n    // Readability Functions\r\n    // ---------------------\r\n    // <http://www.w3.org/TR/AERT#color-contrast>\r\n\r\n    // `readability`\r\n    // Analyze the 2 colors and returns an object with the following properties:\r\n    //    `brightness`: difference in brightness between the two colors\r\n    //    `color`: difference in color/hue between the two colors\r\n    tinycolor.readability = function(color1, color2) {\r\n        var c1 = tinycolor(color1);\r\n        var c2 = tinycolor(color2);\r\n        var rgb1 = c1.toRgb();\r\n        var rgb2 = c2.toRgb();\r\n        var brightnessA = c1.getBrightness();\r\n        var brightnessB = c2.getBrightness();\r\n        var colorDiff = (\r\n            Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\r\n            Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\r\n            Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\r\n        );\r\n\r\n        return {\r\n            brightness: Math.abs(brightnessA - brightnessB),\r\n            color: colorDiff\r\n        };\r\n    };\r\n\r\n    // `readable`\r\n    // http://www.w3.org/TR/AERT#color-contrast\r\n    // Ensure that foreground and background color combinations provide sufficient contrast.\r\n    // *Example*\r\n    //    tinycolor.isReadable(\"#000\", \"#111\") => false\r\n    tinycolor.isReadable = function(color1, color2) {\r\n        var readability = tinycolor.readability(color1, color2);\r\n        return readability.brightness > 125 && readability.color > 500;\r\n    };\r\n\r\n    // `mostReadable`\r\n    // Given a base color and a list of possible foreground or background\r\n    // colors for that base, returns the most readable color.\r\n    // *Example*\r\n    //    tinycolor.mostReadable(\"#123\", [\"#fff\", \"#000\"]) => \"#000\"\r\n    tinycolor.mostReadable = function(baseColor, colorList) {\r\n        var bestColor = null;\r\n        var bestScore = 0;\r\n        var bestIsReadable = false;\r\n        for (var i=0; i < colorList.length; i++) {\r\n\r\n            // We normalize both around the \"acceptable\" breaking point,\r\n            // but rank brightness constrast higher than hue.\r\n\r\n            var readability = tinycolor.readability(baseColor, colorList[i]);\r\n            var readable = readability.brightness > 125 && readability.color > 500;\r\n            var score = 3 * (readability.brightness / 125) + (readability.color / 500);\r\n\r\n            if ((readable && ! bestIsReadable) ||\r\n                (readable && bestIsReadable && score > bestScore) ||\r\n                ((! readable) && (! bestIsReadable) && score > bestScore)) {\r\n                bestIsReadable = readable;\r\n                bestScore = score;\r\n                bestColor = tinycolor(colorList[i]);\r\n            }\r\n        }\r\n        return bestColor;\r\n    };\r\n\r\n\r\n    // Big List of Colors\r\n    // ------------------\r\n    // <http://www.w3.org/TR/css3-color/#svg-color>\r\n    var names = tinycolor.names = {\r\n        aliceblue: \"f0f8ff\",\r\n        antiquewhite: \"faebd7\",\r\n        aqua: \"0ff\",\r\n        aquamarine: \"7fffd4\",\r\n        azure: \"f0ffff\",\r\n        beige: \"f5f5dc\",\r\n        bisque: \"ffe4c4\",\r\n        black: \"000\",\r\n        blanchedalmond: \"ffebcd\",\r\n        blue: \"00f\",\r\n        blueviolet: \"8a2be2\",\r\n        brown: \"a52a2a\",\r\n        burlywood: \"deb887\",\r\n        burntsienna: \"ea7e5d\",\r\n        cadetblue: \"5f9ea0\",\r\n        chartreuse: \"7fff00\",\r\n        chocolate: \"d2691e\",\r\n        coral: \"ff7f50\",\r\n        cornflowerblue: \"6495ed\",\r\n        cornsilk: \"fff8dc\",\r\n        crimson: \"dc143c\",\r\n        cyan: \"0ff\",\r\n        darkblue: \"00008b\",\r\n        darkcyan: \"008b8b\",\r\n        darkgoldenrod: \"b8860b\",\r\n        darkgray: \"a9a9a9\",\r\n        darkgreen: \"006400\",\r\n        darkgrey: \"a9a9a9\",\r\n        darkkhaki: \"bdb76b\",\r\n        darkmagenta: \"8b008b\",\r\n        darkolivegreen: \"556b2f\",\r\n        darkorange: \"ff8c00\",\r\n        darkorchid: \"9932cc\",\r\n        darkred: \"8b0000\",\r\n        darksalmon: \"e9967a\",\r\n        darkseagreen: \"8fbc8f\",\r\n        darkslateblue: \"483d8b\",\r\n        darkslategray: \"2f4f4f\",\r\n        darkslategrey: \"2f4f4f\",\r\n        darkturquoise: \"00ced1\",\r\n        darkviolet: \"9400d3\",\r\n        deeppink: \"ff1493\",\r\n        deepskyblue: \"00bfff\",\r\n        dimgray: \"696969\",\r\n        dimgrey: \"696969\",\r\n        dodgerblue: \"1e90ff\",\r\n        firebrick: \"b22222\",\r\n        floralwhite: \"fffaf0\",\r\n        forestgreen: \"228b22\",\r\n        fuchsia: \"f0f\",\r\n        gainsboro: \"dcdcdc\",\r\n        ghostwhite: \"f8f8ff\",\r\n        gold: \"ffd700\",\r\n        goldenrod: \"daa520\",\r\n        gray: \"808080\",\r\n        green: \"008000\",\r\n        greenyellow: \"adff2f\",\r\n        grey: \"808080\",\r\n        honeydew: \"f0fff0\",\r\n        hotpink: \"ff69b4\",\r\n        indianred: \"cd5c5c\",\r\n        indigo: \"4b0082\",\r\n        ivory: \"fffff0\",\r\n        khaki: \"f0e68c\",\r\n        lavender: \"e6e6fa\",\r\n        lavenderblush: \"fff0f5\",\r\n        lawngreen: \"7cfc00\",\r\n        lemonchiffon: \"fffacd\",\r\n        lightblue: \"add8e6\",\r\n        lightcoral: \"f08080\",\r\n        lightcyan: \"e0ffff\",\r\n        lightgoldenrodyellow: \"fafad2\",\r\n        lightgray: \"d3d3d3\",\r\n        lightgreen: \"90ee90\",\r\n        lightgrey: \"d3d3d3\",\r\n        lightpink: \"ffb6c1\",\r\n        lightsalmon: \"ffa07a\",\r\n        lightseagreen: \"20b2aa\",\r\n        lightskyblue: \"87cefa\",\r\n        lightslategray: \"789\",\r\n        lightslategrey: \"789\",\r\n        lightsteelblue: \"b0c4de\",\r\n        lightyellow: \"ffffe0\",\r\n        lime: \"0f0\",\r\n        limegreen: \"32cd32\",\r\n        linen: \"faf0e6\",\r\n        magenta: \"f0f\",\r\n        maroon: \"800000\",\r\n        mediumaquamarine: \"66cdaa\",\r\n        mediumblue: \"0000cd\",\r\n        mediumorchid: \"ba55d3\",\r\n        mediumpurple: \"9370db\",\r\n        mediumseagreen: \"3cb371\",\r\n        mediumslateblue: \"7b68ee\",\r\n        mediumspringgreen: \"00fa9a\",\r\n        mediumturquoise: \"48d1cc\",\r\n        mediumvioletred: \"c71585\",\r\n        midnightblue: \"191970\",\r\n        mintcream: \"f5fffa\",\r\n        mistyrose: \"ffe4e1\",\r\n        moccasin: \"ffe4b5\",\r\n        navajowhite: \"ffdead\",\r\n        navy: \"000080\",\r\n        oldlace: \"fdf5e6\",\r\n        olive: \"808000\",\r\n        olivedrab: \"6b8e23\",\r\n        orange: \"ffa500\",\r\n        orangered: \"ff4500\",\r\n        orchid: \"da70d6\",\r\n        palegoldenrod: \"eee8aa\",\r\n        palegreen: \"98fb98\",\r\n        paleturquoise: \"afeeee\",\r\n        palevioletred: \"db7093\",\r\n        papayawhip: \"ffefd5\",\r\n        peachpuff: \"ffdab9\",\r\n        peru: \"cd853f\",\r\n        pink: \"ffc0cb\",\r\n        plum: \"dda0dd\",\r\n        powderblue: \"b0e0e6\",\r\n        purple: \"800080\",\r\n        rebeccapurple: \"663399\",\r\n        red: \"f00\",\r\n        rosybrown: \"bc8f8f\",\r\n        royalblue: \"4169e1\",\r\n        saddlebrown: \"8b4513\",\r\n        salmon: \"fa8072\",\r\n        sandybrown: \"f4a460\",\r\n        seagreen: \"2e8b57\",\r\n        seashell: \"fff5ee\",\r\n        sienna: \"a0522d\",\r\n        silver: \"c0c0c0\",\r\n        skyblue: \"87ceeb\",\r\n        slateblue: \"6a5acd\",\r\n        slategray: \"708090\",\r\n        slategrey: \"708090\",\r\n        snow: \"fffafa\",\r\n        springgreen: \"00ff7f\",\r\n        steelblue: \"4682b4\",\r\n        tan: \"d2b48c\",\r\n        teal: \"008080\",\r\n        thistle: \"d8bfd8\",\r\n        tomato: \"ff6347\",\r\n        turquoise: \"40e0d0\",\r\n        violet: \"ee82ee\",\r\n        wheat: \"f5deb3\",\r\n        white: \"fff\",\r\n        whitesmoke: \"f5f5f5\",\r\n        yellow: \"ff0\",\r\n        yellowgreen: \"9acd32\"\r\n    };\r\n\r\n    // Make it easy to access colors via `hexNames[hex]`\r\n    var hexNames = tinycolor.hexNames = flip(names);\r\n\r\n\r\n    // Utilities\r\n    // ---------\r\n\r\n    // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\r\n    function flip(o) {\r\n        var flipped = { };\r\n        for (var i in o) {\r\n            if (o.hasOwnProperty(i)) {\r\n                flipped[o[i]] = i;\r\n            }\r\n        }\r\n        return flipped;\r\n    }\r\n\r\n    // Return a valid alpha value [0,1] with all invalid values being set to 1\r\n    function boundAlpha(a) {\r\n        a = parseFloat(a);\r\n\r\n        if (isNaN(a) || a < 0 || a > 1) {\r\n            a = 1;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    // Take input from [0, n] and return it as [0, 1]\r\n    function bound01(n, max) {\r\n        if (isOnePointZero(n)) { n = \"100%\"; }\r\n\r\n        var processPercent = isPercentage(n);\r\n        n = mathMin(max, mathMax(0, parseFloat(n)));\r\n\r\n        // Automatically convert percentage into number\r\n        if (processPercent) {\r\n            n = parseInt(n * max, 10) / 100;\r\n        }\r\n\r\n        // Handle floating point rounding errors\r\n        if ((math.abs(n - max) < 0.000001)) {\r\n            return 1;\r\n        }\r\n\r\n        // Convert into [0, 1] range if it isn't already\r\n        return (n % max) / parseFloat(max);\r\n    }\r\n\r\n    // Force a number between 0 and 1\r\n    function clamp01(val) {\r\n        return mathMin(1, mathMax(0, val));\r\n    }\r\n\r\n    // Parse a base-16 hex value into a base-10 integer\r\n    function parseIntFromHex(val) {\r\n        return parseInt(val, 16);\r\n    }\r\n\r\n    // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\r\n    // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\r\n    function isOnePointZero(n) {\r\n        return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\r\n    }\r\n\r\n    // Check to see if string passed in is a percentage\r\n    function isPercentage(n) {\r\n        return typeof n === \"string\" && n.indexOf('%') != -1;\r\n    }\r\n\r\n    // Force a hex value to have 2 characters\r\n    function pad2(c) {\r\n        return c.length == 1 ? '0' + c : '' + c;\r\n    }\r\n\r\n    // Replace a decimal with it's percentage value\r\n    function convertToPercentage(n) {\r\n        if (n <= 1) {\r\n            n = (n * 100) + \"%\";\r\n        }\r\n\r\n        return n;\r\n    }\r\n\r\n    // Converts a decimal to a hex value\r\n    function convertDecimalToHex(d) {\r\n        return Math.round(parseFloat(d) * 255).toString(16);\r\n    }\r\n    // Converts a hex value to a decimal\r\n    function convertHexToDecimal(h) {\r\n        return (parseIntFromHex(h) / 255);\r\n    }\r\n\r\n    var matchers = (function() {\r\n\r\n        // <http://www.w3.org/TR/css3-values/#integers>\r\n        var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\r\n\r\n        // <http://www.w3.org/TR/css3-values/#number-value>\r\n        var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\r\n\r\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\r\n        var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\r\n\r\n        // Actual matching.\r\n        // Parentheses and commas are optional, but not required.\r\n        // Whitespace can take the place of commas or opening paren\r\n        var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n        var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n\r\n        return {\r\n            rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\r\n            rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\r\n            hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\r\n            hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\r\n            hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\r\n            hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\r\n            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\r\n            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\r\n        };\r\n    })();\r\n\r\n    // `stringInputToObject`\r\n    // Permissive string parsing.  Take in a number of formats, and output an object\r\n    // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\r\n    function stringInputToObject(color) {\r\n\r\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\r\n        var named = false;\r\n        if (names[color]) {\r\n            color = names[color];\r\n            named = true;\r\n        }\r\n        else if (color == 'transparent') {\r\n            return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\r\n        }\r\n\r\n        // Try to match string input using regular expressions.\r\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\r\n        // Just return an object and let the conversion functions handle that.\r\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\r\n        var match;\r\n        if ((match = matchers.rgb.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3] };\r\n        }\r\n        if ((match = matchers.rgba.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsl.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3] };\r\n        }\r\n        if ((match = matchers.hsla.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsv.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3] };\r\n        }\r\n        if ((match = matchers.hsva.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hex8.exec(color))) {\r\n            return {\r\n                a: convertHexToDecimal(match[1]),\r\n                r: parseIntFromHex(match[2]),\r\n                g: parseIntFromHex(match[3]),\r\n                b: parseIntFromHex(match[4]),\r\n                format: named ? \"name\" : \"hex8\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex6.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1]),\r\n                g: parseIntFromHex(match[2]),\r\n                b: parseIntFromHex(match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex3.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1] + '' + match[1]),\r\n                g: parseIntFromHex(match[2] + '' + match[2]),\r\n                b: parseIntFromHex(match[3] + '' + match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    window.tinycolor = tinycolor;\r\n    })();\r\n\r\n    $(function () {\r\n        if ($.fn.spectrum.load) {\r\n            $.fn.spectrum.processNativeColorInputs();\r\n        }\r\n    });\r\n\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/plugin/colorpicker/spectrum.js\n ** module id = 7\n ** module chunks = 0\n **/","/**\r\n * 图表的box\r\n * @param {object} opts {\r\n *     datas: [],\t\t\t//图表的数据\r\n *     container: Emement,\t//放在哪个容器里面\r\n *     title:{},\t\t\t//这个图表的标题，里面要包含title属性如 {title:EUR/USD,ask:1.33,bid:1.34}\r\n *     formatTitleTpl: function(title){}\t//生成title的html\r\n *     width:500,\r\n *     height:200,\r\n *     minHeight:184\r\n *     ajax: { \t\t\t\t\t\t//如果己经设置了datas，那ajax将不会起作用\r\n *     \t\turl:StringOrFunction,\t//请求url\r\n *     \t\tdata: ObjectOrFunction,\t//url后面需要带的参数\r\n *     \t\tformatDatas:@function   //ajax请求成功之后，需要处理数据然后再使用\r\n *     },\r\n *     chartOpts:{\r\n *     \t\tperiod:1,   \t\t//时间段[1min,5min,15min,30min,1Hour,1Day,1Week,1Month]\r\n\t\t\tmaxShowCount: 800,\t//图表最多显示多少个数据\r\n\t\t\tminShowCount: 20,\t//图表最小显示多少个数据\r\n\t\t\ttheme {\r\n\t\t\t\tbackgroundColor:'#2e3138',  //背景颜色\r\n\t\t\t    riseColor: '#ff0000',       //涨颜色\r\n\t\t\t    fallColor: '#3dab4b',       //跌颜色\r\n\t\t\t    normalColor: '#999',        //不涨也不跌的时候字体的颜色\r\n\t\t\t    lineStyle: 'dashed',        //画底线或者边框的样式\r\n\t\t\t    lineColor: '#21242b',       //画底线或者边框的颜色\r\n\t\t\t    lineWidth: 1,               //画底线或者边框的线的宽度\r\n\t\t\t    barWidth: 5,               //柱子的宽度\r\n\t\t\t    spaceWidth: 2,              //柱子之间的间隔宽度\r\n\t\t\t}\r\n\r\n            //区域化分  \r\n\t\t    areas: {\r\n\t\t    \t//配置整个图表都有哪些区域，这些都需要能过areaName来找到配置\r\n\t\t    \titems:['mainArea','volumeArea'],\t主区域名字不能变\r\n\t\t    \t//每个区域公共的配置\r\n\t\t    \tright:30\r\n\t\t    },\r\n\t\t    //各字自区域对应的配置\r\n\t\t    mainArea: {\r\n\t\t    \tleft: 0,\r\n\t\t    \ttop: 30, \r\n\t\t    \tbottom:0,\t\t\t\t\t//规定在主区域内，canvas离区域的距离\r\n\t\t    \ttype:'candlestick',\t\t\t//规定这个区域内画什么图表类型，目前只支持candlestick和polyline类型\r\n\t\t    \tyAxis:true,\t\t\t\t\t//是否显示y轴，这个目前只对主区域有用，其他区域暂没做测试\r\n\t\t    \thorizontalLineSpace:55,\t\t//图形区域可能需要画一些刻度线，这里表示两条水平线之间的间隔\r\n\t\t    \tsubCharts: {\t\t\t\t//这里表是在这个区域内，可能还存在的一些副图\r\n\t\t    \t\t'MA5':{\t\t\t\t\t\t//副图标识:{type:副图是什么图表类型，color,daysCount\t    \t\t\t\t\t\t\t\t\r\n\t\t    \t\t\ttype:'MA',\t\t\t\t//后面这些配置可根据不同的图表类型，配置不同\r\n\t\t    \t\t\tcolor: 'rgb(255,70,251)',\r\n\t\t    \t\t\tdaysCount: 5,\r\n\t\t    \t\t\tsort:5,\t\t\t\t\t//sort表示在主图上显示副图的tip时显示的顺序，数字越大越在后\r\n\t\t    \t\t},\r\n\t\t    \t\t'MA10':{\t\t\r\n\t\t    \t\t\ttype:'MA',\t\t\t\t\t//均线\r\n\t\t    \t\t\tcolor: 'rgb(227,150,34)',\t//线条的颜色\r\n\t\t    \t\t\tdaysCount: 10,\t\t\t\t//10日均线\r\n\t\t    \t\t\tsort:10,\t\t\t\t\t\r\n\t\t    \t\t},\r\n\t\t    \t\t'MA20':{\r\n\t\t    \t\t\ttype:'MA',\r\n\t\t    \t\t\tcolor: 'rgb(53,71,107)',\r\n\t\t    \t\t\tdaysCount: 20,\r\n\t\t    \t\t\tsort:20,\r\n\t\t    \t\t},\r\n\t\t    \t\t'MA60': {\r\n\t\t    \t\t\ttype:'MA',\r\n\t\t    \t\t\tcolor: 'rgb(0,0,0)',\r\n\t\t    \t\t\tdaysCount: 60,\r\n\t\t    \t\t\tsort:60,\r\n\t\t    \t\t}\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    volumeArea: {\t\t\t\t\t//因为在areas里配置了这个区域，所以也要有相应配置\r\n\t\t    \tleft: 0, top:30,bottom:0,\t//距离区域的距离\r\n\t\t    \ttype:'volume',\t\t\t\t//图表类型是交易量\r\n\t\t    \thorizontalLineSpace:50,\r\n\t\t    \theight: 50\t\t\t\t\t//图表的高度\t\t\t\t\r\n\t\t    },\t\r\n\t\t    subArea: {\r\n\t\t    \tleft: 0, top:30,bottom:0,\r\n\t\t    \theight: 80\r\n\t\t    },\t\r\n\t\t    xAxis: {\t\t\t\t\t\t//x轴配置\r\n\t\t    \tleft:0,top:0,bottom:0,\t\t\r\n\t\t        height: 30,\r\n\t\t\t    verticalLineSpace:100,\r\n\t\t        color:'#999',\r\n\t\t        font:'12px Arial'\r\n\t\t    },\r\n\t\t    yAxis: {\t\t\t\t\t\t//y轴配置,只有在区域里配置了yAxis为true后，才会调用这里面的配置\r\n\t\t        width: 60,\r\n\t\t        color:'#999',\r\n\t\t        lineColor: '#21242b',\r\n\t\t        font:'12px Arial'\r\n\t\t    },\r\n *     },\r\n *     callbacks: {\t\t\t\t//除图表相关之外其他位置的回调，比如点击header的回调\r\n *     \t\tonBoxTitleClick\r\n *     },\r\n *     events: {\t\t\t\t//主要是图表事件回调\r\n\t\t\tdrag: {\t\t\t\t//拖拽\r\n\t\t\t\tonDragBefore: function(){}\t\r\n\t\t\t\tonDrag: function(){}\r\n\t\t\t\tonDragAfter: function(){}\r\n\t\t\t},\r\n\t\t\twheel: {\t\t\t//鼠标滚轮\r\n\t\t\t\tstep:6,\t\t\t//鼠标每次滚动缩放的大小\r\n\t\t\t\tonBeforeWheel: function(){},\r\n\t\t\t\tonWheel: function(){}\r\n\t\t\t},\r\n\t\t\tcrossLine:{\t\t\t\t\t//鼠标移动事件\r\n\t\t\t\tlineColor:'#ccc',\t\t//移动画线是颜色\r\n\t\t\t\tbackground:'#3e4450',\t//x,y轴移动时显示数据背景颜色\r\n\t\t\t\tcolor:'#fff',\t\t\t//字体颜色\r\n\t\t\t\tfont:'12px Arial',\t\t//字体大小\r\n\t\t\t\tfollow: {\t\t\t\t//如果有这个配置，则显示移动时跟随的tip\r\n\t\t\t\t\twidth:120,\r\n\t\t\t\t\theight:160,\r\n\t\t\t\t\tmargin:20,\r\n\t\t\t\t\tdelay:1000\r\n\t\t\t\t}\r\n\t\t\t\tonCross:function(){}\t\r\n\t\t\t\tonAfterCross: function(){}\r\n\t\t\t},\r\n\r\n\t   }\r\n * }\r\n */\r\n\r\n\r\nvar $=require('jquery');\r\nvar core = require('./common.js');\r\nvar CandlestickChart = require('./CandlestickChart');\r\nvar VolumeChart = require('./VolumeChart');\r\nvar XAxisChart = require('./XAxisChart');\r\nvar PolylineChart = require('./PolylineChart');\r\nvar HollowCandleChart = require('./HollowCandleChart');\r\nvar MAChart = require('./MAChart');\r\nvar DragEvent = require('./DragEvent');\r\nvar WheelEvent = require('./WheelEvent');\r\nvar CrossLineEvent = require('./CrossLineEvent');\r\nvar RightClickEvent = require('./RightClickEvent');\r\n\r\n\r\nvar noop = function(){};\r\nvar isCanvasSuport = function(){\r\n\treturn !!document.createElement('canvas').getContext;\t\r\n}\r\nfunction Chartbox(opts) {\r\n\t\tvar defaults = {\r\n\t\t\tformatTitleTpl: function(){},\r\n\t\t\ttitle:{},\r\n\t\t\tcontainer: $(document.body),\r\n\t\t\tcallbacks: {\r\n\t\t\t\tonBoxTitleClick: noop,\r\n\t\t\t},\r\n\t\t\tajax: {\r\n\t\t\t},\r\n\t\t\tchartOpts: {\r\n\t\t\t\tperiod:1,   //时间段[1min,5min,15min,30min,1Hour,1Day,1Week,1Month]\r\n\t\t\t\tmaxShowCount: 800,\r\n\t\t\t\tminShowCount: 20,\r\n\t\t\t\ttheme: {\r\n\t\t\t\t\tbackgroundColor:'#2e3138',  //背景颜色\r\n\t\t\t\t    riseColor: '#ff0000',       //涨颜色\r\n\t\t\t\t    fallColor: '#3dab4b',       //跌颜色\r\n\t\t\t\t    normalColor: '#999',        //不涨也不跌的时候字体的颜色\r\n\t\t\t\t    lineStyle: 'dashed',        //画底线或者边框的样式\r\n\t\t\t\t    lineColor: '#21242b',       //画底线或者边框的颜色\r\n\t\t\t\t    lineWidth: 1,               //画底线或者边框的线的宽度\r\n\t\t\t\t    barWidth: 5,               //柱子的宽度\r\n\t\t\t\t    spaceWidth: 2,              //柱子之间的间隔宽度\r\n\t\t\t\t    horizontalLineOpts: {\t\t//mainArea里画价格线的默认配置\r\n\t\t\t\t    \tcolor:'#fff',\r\n\t\t\t\t    \tbgColor:'#783f04',\r\n\t\t\t\t    \tlineColor:'yellow',\r\n\t\t\t\t    \tfont:'12px Arial'\r\n\t\t\t\t    }\r\n\t\t\t\t}, \r\n\t\t\t\t//区域化分  \r\n\t\t\t    areas: {\r\n\t\t\t    \t//都有哪些区域，这些都需要能过areaName来找到配置\r\n\t\t\t    \t//items:['mainArea','volumeArea','subArea'],主区域(mainArea)名字不能变\r\n\t\t\t    \titems:['mainArea','volumeArea'],\r\n\t\t\t    \t//每个区域公共的配置\r\n\t\t\t    \tright:0\r\n\t\t\t    },\r\n\t\t\t    //各字自区域对应的配置\r\n\t\t\t    mainArea: {\r\n\t\t\t    \tleft: 0,\r\n\t\t\t    \ttop: 30, \r\n\t\t\t    \tbottom:0,\r\n\t\t\t    \ttype:'candlestick',\r\n\t\t\t    \tyAxis:true,\r\n\t\t\t    \thorizontalLineSpace:55,\r\n\t\t\t    \tsubCharts: {\r\n\t\t\t    \t\t'MA5':{\r\n\t\t\t    \t\t\ttype:'MA',\r\n\t\t\t    \t\t\tcolor: 'rgb(255,70,251)',\r\n\t\t\t    \t\t\tdaysCount: 5,\r\n\t\t\t    \t\t\tsort:5,\r\n\t\t\t    \t\t},\r\n\t\t\t    \t\t'MA10':{\r\n\t\t\t    \t\t\ttype:'MA',\r\n\t\t\t    \t\t\tcolor: 'rgb(227,150,34)',\r\n\t\t\t    \t\t\tdaysCount: 10,\r\n\t\t\t    \t\t\tsort:10,\r\n\t\t\t    \t\t},\r\n\t\t\t    \t\t'MA20':{\r\n\t\t\t    \t\t\ttype:'MA',\r\n\t\t\t    \t\t\tcolor: 'rgb(53,71,107)',\r\n\t\t\t    \t\t\tdaysCount: 20,\r\n\t\t\t    \t\t\tsort:20,\r\n\t\t\t    \t\t},\r\n\t\t\t    \t\t'MA60': {\r\n\t\t\t    \t\t\ttype:'MA',\r\n\t\t\t    \t\t\tcolor: 'rgb(0,0,0)',\r\n\t\t\t    \t\t\tdaysCount: 60,\r\n\t\t\t    \t\t\tsort:60,\r\n\t\t\t    \t\t}\r\n\t\t\t    \t},\r\n\t\t\t    \tmarketPriceLine:{show:true,label:'市价'},\r\n\t\t\t    \tlines: {}\r\n\t\t\t    },\r\n\t\t\t    volumeArea: {\r\n\t\t\t    \tleft: 0, top:30,bottom:0,\r\n\t\t\t    \ttype:'volume',\r\n\t\t\t    \thorizontalLineSpace:50,\r\n\t\t\t    \theight: 50\r\n\t\t\t    },\r\n\t\t\t    subArea: {\r\n\t\t\t    \tleft: 0, top:30,bottom:0,\r\n\t\t\t    \theight: 80\r\n\t\t\t    },\r\n\t\t\t    xAxis: {\r\n\t\t\t    \tleft:0,top:0,bottom:0,\r\n\t\t\t        height: 30,\r\n\t\t\t\t    verticalLineSpace:100,\r\n\t\t\t        color:'#999',\r\n\t\t\t        font:'12px Arial'\r\n\t\t\t    },\r\n\t\t\t    yAxis: {\r\n\t\t\t        width: 100,\r\n\t\t\t        color:'#999',\r\n\t\t\t        lineColor: '#21242b',\r\n\t\t\t        font:'12px Arial'\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t},\r\n\t\t\tevents: {\r\n\t\t\t\tdrag: {\r\n\t\t\t\t},\r\n\t\t\t\twheel: {\r\n\t\t\t\t\tstep:6,\r\n\t\t\t\t},\r\n\t\t\t\tcrossLine:{\r\n\t\t\t\t\tlineColor:'#ccc',\r\n\t\t\t\t\tbackground:'#3e4450',\r\n\t\t\t\t\tcolor:'#fff',\r\n\t\t\t\t\tfont:'12px Arial'\r\n\t\t\t\t},\r\n\t\r\n\t\t\t}\r\n\t\t};\r\n\t\t$.extend(true,this,defaults,opts);\r\n\t\tif(!this.datas&&(!this.ajax||!this.ajax.url)) {\r\n\t\t\tconsole.log('请设置数据');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(!this.container){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t\tif(!isCanvasSuport()) {\r\n\t\t\tthis.container.append('<div style=\"text-align:center;padding:20px 0\"><h1>您的浏览器不支持canvas</h1></div>');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t\tthis.chartList = {};\r\n\t\tthis.eventList = {};\r\n\t\tthis.tipList = {};\r\n\t\tthis.readyList = [];\r\n\t\tvar me = this;\r\n\t\tthis.initComplete = false;\r\n\t\tthis.init();\r\n\t\tif(this.datas) {\r\n\t\t\tthis.datas = this.formatDatas(this.datas);\r\n\t\t\tthis.initChart();\r\n\t\t\tthis.initEventsObj();\r\n\t\t\tthis.execReadyList();\r\n\t\t\tthis.initComplete = true;\r\n\t\t}else if(this.ajax) {\r\n\t\t\tvar me  = this;\r\n\t\t\tthis.ajaxData(null,null,function(datas){\r\n\t\t\t\tme.datas = datas;\r\n\t\t\t\tme.initChart();\r\n\t\t\t\tme.initEventsObj();\r\n\t\t\t\tthis.execReadyList();\r\n\t\t\t\tthis.initComplete = true;\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n}\r\n\r\nChartbox.prototype = {\r\n\tconstructor: Chartbox\r\n\t/**\r\n\t * 初始化\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,init: function(){\r\n\t\tvar me = this;\r\n\t\tif(!this.width) {\r\n\t\t\tthis.width = this.container.width();\r\n\t\t\tthis.height = this.container.height();\r\n\t\t}\r\n\t\tvar html = '<div class=\"chart-box\" style=\"height:'+this.height+'px;width:'+this.width+'px\"><div class=\"box-header\"></div><div class=\"canvas-box\">'+\r\n\t\t\t\t\t\t\t'<div class=\"chart-status\"></div>'+\r\n\t\t\t\t\t\t\t'<canvas style=\"position:absolute;top:0;left:0\"></canvas>'+\r\n\t\t\t\t\t\t\t'<div class=\"canvas-tip\" style=\"position: absolute; top:0; left:0; width:100% \"></div>'\r\n\t\t\t\t\t\t'</div></div>';\r\n\t\t\r\n\t\tthis.wrap = $(html).appendTo(this.container);\r\n\t\tvar boxHeader = this.wrap.find('.box-header');\r\n\t\tthis.boxHeader = boxHeader;\r\n\t\tthis.canvasBox = this.wrap.find('.canvas-box');\r\n\t\tthis.canvasTipEle = this.canvasBox.find('.canvas-tip');\r\n\t\tthis.canvas = this.canvasBox.find('canvas')[0];\r\n\t\tthis.statusEle = this.canvasBox.find('.chart-status');\r\n\t\tthis.headerHeight = boxHeader.outerHeight();\t//边框没算进去\r\n\t\t\r\n\t\tthis.setTitle(this.title);\r\n\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\tthis.computedSize();\r\n\r\n\t\tthis.canvasBox.css({height:this.canvas.height,width:this.canvas.width});\r\n\r\n\t\tthis.boxHeader.on('click',function(e){\r\n\t\t\tvar target = $(e.target);\r\n\t\t\tfunction stopDefault(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopDefault();\r\n\t\t\t}\r\n\t\t\tif(target.is('.win-close')){\r\n\t\t\t\tme.destroy();\r\n\t\t\t\tstopDefault(e);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(target.is('.win-big')) {\r\n\t\t\t\tme.zoomUp();\r\n\t\t\t\tstopDefault(e);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(target.is('.win-small')) {\r\n\t\t\t\tme.zoomOut();\r\n\t\t\t\tstopDefault(e);\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tme.callbacks.onBoxTitleClick.call(me,me.title);\r\n\t\t})\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * 初始化各种图表\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,initChart: function(){\r\n\t\tthis.painting = true;\r\n\t\tvar me = this, chartOpts = this.chartOpts, areas = chartOpts.areas, items = areas.items, theme = chartOpts.theme;\r\n\t\tif(chartOpts.xAxis) {\r\n\t\t\titems.push('xAxis');\r\n\t\t}\r\n\t\t//获取表的需要显示的数据\r\n\t\tme.initBackgroundGrid(true);\r\n\t\tthis.getShowDatas();\r\n\t\t\r\n\r\n\t\tfor(var i=0,len = items.length; i<len;i++) {\r\n\t\t\tvar cur = items[i];\r\n\t\t\tthis.initAreaChart(cur);\r\n\t\t\tthis.initAreaTip(cur);\r\n\t\t}\r\n\t\tthis.drawMainAreaLines();\r\n\t\tthis.painting = false;\t\r\n\r\n\t}\r\n\t/**\r\n\t * 初始化canvas背景\r\n\t * @param  {[type]} resize [是否需要重新计算各高度]\r\n\t * @return {[type]}        [description]\r\n\t */\r\n\t,initBackgroundGrid: function(resize){\r\n\t\t//画背景\r\n\t\tif(resize) {\r\n\t\t\tvar isNormal = this.computedAreaHeight();\r\n\t\t\tif(isNormal===false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar chartOpts = this.chartOpts,theme = chartOpts.theme;\r\n\t\tthis.drawBackground(this.canvas.width, this.canvas.height, theme.backgroundColor);\r\n\t\t\r\n\t\t\r\n\t\tif(chartOpts.yAxis&&chartOpts.yAxis.width) {\r\n\t\t\tvar width = this.mainRegionWidth + chartOpts.areas.right;\r\n\t\t\tcore.drawVLine(this.ctx, theme.lineColor, width, 0, this.canvas.height,'solid');\r\n\t\t}\r\n\t\tvar chartOpts = this.chartOpts, areas = chartOpts.areas, items = areas.items, theme = chartOpts.theme;\r\n\t\tvar top=0,left=0;\r\n\t\tfor(var i=0,len = items.length; i<len;i++) {\r\n\t\t\tvar cur = items[i];\r\n\t\t\tvar opts = chartOpts[cur];\r\n\t\t\tif(i!==0) {\r\n\t\t\t\tcore.drawHLine(this.ctx, theme.lineColor, left, top,this.canvas.width,'solid');\r\n\t\t\t}\r\n\t\t\tvar bottom = opts.bottom||0\r\n\t\t\ttop += (opts.top||0)+(bottom+1);\r\n\t\t\ttop += opts.height;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t/**\r\n\t * 画背景\r\n\t */\r\n\t,drawBackground: function(width, height, backgroundColor){\r\n\t\tvar ctx = this.ctx;\r\n\t\tctx.clearRect(0,0,width,height);\r\n\t\tif(backgroundColor) {\r\n            ctx.beginPath();\r\n            ctx.fillStyle = backgroundColor;\r\n            ctx.rect(0, 0, width, height);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n        }\r\n\t}\r\n\r\n\t,computedSize: function(){\r\n\t\tvar computedHeight = this.height - this.headerHeight;\t\r\n\t\tvar computedWidth = this.width-2;\r\n\t\tthis.canvas.height = computedHeight;\r\n\t\tthis.canvas.width  = computedWidth;\r\n\t}\r\n\r\n\t//计算各区域的高度，有可能主屏高度是没有配置的，默认第一个是主图，除主图外所以的图没有高度默认80好了\r\n\t,computedAreaHeight: function(){\r\n\t\tvar chartOpts = this.chartOpts, areas = chartOpts.areas, items = areas.items;\r\n\t\t//y轴区域\r\n\t\tvar mainRegionWidth=0;\r\n\t\tif(chartOpts.yAxis&&chartOpts.yAxis.width) {\r\n\t\t\tmainRegionWidth = this.canvas.width - chartOpts.yAxis.width;\t\t\t\r\n\t\t}\r\n\t\tif(chartOpts.areas.right) {\r\n\t\t\tmainRegionWidth = mainRegionWidth - chartOpts.areas.right;\r\n\t\t}\r\n\t\tthis.mainRegionWidth = mainRegionWidth;\r\n\r\n\t\t//其他区域\r\n\t\tvar mainAreaHeight = 0,usedHeight=0,mainAreaKeyName;\r\n\t\t\r\n\t\tfor(var i=0,len = items.length; i<len;i++) {\r\n\t\t\tvar cur = items[i], opts = chartOpts[cur];\r\n\t\t\tif(!opts) {\r\n\t\t\t\tthrow new Error('没有设置'+cur+\"区域的配置\");\r\n\t\t\t}\r\n\t\t\tchartOpts[cur].width = this.mainRegionWidth;\r\n\t\t\tvar top = opts.top||0,bottom = opts.bottom||0;\r\n\t\t\t\r\n\t\t\tif(i==0) {\r\n\t\t\t\tmainAreaKeyName = cur;\r\n\t\t\t\tusedHeight += top + bottom;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\topts.height = opts.height||80;\r\n\t\t\tusedHeight += top + opts.height + bottom;\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\tchartOpts[mainAreaKeyName].height = this.canvas.height - usedHeight;\r\n\t\t\r\n\r\n\t\ti=0;\r\n\t\tusedHeight = 0;\r\n\t\tfor(var i=0,len = items.length; i<len;i++) {\r\n\t\t\tvar cur = items[i], opts = chartOpts[cur];\r\n\t\t\tchartOpts[cur].x = 0;\r\n\t\t\tchartOpts[cur].y  = usedHeight;\r\n\t\t\tchartOpts[cur].margin  = chartOpts.areas.right;\r\n\t\t\tvar bot = opts.bottom||0\r\n\t\t\tusedHeight +=(opts.top||0) + opts.height + (bot+1);\r\n\t\t}\r\n\t}\r\n\r\n\t//生成区域对应的图表\r\n\t,initAreaChart: function(areaName) {\r\n\t\tvar opts = this.chartOpts[areaName];\r\n\t\tif(areaName=='xAxis') {\r\n\t\t\topts.type  = 'xAxis';\r\n\t\t}\r\n\t\tif(!opts.type) {\r\n\t\t\tthrow new Error('请设置'+areaName+'区域的图表类型');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//opts.width = this.mainRegionWidth;\r\n\r\n\t\tif(opts.subItem&&!opts.hasInit) {\r\n\t\t\tfor(var chart in opts.subItem) {\r\n\t\t\t\tthis.chartList[areaName]\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar type = opts.type.toString().toLowerCase();\r\n\t\tvar chartObj = this.chartObjFactory(type,areaName);\r\n\t\tif(chartObj) {\r\n\t\t\tthis.chartList[areaName] = chartObj;\r\n\t\t\tchartObj.painter();\r\n\t\t}\r\n\r\n\t\tif(opts.yAixs) {\r\n\t\t\tvar yAixsChart = this.chartObjFactory('yaixs',areaName);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t,changeAreaChart: function(areaName,opts) {\r\n\t\tvar oldOpts = this.chartOpts[areaName];\r\n\t\tif(!oldOpts) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdelete oldOpts.high;\r\n\t\tdelete oldOpts.low;\r\n\t\tif(opts) {\r\n\t\t\t$.extend(oldOpts,opts);\r\n\t\t\tthis.chartOpts[areaName] = oldOpts;\r\n\t\t}\r\n\t\tvar height = oldOpts.height+oldOpts.top+oldOpts.bottom;\r\n\t\tvar theme = this.chartOpts.theme;\r\n\t\tthis.drawBackground(this.width,height, theme.backgroundColor);\r\n\t\tcore.drawVLine(this.ctx, theme.lineColor, this.mainRegionWidth+oldOpts.margin, oldOpts.y, height,'solid');\r\n\t\t\r\n\r\n\t\tthis.initAreaChart(areaName);\r\n\r\n\t}\r\n\t,initAreaTip: function(areaName) {\r\n\t\tvar opts = this.chartOpts[areaName];\r\n\t\tif(!opts||areaName=='xAxis') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar index = this.showDatas.length-1;\r\n\t\tvar tip = this.getAreaTip(areaName,index);\r\n\t\tif(tip) {\r\n\t\t\tthis.tipList[areaName] = $('<div class=\"area-tip\" style=\"position:absolute; left:0; top:'+(opts.y+2)+'px;\" >'+tip+'</div>').appendTo(this.canvasTipEle);\r\n\t\t}\r\n\t}\r\n\r\n\t,getAreaTip: function(areaName,index,follow) {\r\n\t\tvar chartList = this.chartList;\r\n\t\tvar tip='';\r\n\t\tif(chartList[areaName]) {\r\n\t\t\ttip += chartList[areaName].getTip(index,follow);\r\n\t\t\tvar areaSubItem = chartList[areaName+\"subItem\"];\r\n\t\t\tif(areaSubItem&&areaSubItem.getTip) {\r\n\t\t\t\ttip += areaSubItem.getTip.call(areaSubItem,index,follow);\r\n\t\t\t}\r\n\t\t\tvar chartSubItem = chartList[areaName].subItem;\r\n\t\t\tif(chartSubItem&&chartSubItem.getTip) {\r\n\t\t\t\ttip += chartSubItem.getTip.call(chartSubItem,index,follow);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn tip;\r\n\t}\r\n\r\n\t,initEventsObj: function(){\r\n\t\tif(!this.events) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar canvas = $('<canvas style=\"position:absolute; top:0; left: 0;\" width=\"'+this.canvas.width+'\" height=\"'+this.canvas.height+'\"></canvas>').insertBefore(this.canvasTipEle);\r\n\t\tthis.eventsCanvas = canvas[0];\r\n\r\n\r\n\t\tif(this.events.drag) {\r\n\t\t\tthis.eventList['drag'] = new DragEvent(this.eventsCanvas,this);\r\n\t\t}\r\n\r\n\t\tif(this.events.wheel) {\r\n\t\t\tthis.eventList['wheel'] = new WheelEvent(this.eventsCanvas,this);\r\n\t\t}\r\n\r\n\t\tif(this.events.crossLine) {\r\n\t\t\tthis.eventList['crossLine'] = new CrossLineEvent(this.eventsCanvas,this);\r\n\t\t}\r\n\r\n\t\tif(this.events.rightClick) {\r\n\t\t\tthis.eventList['rightClick'] = new RightClickEvent(this.eventsCanvas,this);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t,execReadyList: function(){\r\n\t\twhile(this.readyList.length) {\r\n\t\t\tvar fn = this.readyList.shift();\r\n\t\t\tfn&&fn();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 各种不同种类的chart工厂方法\r\n\t * @param  {[string]}  type      [插入类型]\r\n\t * @param  {[string]}  areaName  [所在的区域名称]\r\n\t * @param  {[boolean]} subId [是否是所以区域里的子chart]\r\n\t * @return {[object]}            [返回生成的对象]\r\n\t */\r\n\t,chartObjFactory: function(type,areaName,subId){\r\n\t\tvar chartObj;\r\n\t\tvar type = type.toString().toLowerCase();\r\n\t\tswitch(type) {\r\n\t\t\tcase 'candlestick':\r\n\t\t\t\tchartObj = new CandlestickChart(areaName, this, subId);\r\n\t\t\tbreak;\r\n\t\t\tcase 'hollowcandle':\r\n\t\t\t\tchartObj = new HollowCandleChart(areaName, this, subId);\r\n\t\t\tbreak;\r\n\t\t\tcase 'polyline':\r\n\t\t\t\tchartObj = new PolylineChart(areaName, this, subId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'volume':\r\n\t\t\t\tchartObj = new VolumeChart(areaName, this, subId);\r\n\t\t\tbreak;\r\n\t\t\tcase 'xaxis':\r\n\t\t\t\tchartObj = new XAxisChart(areaName, this, subId);\r\n\t\t\tbreak;\r\n\t\t\tcase 'ma':\r\n\t\t\t\tchartObj = new MAChart(areaName,this, subId);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn chartObj;\r\n\t}\r\n\t/**\r\n\t * 计算当前所在图表需要显示数据在所在数据里面的索引\r\n\t * @return {[obj]} [显示数据的起始索引]\r\n\t */\r\n\t,calcDataRanges: function(){\r\n\t\tvar chartOpts  = this.chartOpts, theme = chartOpts.theme, datas = this.datas;\r\n\t\tvar needResetBarWidth = this.zoom, maxDataLength = datas.length, totalWidth = this.mainRegionWidth;\r\n\t\tif(this.dataRanges == null) {\r\n            //计算dataRanges\r\n            var dataCount = Math.ceil(totalWidth / (theme.spaceWidth + theme.barWidth));\r\n            if (dataCount > maxDataLength){\r\n                dataCount = maxDataLength;\r\n                needResetBarWidth = true;\r\n            };\r\n            this.dataRanges = {\r\n                start: maxDataLength - dataCount,\r\n                to: maxDataLength -1,\r\n            };\r\n        }\r\n\r\n\r\n        //检查dataRanges是否合理\r\n        var startIndex = this.dataRanges.start, toIndex = this.dataRanges.to;\r\n        var itemsCount = this.dataRanges.to - this.dataRanges.start+1;\r\n        var minShowCount = chartOpts.minShowCount,maxShowCount = chartOpts.maxShowCount;\r\n\r\n        /*var tempDataRanges = this.checkDataRanges();\r\n        var tempCount = tempDataRanges.to - tempDataRanges.start +1;\r\n\r\n        if(tempCount!==itemsCount) {\r\n        \tneedResetBarWidth = true;\r\n        \titemsCount =tempCount;\r\n        }*/\r\n\r\n        if(needResetBarWidth) {\r\n            var spaceWidth,barWidth;\r\n            var perWidth = this.mainRegionWidth/itemsCount;\r\n            barWidth = Math.ceil(perWidth*2/3);\r\n            barWidth = barWidth >= perWidth ? perWidth: barWidth;\r\n            if(barWidth<=2) {\r\n                spaceWidth = 0;\r\n            }else {\r\n                spaceWidth = perWidth - barWidth;\r\n            }\r\n            spaceWidth = perWidth - barWidth;\r\n            chartOpts.theme.barWidth = barWidth;\r\n            chartOpts.theme.spaceWidth = spaceWidth;\r\n            \r\n            this.zoom = false;\r\n        }\r\n\r\n        return this.dataRanges;\r\n\t}\r\n\t,checkDataRanges: function(dataRanges){\r\n\t\tvar dataRanges = dataRanges||this.dataRanges;\r\n\t\tvar startIndex = dataRanges.start,toIndex = dataRanges.to;\r\n        var itemsCount = toIndex - startIndex + 1;\r\n\r\n        var start = startIndex,to = toIndex, chartOpts = this.chartOpts, maxDataLength = this.datas.length;\r\n        var minShowCount = chartOpts.minShowCount,maxShowCount = chartOpts.maxShowCount;\r\n        //处理临界值，主要是拖拽\r\n        if( to< minShowCount) {\r\n        \tto = minShowCount -1;\r\n        \tstart = to - itemsCount;\r\n        }else if(start > maxDataLength - minShowCount){\r\n        \tstart = maxDataLength - minShowCount;\r\n        \tto = start + itemsCount -1;\r\n        }        \r\n        //处理是否显示在最大个数与最小个数之间,主要是缩放\r\n        \r\n        if(itemsCount<minShowCount) {\r\n        \tstart = to - (minShowCount-1)\r\n        }\r\n        if(itemsCount > maxShowCount) {\r\n        \tstart = to - (maxShowCount-1)\r\n        }                \r\n        return {start: start,to :to}\r\n\t}\r\n\t/**\r\n\t * 跟据起始索引得到显示在图表上的数据\r\n\t * @return {[Array]}      [返回数据数组]\r\n\t */\r\n\t,getShowDatas: function(){\r\n\t\tif(!this.dataRanges||this.zoom) {\r\n\t\t\tthis.calcDataRanges();\r\n\t\t}\r\n\t\tvar dataRanges = this.dataRanges, datas = this.datas, maxDataLength = datas.length,totalWidth = this.mainRegionWidth;\r\n\t\tvar filteredData = [];\r\n\t\tfor(var i=dataRanges.start; i<=dataRanges.to; i++) {\r\n\t\t\tif(i < 0||i>maxDataLength-1) {\r\n\t\t\t\tfilteredData.push(false);\r\n\t\t\t}else {\r\n\t\t\t\tfilteredData.push(datas[i]);\r\n\t\t\t}\r\n\t\t}\r\n        this.showDatas = filteredData;\r\n\t}\r\n\t,calcAreaDataValueRange: function(areaName){\r\n\t\tvar datas = this.showDatas;\r\n        var opts = this.chartOpts[areaName];\r\n        var high,low,dotLen=3;\r\n        for(var line in opts.lines) {\r\n            var cur = opts.lines[line];\r\n            high = high ? Math.max(cur.value,high) : cur.value;\r\n            low = low ? Math.min(cur.value,low) : cur.low;\r\n        }\r\n        for(var i=0,len = datas.length;i<len;i++) {\r\n            var val = datas[i];\r\n            if(val) {\r\n                high = high ? Math.max(val.high, high) : val.high;\r\n                low = low ? Math.min(low, val.low) : val.low;\r\n                var highStr = val.high.toString(), highDotLen = highStr.length - highStr.indexOf('.') -1;\r\n                dotLen = Math.max(highDotLen,dotLen);\r\n            }\r\n        }\r\n        this.chartOpts[areaName].high = high;\r\n        this.chartOpts[areaName].low = low;\r\n        if(!this.chartOpts[areaName].length){\r\n            this.chartOpts[areaName].dotLen = dotLen\r\n        }\r\n\t}\r\n\r\n\t//这四个方法由于设计上的缺陷，现没有办法更好的优化了，不应该放到这个对象里的，应该放到Area【新建】对象里\r\n\t,drawMainAreaLines: function(isDrawMarketPrice){\r\n\t\tvar isDraw = isDrawMarketPrice;\r\n\t\tvar mainAreaOpts = this.chartOpts.mainArea;\r\n\t\tif(isDraw!==false){\r\n\t\t\t\r\n\t\t\tif(mainAreaOpts.marketPriceLine&&mainAreaOpts.marketPriceLine.show) {\r\n\t\t\t\tthis.drawMainAreaLine('marketPrice',{'label':'市价'})\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar lines = mainAreaOpts.lines||{};\r\n\t\tfor(var line in lines) {\r\n\t\t\tvar opts = lines[line];\r\n\t\t\tthis.drawMainAreaLine(line,opts);\r\n\t\t}\r\n\t}\r\n\t,drawMainAreaLine: function(key,lineOpts){\r\n\t\tvar defaultOpts = this.chartOpts.theme.horizontalLineOpts,ctx = this.ctx;\r\n\t\tvar opts = $.extend({},defaultOpts,lineOpts);\r\n\t\tif(key=='marketPrice') {\r\n\t\t\tvar latestData = this.datas[this.datas.length-1]\r\n\t\t\topts.value = latestData.close;\r\n\t\t\tvar color = this.getColor(latestData.close,latestData.open);\r\n\t\t\tif(!color) {\r\n\t\t\t\tcolor = defaultOpts.bgColor;\r\n\t\t\t}\r\n\t\t\topts.lineColor = opts.bgColor = color;\r\n\t\t}\r\n\t\t\r\n\t\tif(!opts.value) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//得到y轴的坐标\r\n\t\tvar y = this.getYByValue(opts.value,'mainArea');\r\n\t\tif(!y) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar mainAreaOpts = this.chartOpts.mainArea;\r\n\t\tctx.save();\r\n\t\tctx.translate(mainAreaOpts.left,mainAreaOpts.top);\r\n\r\n\t\t//画线\r\n\t\tvar w = this.mainRegionWidth +this.chartOpts.areas.right;\r\n\t\tcore.drawHLine(this.ctx,opts.lineColor, 0, y, w, 'dashed');\r\n\t\t//画Y轴的数据\r\n\t\tvar yAxisWidth = this.chartOpts.yAxis.width;\r\n\t\tctx.fillStyle = opts.bgColor;\r\n\t\tctx.fillRect(w+1, y-10, yAxisWidth, 20);\r\n\t\tctx.strokeStyle = this.chartOpts.theme.lineColor;\r\n\t\tctx.strokeRect(w+1, y-10, yAxisWidth, 20);\r\n\t\tctx.fillStyle = opts.color;\r\n\t\tctx.font = opts.font;\r\n\t\tvar text = core.toMoney(opts.value,mainAreaOpts.dotLen);\r\n\t\tctx.fillText(text,w+7, y+5);\r\n\t\tif(opts.label) {\r\n\t\t\tctx.textAlign = 'end';\r\n\t\t\tctx.fillText(opts.label,this.canvas.width-5,y+5);\r\n\t\t}\r\n\t\t\r\n\t\tthis.ctx.restore();\r\n\t}\r\n\t,setMainAreaLines: function(){\r\n\t\tvar args = arguments;\r\n\t\tif(args.length==1) {\r\n\t\t\tthis.chartOpts.mainArea.lines = args[0]\r\n\t\t}else if(args.length==2) {\r\n\t\t\tvar lines = this.chartOpts.mainArea.lines||{};\r\n\t\t\tif(!args[1]) return false;\r\n\t\t\tvar key = args[0],opts = args[1];\r\n\t\t\tif(lines.key) {\r\n\t\t\t\tdelete lines.key\r\n\t\t\t}\r\n\t\t\tlines[key] = opts;\r\n\t\t}\t\r\n\t\t\r\n\t}\r\n\t,deleteMainAreaLine: function(key){\r\n\t\tvar lines = this.chartOpts.mainArea.lines;\r\n\t\tif(key) {\r\n\t\t\tdelete this.chartOpts.mainArea.lines[key]\r\n\t\t}else{\r\n\t\t\tthis.chartOpts.mainArea.lines = {}\r\n\t\t}\r\n\t}\r\n\t//end\r\n\t/**\r\n\t * 画图，初始化的时候不需要\r\n\t * @param  {[object]} dataRanges [数据范围]\r\n\t * @param  {[object]} opts       [需要重置的配置，或者回调函数]\r\n\t * @param  {[boolean]} resize     [是否需要重新计算size]\r\n\t * @return {[type]}            [description]\r\n\t */\r\n\t,painter: function(dataRanges,opts,resize) {\r\n\t\tvar args = arguments;\r\n\t\tif(this.painting==true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(dataRanges) {\r\n\t\t\tvar tempRanges  = this.checkDataRanges(dataRanges);\r\n\t\t\tif(this.dataRanges.to ==tempRanges.to&& this.dataRanges.start == tempRanges.start) {\r\n\t\t\t\treturn false;\r\n\t\t\t}else {\r\n\t\t\t\tthis.dataRanges = tempRanges;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar callback;\r\n\t\tif($.type(args[1])=='object') {\r\n\t\t\tthis.chartObj = $.extend(true,this.chartObj,opts);\r\n\t\t}else if($.type(args[1])=='function') {\r\n\t\t\tcallback = args[1];\r\n\t\t}\r\n\r\n\t\tthis.painting = true;\r\n\t\tthis.initBackgroundGrid(resize);\r\n\t\t//重新计算需要显示的数据\r\n\t\tthis.getShowDatas();\r\n\r\n\t\tvar chartList = this.chartList;\r\n\t\tfor(var chart in chartList) {\r\n\t\t\tchartList[chart].painter();\r\n\t\t}\r\n\t\tthis.drawMainAreaLines();\r\n\t\tthis.painting = false;\r\n\t\tcallback&&callback();\r\n\t}\r\n\r\n\t/**\r\n\t * 当painter.start<0自动去加载数据\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,autoLoadData: function(){\r\n\t\tvar me = this,datas = me.datas, len = datas.length, dataRanges = this.dataRanges;\r\n\t\tif(dataRanges.start>=0&&dataRanges.to<len){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar autoTime = this.autoTimestamp;\r\n\t\tvar now = +new Date();\r\n\t\tif( !autoTime||now - autoTime >1000) {\r\n\t\t\tif(dataRanges.start < 0) {\r\n\t\t\t\tvar startX = me.datas[0]['quoteTime'];\r\n\t\t\t\tme.ajaxData(null ,startX, function(datas){\r\n\t\t\t\t\tme.appendDatas(datas,-1);\r\n\t\t\t\t\tme.painter();\r\n\t\t\t\t})\r\n\t\t\t}else if(dataRanges.to > me.datas.length-1) {\r\n\t\t\t\tvar endX = me.datas[me.datas.length-1]['quoteTime'];\r\n\t\t\t\tme.ajaxData(endX, null, function(datas){\r\n\t\t\t\t\tme.appendDatas(datas,1);\r\n\t\t\t\t\tme.painter();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.autoTimestamp = now;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * 添加数据\r\n\t * @param  {[Array]} datas [需要添加数据]\r\n\t * @param  {[int ]} dir   [-1：向左添加 1：向右添加]\r\n\t * @return {[type]}       [description]\r\n\t */\r\n\t,appendDatas: function(datas,dir) {\r\n\t\tvar dataRanges = this.dataRanges, start = dataRanges.start, to = dataRanges.to;\r\n\t\tvar count = datas.length;\r\n\t\tif(dir==-1||start < 0) {\r\n\t\t\tArray.prototype.unshift.apply(this.datas,datas);\r\n\t\t\tthis.dataRanges = {start: start+count, to: to+count};\r\n\t\t\tfor(var event in this.eventList) {\r\n\t\t\t\tif(this.eventList[event].dataRanges) {\r\n\t\t\t\t\tthis.eventList[event].dataRanges = this.dataRanges;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(dir==1||to > this.datas.length-1) {\r\n\t\t\tArray.prototype.push.apply(this.datas,datas);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 使用ajax去加载数据\r\n\t * @param  {[timestamp]} startX     [开始时间,返回这个时间之后的1000条数据，包括他本身]\r\n\t * @param  {[timestamp]} endX       [结束时间,返回这个时间之前的1000条数据，包括他本身]\r\n\t * @param  {[function]} callbackFn  [回调函数]\r\n\t * @param  {[boolean]}  isFormat  \t[是否格式化返回回来的数据,为false才不格式化]\r\n\t * @return {[undefined]}            [description]\r\n\t */\r\n\t,ajaxData: function(startX,endX,callbackFn,isFormat,showLoading){\r\n\t\tvar ajax = this.ajax;\r\n\t\tif(!ajax&&!ajax.url) {\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\tif(this.ajaxing) {\r\n\t\t\treturn ;\r\n\t\t}\r\n\r\n\t\tif(startX && startX==this.maxTimestamp) {\r\n\t\t\tcallbackFn&&callbackFn.call(me,[]);\r\n\t\t\treturn ;\r\n\t\t}else if(endX && this.hasNoLeftData ){\r\n\t\t\tcallbackFn&&callbackFn.call(me,[]);\r\n\t\t\treturn ;\r\n\t\t}\r\n\r\n\r\n\t\tvar me = this;\r\n\t\tthis.ajaxing = true;\r\n\t\tif(showLoading!==false){\r\n\t\t\tthis.statusEle.html('<span class=\"chart-icon chart-load\"></span><span class=\"chart-text\">正在加载数据。。。</span>')\r\n\t\t}\r\n\r\n\t\tvar url = ajax.url;\r\n\t\tif($.type(url)=='function') {\r\n\t\t\turl = url.call(me);\r\n\t\t}\r\n\t\t\r\n\t\tvar data = {};\r\n\t\tif($.type(ajax.data)=='object') {\r\n\t\t\tdata = ajax.data;\r\n\t\t}else if($.type(ajax.data)=='function') {\r\n\t\t\tdata = ajax.data.call(me, startX, endX );\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: url,\r\n\t\t\tdata: data,\r\n\r\n\t\t}).done(function(response){\r\n\t\t\tme.ajaxing  = false;\r\n\t\t\tvar data = response;\r\n\t\t\tif( ajax.formatDatas && $.type(ajax.formatDatas)=='function' ) {\r\n\t\t\t\tdata = ajax.formatDatas.call(me,response);\r\n\t\t\t}\r\n\t\t\tif(!data) {\r\n\t\t\t\terror()\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!data.length) {\r\n\t\t\t\tif(endX) {me.hasNoLeftData = true}\r\n\t\t\t\terror()\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(me.datas) {\r\n\t\t\t\tvar currDatas = me.datas;\r\n\t\t\t\t//说明往左加载数据，最后一个数据可能需要去重，因为返回的数据是双闭合状态，也有可能不是，返回现在情部用的是双闭合\r\n\t\t\t\tif(endX) {\r\n\t\t\t\t\tvar lastData = data[data.length-1];\r\n\t\t\t\t\tif(lastData[0]==currDatas[0]['quoteTime']) {\r\n\t\t\t\t\t\tdata.pop();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//表明左侧数据己经没有可以加载的了\r\n\t\t\t\t\tif(data.length==0) {\r\n\t\t\t\t\t\tme.hasNoLeftData = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(startX) {\r\n\t\t\t\t\tvar firstTime = data[0][0];\r\n\t\t\t\t\tif(firstTime == currDatas[currDatas.length-1]) {\r\n\t\t\t\t\t\tdata.shift();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!data.length) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(isFormat!==false) {\r\n\t\t\t\tdata = me.formatDatas(data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcallbackFn&&callbackFn.call(me,data);\r\n\t\t\terror();\r\n\r\n\t\t}).fail(function(){\r\n\t\t\tme.ajaxing = false;\r\n\t\t\tme.statusEle.html('请求数据失败');\r\n\t\t\tme.errorTimer&&clearTimeout(me.errorTimer);\r\n\t\t\tme.errorTimer = setTimeout(function(){\r\n\t\t\t\terror();\r\n\t\t\t},1000)\r\n\t\t\treturn false;\r\n\t\t})\r\n\r\n\t\tfunction error(){\r\n\t\t\tme.statusEle.html('');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 跟据x轴的坐标获取对应数据的index和正确的x轴坐标,这里的对应数据是显示数据，不是总数据\r\n\t * @param  {[float]} x [x轴坐标，当然是相对值 ]\r\n\t * @return {[type]}   [description]\r\n\t */\r\n\t,adjustX: function(x){\r\n\t\tif(x > this.mainRegionWidth) {\r\n\t\t\tx = this.mainRegionWidth;\r\n\t\t}\r\n\t\tvar dataCount = this.showDatas.length;\r\n\t\tvar index = Math.ceil((dataCount)*x/this.mainRegionWidth);\r\n\t\tindex = index==0 ? 0 : index-1;\r\n\t\tvar xPos = core.getXByShowDataIndex(index,this.chartOpts.theme.barWidth,this.chartOpts.theme.spaceWidth);\r\n\t\treturn {index:index, x: xPos };\r\n\t}\r\n\t,getXByValue: function(value){\r\n\t\tvar showDatas = this.showDatas;\r\n\t\tvar data = [],max=0,min=0,index,xPos;\r\n\t\tfor(var i=0,len = showDatas.length;i<len;i++) {\r\n\t\t\tvar cur = showDatas[i];\r\n\t\t\tif(!cur) continue;\r\n\t\t\tif(cur.quoteTime==value) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(index) {\r\n\t\t\txPos = core.getXByShowDataIndex(index,this.chartOpts.theme.barWidth,this.chartOpts.theme.spaceWidth);\r\n\t\t}\r\n\t\treturn {index:index,x:xPos}\r\n\t}\r\n\t,getYByValue: function(value,areaName,isTotal) {\r\n        var charOpts = this.chartOpts, opts = charOpts[areaName];\r\n        var high = opts.high,low  = opts.low,ret;\r\n        var value = parseFloat(value);\r\n        if(value >= low && value <=high) {\r\n            ret = core.getRelativeYByShowDataValue(value, high, low, opts.height);\r\n            if(ret<=opts.height) {\r\n\t\t\t\tif(isTotal) {\r\n\t                ret +=opts.y+opts.top;\r\n\t            }\r\n            }else {\r\n            \tret=null;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\t/**\r\n\t * 根据传递的值，比较大小返回对应使用的颜色\r\n\t * @param  {[float]} referVal [需要对比的值]\r\n\t * @param  {[float]} target   [对比值]\r\n\t * @return {[string]}         [是riseColor还是fallColor]\r\n\t */\r\n\t,getColor: function(referVal,target){\r\n        var fallColor = this.chartOpts.theme.fallColor, riseColor = this.chartOpts.theme.riseColor, color='';\r\n        if(referVal > target) {\r\n            color = fallColor;\r\n        }else if(referVal < target) {\r\n            color = riseColor;\r\n        }\r\n        return color;\r\n    }\r\n\r\n\t/**\r\n\t * 改变title\r\n\t * @param {[type]} title [description]\r\n\t */\r\n\t,setTitle: function(title) {\r\n\t\tvar title = title,ret;\r\n\t\tif(typeof title=='string'){\r\n\t\t\tret = title;\r\n\t\t}else if(typeof title=='object') {\r\n\t\t\tif(!this.formatTitleTpl) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tret = this.formatTitleTpl(title);\r\n\t\t}\r\n\t\tthis.boxHeader.html(ret);\r\n\t}\r\n\r\n\t/**\r\n\t * 从时间得到此时间在数据集合里的index\r\n\t * @param  {[type]} time [时间]\r\n\t * @param  {[type]} dir  \r\n\t *         如果是向右拉，则是向左边请求值即请求时间较小的值，那么这时的dir是-1，反之为1。\r\n\t *         因为这个时间可能是datas里不是存在的，只能得到这个时间在数据集里最近在两个值的index，\r\n\t *         这个时候需要你要取左边的值还是右边的值\r\n\t * @return {[int]}      [在数据集里的index]\r\n\t */\r\n\t,getXIndexByTime: function(time,dir){\r\n\t\tvar datas = this.datas;\r\n\t\tvar upper = datas.length-1;\r\n\t\tvar lower = 0, mid;\r\n\t\tvar retIndex = -1;;\r\n\t\tvar min = datas[0].quoteTime, max = datas[upper].quoteTime;\r\n\t\tvar start = this.dataRanges.start, to = this.dataRanges.to;\r\n\t\t//当前显示的\r\n\t\tif(start >= lower){\r\n\t\t\tvar startMin = datas[start].quoteTime;\r\n\t\t\tif(time >=startMin) {\r\n\t\t\t\tlower = start;\r\n\t\t\t\tmin = startMin;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(to <= upper) {\r\n\t\t\tvar toMax = datas[to].quoteTime;\r\n\t\t\tif(time <=toMax) {\r\n\t\t\t\tupper = to;\r\n\t\t\t\tmax = toMax;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(time==min) {\r\n\t\t\tretIndex = lower;\r\n\t\t}else if(time==max) {\r\n\t\t\tretIndex = upper;\r\n\t\t}else  {\r\n\t\t\twhile(upper-lower>1) {\r\n\t\t\t\tmid = Math.floor((upper+lower)/2);\r\n\t\t\t\tif(datas[mid].quoteTime < time) {\r\n\t\t\t\t\tlower  = mid +1;\r\n\t\t\t\t}else if(datas[mid].quoteTime > time) {\r\n\t\t\t\t\tupper = mid -1;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tretIndex = mid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(retIndex==-1) {\r\n\t\t\t\tretIndex = dir ? upper : upper-1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn retIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * 使用ajax同步X轴\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,synchronizeX: function(time,dir,barWidth,spaceWidth){\r\n\t\tvar minTime = this.datas[0].quoteTime, maxTime = this.datas[this.datas.length-1].quoteTime;\r\n\t\tvar me = this;\r\n\t\tif(typeof time=='object') {\r\n\t\t\tthis.painter(time,function(){\r\n\t\t\t\tme.autoLoadData();\r\n\t\t\t})\r\n\t\t}else if(time <minTime) {\r\n\t\t\t//指定时间比当前值小\r\n\t\t\tme.ajaxData(null,minTime,function(datas){\r\n\t\t\t\tif(datas.length) {\r\n\t\t\t\t\tme.appendDatas(datas,-1);\r\n\t\t\t\t\tme.synchronizeX(time,dir,barWidth,spaceWidth);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tme.synchronizeX(minTime,dir,barWidth,spaceWidth);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else if(time > maxTime) {\r\n\t\t\t//指定时间比当前值大,只能说真没有这个值了\r\n\t\t\tme.synchronizeX(maxTime,dir,barWidth,spaceWidth);\r\n\t\t}else {\r\n\t\t\tvar index = this.getXIndexByTime(time,dir);\r\n\t\t\tif(index!==-1) {\r\n\t\t\t\tif(barWidth) {\r\n\t\t\t\t\tthis.chartOpts.theme.barWidth = barWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif(spaceWidth){\r\n\t\t\t\t\tthis.chartOpts.theme.spaceWidth = spaceWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif(barWidth||spaceWidth) {\r\n\t\t\t\t\tvar bWidth = this.chartOpts.theme.barWidth,sWidth = this.chartOpts.theme.spaceWidth;\r\n\t\t\t\t\tcount = Math.floor(this.mainRegionWidth/(bWidth+sWidth))-1;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tcount = this.dataRanges.to - this.dataRanges.start;\r\n\t\t\t\t}\r\n\t\t\t\tvar start,to;\r\n\t\t\t\tif(dir) {\r\n\t\t\t\t\tto = index;\r\n\t\t\t\t\tstart = index - count;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tstart = index;\r\n\t\t\t\t\tto = index + count;\r\n\t\t\t\t}\r\n\t\t\t\tthis.painter({start:start,to:to},function(){\r\n\t\t\t\t\tme.autoLoadData();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * 重置数据\r\n\t * @param {Array} data [description]\r\n\t */\r\n\t,setDatas: function(datas){\r\n\t\tif(!datas) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.datas = datas;\r\n\t}\r\n\r\n\t/**\r\n\t * 当dom的width和height改变时调用\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,resize: function(){\r\n\t\tif(!this.initComplete){return false;}\r\n\t\tvar width = this.container.width(),height = this.container.height();\r\n\t\tif(width==this.width&&height==this.height){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.width = this.container.width();\r\n\t\tthis.height = this.container.height();\r\n\t\tthis.computedSize();\r\n\t\tthis.wrap.css({width:this.width,height: this.height});\r\n\t\tthis.canvasBox.css({height:this.canvas.height,width:this.canvas.width});\r\n\t\tthis.eventsCanvas.width = this.canvas.width;\r\n\t\tthis.eventsCanvas.height = this.canvas.height;\r\n\t\t\r\n\t\tthis.zoom = true;\r\n\t\tthis.painter(null,null,true);\r\n\t\tfor(var area in this.tipList) {\r\n\t\t\tvar opts = this.chartOpts[area];\r\n\t\t\tthis.tipList[area].css('top',opts.y+2);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 销毁\r\n\t * @return {[type]} [description]\r\n\t */\r\n\t,destroy: function(){\r\n\t\tthis.container.remove(this.wrap);\r\n\t}\r\n\r\n\t/**\r\n\t * 格式化数据\r\n\t * @param {Array} data [不符合格式的数据]\r\n\t * @return {[Array]} [description]\r\n\t */\r\n\t,formatDatas: function(data){\r\n\t\tvar result = [];\r\n\t    for (var i = 0; i < data.length; i++) {\r\n            //20111215,11.68,11.65,11.76,11.40,11.41,43356655,502325991\r\n            //日期,昨收,开盘价,高,低，收,量，额\r\n\t        var rawData = data[i];\r\n            if(rawData) {\r\n                var item = {\r\n                    quoteTime: rawData[0],\r\n                    preClose: rawData[1],\r\n                    open: rawData[2],\r\n                    high: rawData[3],\r\n                    low: rawData[4],\r\n                    close: rawData[5],\r\n                    volume: rawData[6],\r\n                    amount: rawData[7],\r\n                    avg: parseFloat(core.toMoney((rawData[3]+rawData[4])/2,5))\r\n                };\r\n                result.push(item);\r\n            }\r\n\t    }\r\n\t    var tempTimestamp = this.maxTimestamp||0;\r\n\t    this.maxTimestamp = Math.max(data[data.length-1][0],tempTimestamp);\r\n\t    return result;\r\n\t}\r\n}\r\n\r\nmodule.exports = Chartbox;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/ChartBox.js\n ** module id = 8\n ** module chunks = 0\n **/","\r\nif(!Array.prototype.indexOf) {\r\n    Array.prototype.indexOf = function (item, index) {\r\n        var n = this.length,\r\n                i = ~~index\r\n        if (i < 0)\r\n            i += n\r\n        for (; i < n; i++)\r\n            if (this[i] === item)\r\n                return i\r\n        return -1\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n\ttoMoney: function (number, decimals, point, thousands){\r\n        //form http://phpjs.org/functions/number_format/\r\n        //number    必需，要格式化的数字\r\n        //decimals  可选，规定多少个小数位。\r\n        //point 可选，规定用作小数点的字符串（默认为 . ）。\r\n        //thousands 可选，规定用作千位分隔符的字符串（默认为 , ），如果设置了该参数，那么所有其他参数都是必需的。\r\n        number = (number + '')\r\n                .replace(/[^0-9+\\-Ee.]/g, '')\r\n        var n = !isFinite(+number) ? 0 : +number,\r\n                prec = !isFinite(+decimals) ? 2 : Math.abs(decimals),\r\n                sep = thousands || \",\",\r\n                dec = point || \".\",\r\n                s = '',\r\n                toFixedFix = function(n, prec) {\r\n                    var k = Math.pow(10, prec)\r\n                    return '' + (Math.round(n * k) / k)\r\n                            .toFixed(prec)\r\n                }\r\n        // Fix for IE parseFloat(0.55).toFixed(0) = 0;\r\n        s = (prec ? toFixedFix(n, prec) : '' + Math.round(n))\r\n                .split('.')\r\n        if (s[0].length > 3) {\r\n            s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep)\r\n        }\r\n        if ((s[1] || '')\r\n                .length < prec) {\r\n            s[1] = s[1] || ''\r\n            s[1] += new Array(prec - s[1].length + 1)\r\n                    .join('0')\r\n        }\r\n        return s.join(dec)\r\n    },\r\n\tbigNumberToText: function (val) {\r\n        var result;\r\n        var yi = val / 100000000;\r\n        if (yi > 1) {\r\n            result = yi.toFixed(2) + '亿';\r\n        } else {\r\n            var wan = val / 10000;\r\n            if (wan > 1)\r\n                result = wan.toFixed(2) + '万';\r\n            else\r\n                result = val;\r\n        }\r\n        return result;\r\n    },\r\n    /**\r\n     * 日期转换函数\r\n     * @param  {[longer]} val    [时间戳]\r\n     * @param  {[int]} period [当前图显示的时间段1,5,30,60,100[1min,5min,30min,60min,1day]]\r\n     * @return {[type]}        [description]\r\n     */\r\n    convertDate: function(val,period,showYear){\r\n    \tvar time = '',ymd='',hour,minute,date = new Date(val);\r\n        if(period>=100) {\r\n            var year = date.getFullYear();\r\n            var month = date.getMonth()+1;\r\n            var day = date.getDate();\r\n            month = month<10 ? '0'+month: month;\r\n            day = day<10 ? '0'+day : day;\r\n            ymd = year + '-' + month + '-' + day;\r\n        }\r\n        if(showYear||period<100) {\r\n            var hour = date.getHours();\r\n            var minute = date.getMinutes();\r\n            hour = hour<10 ? '0'+hour : hour;\r\n            minute = minute<10 ? '0'+minute: minute;\r\n            time = hour +\":\" + minute;\r\n            if(ymd) {\r\n                time = ' '+time;\r\n            }\r\n        }\r\n        \r\n        return  ymd+time;\r\n    },\r\n    throttle: function(fn,delay) {\r\n        var timer = null;\r\n        var t_start;\r\n        delay = delay||200;\r\n\r\n        return function() {\r\n            var context = this,t_curr = +new Date();\r\n            if(!t_start) {\r\n                t_start = t_curr;\r\n            }\r\n            var args = arguments;\r\n            if(t_curr - t_start <delay) {\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function(){\r\n                    fn.apply(context,args);\r\n                },delay)\r\n            }else {\r\n                fn.apply(context,args);\r\n                t_start = t_curr;\r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n    objectCreate: function(){\r\n        if(Object.create) {\r\n            return Object.create;\r\n        }else {\r\n            return function(o){\r\n                \r\n            }\r\n        }\r\n        /*var F = function(){};\r\n        F.prototype = o;\r\n        return new F();*/\r\n    },\r\n\r\n    drawHLine: function (ctx,color, x0, y0, w, lineStyle) {\r\n        ctx.strokeStyle = color;\r\n        var dashSize = 3;\r\n        if (y0 * 10 % 10 == 0) y0 += .5;\r\n        if (lineStyle && lineStyle == 'dashed') {\r\n            var width = 0;\r\n            do {\r\n                this.drawHLine(ctx,color, width, y0, dashSize, 1, 'solid');\r\n                width += dashSize * 2;\r\n            } while (width < w);\r\n        }\r\n        else {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x0, y0);\r\n            ctx.lineTo(x0 + w, y0);\r\n            ctx.stroke();\r\n        }\r\n    },\r\n    drawVLine: function (ctx,color, x0, y0, h, lineStyle) {\r\n        ctx.strokeStyle = color;\r\n        var dashSize = 3;\r\n        if (x0 * 10 % 10 == 0) x0 += .5;\r\n        if (lineStyle && lineStyle == 'dashed') {\r\n            var height = 0;\r\n            do {\r\n                this.drawVLine(ctx,color, x0, height, dashSize, 1);\r\n                height += dashSize * 2;\r\n            } while (height < h);\r\n        }\r\n        else {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x0, y0);\r\n            ctx.lineTo(x0, y0 + h);\r\n            ctx.stroke();\r\n\r\n        }\r\n    },\r\n    getXByShowDataIndex: function(i, barWidth, spaceWidth) {\r\n        var result = i*(spaceWidth+barWidth) + barWidth*.5;\r\n        if(result*10%10==0) result +=.5;\r\n        return result;\r\n    },\r\n    getRelativeYByShowDataValue: function(value, high, low, height){\r\n        var result = Math.ceil((high - value)*height/(high - low));\r\n        if (result * 10 % 10 == 0) result += .5;\r\n        return result;\r\n    }\r\n    \r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/common.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\r\n * 蜡烛图\r\n * @type {[type]}\r\n */\r\nvar $ = require('jquery');\r\nvar core = require('./common.js');\r\nvar YAxisChart = require('./YAxisChart');\r\n\r\n\r\n\r\nvar Candlestick = function(areaName,chartBox){\r\n    if(!chartBox.showDatas) {\r\n        console.log('没有数据')\r\n        return false;\r\n    }\r\n    this.chartBox = chartBox;\r\n    this.name=\"Candlestick\";\r\n    this.ctx = chartBox.ctx;\r\n    this.areaName = areaName;\r\n    this.chartList = {};\r\n    this.init();\r\n}\r\nCandlestick.prototype = {\r\n    constructor: Candlestick,\r\n    init: function(){\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName];\r\n        if(opts.subCharts) {\r\n            var list = [];\r\n            for(var chart in opts.subCharts) {\r\n                var option = opts.subCharts[chart];\r\n                option.label = chart;\r\n                list.push(option);\r\n            }\r\n            list.sort(function(a,b){\r\n                return a.sort - b.sort;\r\n            })\r\n\r\n            for(var i=0,cur;cur=list[i++];) {\r\n                if(cur.show!==false) {\r\n                    var chartBox = this.chartBox;\r\n                    var chartObj = chartBox.chartObjFactory.call(chartBox,cur.type,this.areaName,cur.label);\r\n                    this.chartList[cur.label] = chartObj;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        if(opts.yAxis) {\r\n            this.chartList['yAxis'] = new YAxisChart( this.ctx, this.chartBox.chartOpts.yAxis );\r\n        }\r\n    },\r\n\r\n    painter: function(){\r\n        var me  = this;\r\n        this.painting = true;\r\n        this.ctx.save();\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName], theme = charOpts.theme,height = opts.height, width = opts.width;\r\n        this.ctx.translate(opts.x,opts.y + opts.top);\r\n        //画水平底纹线\r\n        var spaceCount = Math.floor(height /(opts.horizontalLineSpace));\r\n        var spaceHeight = height / spaceCount;\r\n        var yPos = [];\r\n        for(var i=0; i<= spaceCount; i++) {\r\n            var y = Math.ceil(spaceHeight*i);\r\n            if (y * 10 % 10 == 0) y += .5;\r\n            yPos.push(y);\r\n            if(opts.bottom<=5&&i==spaceCount) {\r\n                continue;\r\n            }\r\n            core.drawHLine.call(core,this.ctx,theme.lineColor,0,y,width+opts.margin,'dashed');\r\n            \r\n        }\r\n\r\n        this.yPos = yPos;\r\n       \r\n        this.getDatasRegion();\r\n        for(var i in this.chartList) {\r\n            var chartObj = this.chartList[i];\r\n            chartObj.getDatasRegion();\r\n        }        \r\n       \r\n\r\n        //画蜡烛线图 \r\n        var datas = this.getDatas();\r\n        this.needCandleRect = !!(theme.barWidth > 1.5);\r\n        this.currentX = 0;\r\n        for(var i=0,len = datas.length; i<len;i++) {\r\n            if(!datas[i]) {\r\n                continue;\r\n            }\r\n            me.drawItem(datas[i],i)\r\n        }\r\n\r\n\r\n        this.drawYAxisChart();\r\n        this.ctx.restore();\r\n\r\n        //画主图的副图部分\r\n        for(var i in this.chartList) {\r\n            if(i=='yAxis') {\r\n                continue;\r\n            }\r\n            var chartObj = this.chartList[i];\r\n            chartObj.painter();\r\n        }\r\n\r\n        this.painting = false;\r\n    },\r\n\r\n    drawBackground: function(){\r\n        this.paintCount = this.paintCount||1;\r\n        if(this.paintCount>1) {\r\n            var charOpts = this.opts, opts = charOpts[this.areaName];\r\n            var y = opts.height+opts.top+opts.bottom;\r\n            this.ctx.clearRect(0,-opts.top,opts.width+opts.margin,y);\r\n        }\r\n        this.paintCount++;\r\n    },\r\n\r\n    drawItem: function(ki,i){\r\n        var me = this,ctx = this.ctx,charOpts = this.chartBox.chartOpts,opts = charOpts[this.areaName], theme = charOpts.theme, datas = this.getDatas(), high = opts.high, low = opts.low;\r\n        \r\n        var isRise = ki.close > ki.open;\r\n        var color = isRise ? theme.riseColor : theme.fallColor;\r\n\r\n        var lineX = core.getXByShowDataIndex(i,theme.barWidth,theme.spaceWidth);\r\n        //currentX？\r\n        if (!this.currentX) this.currentX = lineX;\r\n        else {\r\n            if (lineX - this.currentX < 1) return;\r\n        }\r\n        this.currentX = lineX;\r\n        var topY = core.getRelativeYByShowDataValue(ki.high, high, low, opts.height);\r\n        var bottomY = core.getRelativeYByShowDataValue(ki.low, high, low, opts.height); \r\n        if (me.needCandleRect) {\r\n           \r\n            \r\n            var candleY, candleHeight;\r\n            if (isRise) {\r\n                candleY = core.getRelativeYByShowDataValue(ki.close, high, low, opts.height);\r\n                candleHeight = core.getRelativeYByShowDataValue(ki.open, high, low, opts.height) - candleY;\r\n            } else {\r\n                candleY = core.getRelativeYByShowDataValue(ki.open, high, low, opts.height);\r\n                candleHeight = core.getRelativeYByShowDataValue(ki.close, high, low, opts.height) - candleY;\r\n            }\r\n\r\n            //candleHeight = candleHeight;\r\n\r\n            //中间的那条线\r\n            var candleX = lineX - theme.barWidth / 2;\r\n            /*ctx.beginPath();\r\n            ctx.moveTo(lineX, topY);\r\n            ctx.lineTo(lineX, bottomY);\r\n            ctx.stroke();*/\r\n\r\n            \r\n           /* ctx.beginPath();\r\n            ctx.fillRect(candleX, candleY, theme.barWidth, candleHeight);*/\r\n            this.drawCandle(isRise,lineX,topY,bottomY,[candleX,candleY,theme.barWidth,candleHeight]);\r\n\r\n        } else {\r\n            ctx.strokeStyle = color;\r\n            //画线\r\n            ctx.beginPath();\r\n            ctx.moveTo(lineX, topY);\r\n            ctx.lineTo(lineX, bottomY);\r\n            ctx.stroke();\r\n        }\r\n    },\r\n    drawCandle: function(isRise,x,highY,lowY,rect){\r\n        var me = this,ctx = this.ctx,charOpts = this.chartBox.chartOpts, theme = charOpts.theme\r\n        var color = isRise ? theme.riseColor : theme.fallColor;\r\n        ctx.strokeStyle = color;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, highY);\r\n        ctx.lineTo(x, lowY);\r\n        ctx.stroke();\r\n        if(isRise) {\r\n            ctx.fillStyle = theme.backgroundColor;\r\n            ctx.beginPath();\r\n            ctx.fillRect.apply(ctx,rect);\r\n            ctx.strokeStyle = color;\r\n            ctx.beginPath();\r\n            ctx.strokeRect.apply(ctx,rect);\r\n        }else {\r\n            ctx.fillStyle = color;\r\n            ctx.beginPath();\r\n            ctx.fillRect.apply(ctx,rect);\r\n        }\r\n        \r\n    },\r\n\r\n    getDatas: function(){\r\n        return this.chartBox.showDatas;\r\n    },\r\n    //这里主要是算所属区域的最大值和最小值\r\n    getDatasRegion: function(){\r\n        this.chartBox.calcAreaDataValueRange.call(this.chartBox,this.areaName);\r\n        \r\n    },\r\n\r\n    drawYAxisChart: function(){\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName];\r\n        if(!this.chartList['yAxis']) {\r\n            return false;\r\n        }\r\n        var datas = this.getDatas(), high = opts.high, low = opts.low, yPos = this.yPos, height = opts.height;\r\n        \r\n        var result = [];\r\n        for(var i=0,len = yPos.length; i<len; i++) {\r\n            var val = high - (high-low)*yPos[i]/height;\r\n            var v = core.toMoney(val,opts.dotLen);\r\n            result.push({value:v,y:yPos[i]});\r\n        }\r\n        \r\n        this.chartList['yAxis'].painter(result,{x: opts.width+opts.margin,y:0, height:opts.height})\r\n    },\r\n\r\n    getValueByY: function(y) {\r\n        var chartOpts = this.chartBox.chartOpts, opts = chartOpts[this.areaName], datas = this.getDatas(), high = opts.high, low = opts.low;\r\n        var totalHeight = opts.top + opts.height + opts.bottom, dotLen = opts.dotLen, val;\r\n        var highest = high + (high-low)*opts.top/opts.height;\r\n        var lowest = low - (high-low)*opts.bottom/opts.height;\r\n        var val;\r\n        if(y>opts.y && y < totalHeight+opts.y) {\r\n            y = y - opts.y;\r\n            val = core.toMoney(highest - (highest - lowest)*y/totalHeight,dotLen);\r\n        }\r\n        return val;\r\n    },\r\n\r\n    \r\n\r\n    getTip: function(index,follow){\r\n        var datas = this.getDatas();\r\n        var data = datas[index],dotLen = this.chartBox.chartOpts[this.areaName].dotLen;\r\n\r\n        var time = core.convertDate(data['quoteTime'],100,true);\r\n        var openColor = this.chartBox.getColor(data.preClose, data.open), openValue  = core.toMoney(data.open,dotLen);\r\n        var highColor = this.chartBox.getColor(data.preClose, data.high), highValue = core.toMoney(data.high,dotLen);\r\n        var lowColor = this.chartBox.getColor(data.preClose, data.low), lowValue = core.toMoney(data.low, dotLen);\r\n        var closeColor = this.chartBox.getColor(data.preClose, data.close),closeValue = core.toMoney(data.close, dotLen);\r\n        var ret = '';\r\n        if(follow){\r\n            ret = '<span>'+time+'</span>'+\r\n               '<span>开盘价:<em style=\"color:'+ openColor +'\">'+ openValue +'</em></span>'+\r\n               '<span>最高价:<em style=\"color:'+ highColor +'\">'+ highValue +'</em></span>'+\r\n               '<span>最低价:<em style=\"color:'+ lowColor +'\">'+ lowValue +'</em></span>'+\r\n               '<span>收盘价:<em style=\"color:'+ closeColor +'\">'+ closeValue +'</em></span>'\r\n        }else {\r\n            ret = '<span>日期:'+time+'</span>'+\r\n               '<span>开:<em style=\"color:'+ openColor +'\">'+ openValue +'</em></span>'+\r\n               '<span>高:<em style=\"color:'+ highColor +'\">'+ highValue +'</em></span>'+\r\n               '<span>低:<em style=\"color:'+ lowColor +'\">'+ lowValue +'</em></span>'+\r\n               '<span>收:<em style=\"color:'+ closeColor +'\">'+ closeValue +'</em></span>';\r\n            for(chart in this.chartList) {\r\n                var curChart = this.chartList[chart];\r\n                if(curChart.getTip) {\r\n                    ret +=curChart.getTip(index,follow);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n        \r\n    },\r\n\r\n}\r\nmodule.exports = Candlestick;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/CandlestickChart.js\n ** module id = 10\n ** module chunks = 0\n **/","\r\nvar core = require('./common.js');\r\n\r\nfunction YAxisChart(ctx, opts){\r\n\tthis.ctx = ctx;\r\n\tthis.opts = opts;\r\n}\r\n\r\nYAxisChart.prototype = {\r\n\tconstructor: YAxisChart,\r\n\tpainter: function(datas,pos) {\r\n\t\tvar ctx = this.ctx,opts = this.opts;\r\n\t\tctx.save();\r\n\t\tctx.translate(pos.x,pos.y);\r\n\t\tctx.fillStyle = opts.color;\r\n\t\tctx.font = opts.font;\r\n\t\tvar height = pos.height;\r\n\t\tfor(var j=0,cur;cur = datas[j++];) {\r\n\t\t\tvar lineWidth = 5;\r\n\t\t\tcore.drawHLine.call(core,this.ctx, opts.lineColor, 0, cur.y, lineWidth, 'solid');\r\n\t\t\tvar y = cur.y + 3;\r\n\t\t\tif(y> height) {\r\n\t\t\t\ty = height -2;\r\n\t\t\t}\r\n\t\t\tctx.fillText(cur.value,lineWidth+2,y);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\r\n\t},\r\n\r\n\tgetDatasRegion:function(){\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\nmodule.exports = YAxisChart;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/YAxisChart.js\n ** module id = 11\n ** module chunks = 0\n **/","var core = require('./common.js');\r\n\r\nfunction VolumeChart(areaName,chartBox){\r\n\tif(!chartBox.showDatas) {\r\n        console.log('没有数据')\r\n        return false;\r\n    }\r\n    this.chartBox = chartBox;\r\n    this.name=\"VolumeChart\";\r\n    this.ctx = chartBox.ctx;\r\n    this.areaName = areaName;\r\n\tthis.init();\r\n}\r\n\r\nVolumeChart.prototype = {\r\n\tconstructor: VolumeChart,\r\n\tinit: function(){},\r\n\r\n\tpainter: function(){\r\n\t\tthis.painting = true;\r\n\t\t\r\n        this.ctx.save();\r\n        var chartOpts = this.chartBox.chartOpts,opts = chartOpts[this.areaName], theme = chartOpts.theme,height = opts.height, width = opts.width;\r\n        this.ctx.translate(opts.x,opts.y + opts.top);\r\n\r\n        //画水平底纹线\r\n        var spaceCount = Math.floor(height /(opts.horizontalLineSpace));\r\n        var spaceHeight = height / spaceCount;\r\n        var yPos = [];\r\n        for(var i=0; i<= spaceCount; i++) {\r\n            var y = Math.ceil(spaceHeight*i);\r\n            if (y * 10 % 10 == 0) y += .5;\r\n            yPos.push(y);\r\n            if(opts.bottom<=5&&i==spaceCount) {\r\n                continue;\r\n            }\r\n            core.drawHLine.call(core,this.ctx,opts.lineColor,0,y,width+opts.margin,'dashed');\r\n        }\r\n        this.yPos = yPos;\r\n\r\n        //画交易量图\r\n        this.getDatasRegion();\r\n        var datas = this.getDatas(), high = this.high;\r\n        i=0;\r\n        for(var i=0,len = datas.length; i<len;i++) {\r\n        \tif(!datas[i]) {\r\n        \t\tcontinue;\r\n        \t}\r\n            this.drawItem(datas[i],i)\r\n        }\r\n        this.ctx.restore();\r\n        this.painting = false;\r\n\t},\r\n\tdrawBackground: function(){\r\n\t\tthis.paintCount = this.paintCount||1;\r\n\t\tif(this.paintCount>1) {\t\t\t\r\n\t\t\tvar charOpts = this.opts, opts = charOpts[this.areaName];\r\n\t\t\tvar y = opts.height+opts.top+opts.bottom;\r\n\t\t\tthis.ctx.clearRect(0,-opts.top,opts.width+opts.margin,y);\r\n\t\t}\r\n\t\tthis.paintCount++;\r\n\t},\r\n\r\n\tgetDatas: function(){\r\n\t\treturn this.chartBox.showDatas;\r\n\t},\r\n\r\n    getDatasRegion: function(){\r\n        var datas = this.getDatas();\r\n        var maxVolume = 0;\r\n        for(var i=0,len=datas.length;i<len;i++) {\r\n            if(!datas[i]) {\r\n                continue;\r\n            }\r\n            maxVolume = Math.max(maxVolume,datas[i].volume);\r\n        }\r\n        this.chartBox.chartOpts[this.areaName].high = maxVolume;\r\n        this.chartBox.chartOpts[this.areaName].low = 0;\r\n        this.chartBox.chartOpts[this.areaName].dotLen =  2;\r\n    },\r\n\r\n\tdrawItem: function(ki,i){\r\n\t\tvar me = this,ctx = this.ctx,chartOpts = this.chartBox.chartOpts,areaOpts = chartOpts[this.areaName], theme = chartOpts.theme, high = areaOpts.high, low = areaOpts.low;\r\n        var isRise = ki.close > ki.open;\r\n        var color = isRise ? theme.riseColor : theme.fallColor;\r\n        var lineX = core.getXByShowDataIndex(i,theme.barWidth,theme.spaceWidth);\r\n        ctx.fillStyle = color;\r\n        var height = core.getRelativeYByShowDataValue(ki.volume, high, low, areaOpts.height);\r\n        ctx.beginPath();\r\n        var barHeight  = Math.max((areaOpts.height - height),2)\r\n        var x = lineX - theme.barWidth/2\r\n        ctx.rect(x, height, theme.barWidth, areaOpts.height-height);\r\n        //ctx.strokeStyle = color;\r\n        ctx.fill();\r\n       /* ctx.beginPath();\r\n        ctx.moveTo(lineX, height);\r\n        ctx.lineTo(lineX, areaOpts.height);\r\n        ctx.stroke();*/\r\n\r\n\t},\r\n    getValueByY: function(y) {\r\n        var chartOpts = this.chartBox.chartOpts, opts = chartOpts[this.areaName], datas = this.getDatas(), high = opts.high, low = opts.low;\r\n        var totalHeight = opts.top + opts.height + opts.bottom, dotLen=2, val;\r\n        var highest = high + (high-low)*opts.top/opts.height;\r\n        var val;\r\n        if(y>opts.y && y < totalHeight+opts.y) {\r\n            y = y - opts.y\r\n            val = core.toMoney(highest - (highest)*y/totalHeight,dotLen);\r\n        }\r\n        return val;\r\n    },\r\n    getTip: function(index,follow){\r\n        var datas = this.getDatas();\r\n        var data = datas[index],dotLen = this.chartBox.dotLen;\r\n        var volume = core.bigNumberToText(data['volume']);\r\n        var amount = core.bigNumberToText(data['amount']);\r\n        var color = this.chartBox.getColor(data.close,data.open);\r\n        if(follow) {\r\n            return '<span>成交量:<em style=\"color:'+ color +'\">'+ volume +'</em>手</span>'+\r\n                '<span>成交额:<em style=\"color:'+ color +'\">'+ data['amount'] +'</em></span>'\r\n        }else {\r\n            return '<span>量:<em style=\"color:'+ color +'\">'+ volume +'</em></span>'+\r\n                '<span>额:<em style=\"color:'+ color +'\">'+ data['amount'] +'</em></span>';\r\n        }\r\n        \r\n\r\n    }\r\n}\r\n\r\nmodule.exports = VolumeChart;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/VolumeChart.js\n ** module id = 12\n ** module chunks = 0\n **/","/**\r\n * opts {}\r\n */\r\nvar core = require('./common.js');\r\n\r\nfunction XAixsChart(areaName,chartBox){\r\n\tif(!chartBox.showDatas) {\r\n        console.log('没有数据')\r\n        return false;\r\n    }\r\n    this.chartBox = chartBox;\r\n    this.name=\"XAixsChart\";\r\n    this.ctx = chartBox.ctx;\r\n    this.areaName = areaName;\r\n\tthis.init();\r\n}\r\nXAixsChart.prototype = {\r\n\tconstrucotor: XAixsChart,\r\n\r\n\tinit: function(){},\r\n\r\n\tpainter: function(){\r\n\t\tthis.painting = true;\r\n        this.ctx.save();\r\n\r\n        var chartOpts = this.chartBox.chartOpts,opts = chartOpts[this.areaName],theme = chartOpts.theme,height = opts.height, width = opts.width;\r\n        this.ctx.translate(opts.x,opts.y + opts.top);\r\n       \r\n\r\n        //计算间隔\r\n\t\tvar xWidth = opts.verticalLineSpace,barWidth = theme.barWidth,spaceWidth = theme.spaceWidth;\r\n\t\tvar pie = Math.ceil(xWidth/(barWidth+spaceWidth));\r\n\t\tthis.space = (barWidth+spaceWidth)*pie;\r\n\r\n\t\t\r\n\t\tvar datas = this.getDatas();\r\n\t\tvar xDatas = []\r\n\t\tfor(var i=datas.length-1; i>=0; i-=pie) {\r\n\t\t\tvar x = core.getXByShowDataIndex(i,theme.barWidth,theme.spaceWidth),value;\r\n\t\t\tif(datas[i]) {\r\n\t\t\t\tvalue = core.convertDate(datas[i].quoteTime,chartOpts.period);\r\n\t\t\t\txDatas.push({value:value,x:x});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar y = 0 ;\r\n\r\n\t\tfor(var j=0,cur;cur = xDatas[j++];) {\r\n\t\t\tcore.drawVLine(this.ctx, opts.lineColor, cur.x, y, 5, 'solid');\r\n\t\t}\r\n\r\n\t\tthis.drawTexts(xDatas);\r\n\t\tthis.ctx.restore();\r\n        this.painting = false;\r\n\t},\r\n\tdrawBackground: function(){\r\n\t\tthis.paintCount = this.paintCount||1;\r\n\t\tif(this.paintCount>1) {\r\n\t\t\tvar charOpts = this.opts, opts = charOpts[this.areaName];\r\n\t\t\tvar y = opts.height+opts.top+opts.bottom;\r\n\t\t\tthis.ctx.clearRect(0,-opts.top,opts.width+opts.margin,y);\r\n\t\t}\r\n\t\tthis.paintCount++;\r\n\t},\r\n\tgetDatas: function(){\r\n\t\treturn this.chartBox.showDatas;\r\n\t},\r\n\tdrawTexts: function(datas){\r\n\t\tvar ctx = this.ctx, opts =this.chartBox.chartOpts[this.areaName];\r\n\t\tctx.fillStyle = opts.color;\r\n\t\tctx.font = opts.font;\r\n\t\tfor(var j=0,cur;cur = datas[j++];) {\r\n\t\t\tif(cur.value) {\r\n\t\t\t\tvar w = ctx.measureText(cur.value).width;\r\n\t\t\t\tvar x = Math.max(cur.x - w/2,0);\r\n\t\t\t\tctx.fillText(cur.value,x,20);\r\n\t\t\t}\r\n\t\t}\r\n\t},\t\r\n}\r\n\r\nmodule.exports = XAixsChart;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/XAxisChart.js\n ** module id = 13\n ** module chunks = 0\n **/","var $ = require('jquery');\r\nvar core = require('./common.js');\r\nvar YAxisChart = require('./YAxisChart');\r\n\r\nfunction Polyline(areaName,chartBox){\r\n\tif(!chartBox.showDatas) {\r\n        console.log('没有数据')\r\n        return false;\r\n    }\r\n    this.chartBox = chartBox;\r\n    this.name=\"Polyline\";\r\n    this.ctx = chartBox.ctx;\r\n    this.areaName = areaName;\r\n    this.chartList = {};\r\n\tthis.init();\r\n}\r\n\r\nPolyline.prototype = {\r\n    constructor: Polyline,\r\n    init: function(){\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName];\r\n        if(opts.yAxis) {\r\n            this.chartList['yAxis'] = new YAxisChart( this.ctx, this.chartBox.chartOpts.yAxis );\r\n        }\r\n    },\r\n    painter: function(){\r\n        var me  = this,ctx = this.ctx;\r\n        this.painting = true;\r\n        ctx.save();\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName], theme = charOpts.theme, height = opts.height, width = opts.width;\r\n        ctx.translate(opts.x,opts.y + opts.top);\r\n        //画水平底纹线\r\n        var spaceCount = Math.floor(height /(opts.horizontalLineSpace));\r\n        var spaceHeight = height / spaceCount;\r\n        var yPos = [];\r\n        for(var i=0; i<= spaceCount; i++) {\r\n            var y = Math.ceil(spaceHeight*i);\r\n            if (y * 10 % 10 == 0) y += .5;\r\n            \r\n            core.drawHLine.call(core,this.ctx,theme.lineColor,0,y,width+opts.margin,'dashed');\r\n            yPos.push(y);\r\n        }\r\n\r\n        this.yPos = yPos;\r\n\r\n        this.getDatasRegion();\r\n        //画折线图 \r\n        var datas = this.getDatas(),high = opts.high,low = opts.low;\r\n        \r\n        ctx.strokeStyle = opts.opts&&opts.opts.lineColor||theme.lineColor;\r\n        ctx.beginPath();\r\n        var moveTo = false\r\n        for(var i=0,len = datas.length; i<len;i++) {\r\n            if(!datas[i]) {\r\n                continue;\r\n            }\r\n            var y = core.getRelativeYByShowDataValue(datas[i]['avg'], high, low, opts.height);\r\n            var x = core.getXByShowDataIndex(i,theme.barWidth,theme.spaceWidth);\r\n            if(!moveTo) {\r\n                ctx.moveTo(x,y);\r\n                moveTo = true;\r\n            }else {\r\n                ctx.lineTo(x,y);\r\n            }\r\n            \r\n        }\r\n        \r\n        ctx.stroke();\r\n        this.drawYAxisChart();\r\n        ctx.restore();\r\n        this.painting = false;\r\n    },\r\n\r\n    drawBackground: function(){\r\n\r\n    },\r\n\r\n    getDatas: function(){\r\n        return this.chartBox.showDatas;\r\n    },\r\n\r\n    //这里主要是算所属区域的最大值和最小值\r\n    getDatasRegion: function(){\r\n        this.chartBox.calcAreaDataValueRange.call(this.chartBox,this.areaName);\r\n    },\r\n\r\n    drawYAxisChart: function(){\r\n        var charOpts = this.chartBox.chartOpts, opts = charOpts[this.areaName];\r\n        if(!this.chartList['yAxis']) {\r\n            return false;\r\n        }\r\n        var datas = this.getDatas(), high = opts.high, low = opts.low, yPos = this.yPos,height = opts.height;\r\n        var result = [];\r\n        for(var i=0,len = yPos.length; i<len; i++) {\r\n            var val = high - (high-low)*yPos[i]/height;\r\n            var v = core.toMoney(val,opts.dotLen);\r\n            result.push({value:v,y:yPos[i]});\r\n        }\r\n        \r\n        this.chartList['yAxis'].painter(result,{x: opts.width+opts.margin,y:0, height:opts.height})\r\n    },\r\n\r\n    getValueByY: function(y) {\r\n        var chartOpts = this.chartBox.chartOpts, opts = chartOpts[this.areaName], datas = this.getDatas(), high = opts.high, low = opts.low;\r\n\r\n        var totalHeight = opts.top + opts.height + opts.bottom, dotLen = opts.dotLen, val;\r\n        var highest = high + (high-low)*opts.top/opts.height;\r\n        var lowest = low - (high-low)*opts.bottom/opts.height;\r\n        var val;\r\n        if(y>opts.y && y < totalHeight+opts.y) {\r\n            y = y - opts.y;\r\n            val = core.toMoney(highest - (highest - lowest)*y/totalHeight,dotLen);\r\n        }\r\n        return val;\r\n        \r\n    },\r\n\r\n    getTip: function(index,follow){\r\n        var datas = this.getDatas();\r\n        var data = datas[index],dotLen = this.chartBox.chartOpts[this.areaName].dotLen;\r\n\r\n        var time = core.convertDate(data['quoteTime'],100,true);\r\n        var openColor = this.chartBox.getColor(data.preClose, data.open), openValue  = core.toMoney(data.open,dotLen);\r\n        var highColor = this.chartBox.getColor(data.preClose, data.high), highValue = core.toMoney(data.high,dotLen);\r\n        var lowColor = this.chartBox.getColor(data.preClose, data.low), lowValue = core.toMoney(data.low, dotLen);\r\n        var closeColor = this.chartBox.getColor(data.preClose, data.close),closeValue = core.toMoney(data.close, dotLen);\r\n        var ret = '';\r\n        if(follow){\r\n            ret = '<span>'+time+'</span>'+\r\n               '<span>开盘价:<em style=\"color:'+ openColor +'\">'+ openValue +'</em></span>'+\r\n               '<span>最高价:<em style=\"color:'+ highColor +'\">'+ highValue +'</em></span>'+\r\n               '<span>最低价:<em style=\"color:'+ lowColor +'\">'+ lowValue +'</em></span>'+\r\n               '<span>收盘价:<em style=\"color:'+ closeColor +'\">'+ closeValue +'</em></span>'\r\n        }else {\r\n            ret = '<span>日期:'+time+'</span>'+\r\n               '<span>开:<em style=\"color:'+ openColor +'\">'+ openValue +'</em></span>'+\r\n               '<span>高:<em style=\"color:'+ highColor +'\">'+ highValue +'</em></span>'+\r\n               '<span>低:<em style=\"color:'+ lowColor +'\">'+ lowValue +'</em></span>'+\r\n               '<span>收:<em style=\"color:'+ closeColor +'\">'+ closeValue +'</em></span>'\r\n        }\r\n        return ret;\r\n        \r\n    }\r\n}\r\n\r\nmodule.exports = Polyline;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/PolylineChart.js\n ** module id = 14\n ** module chunks = 0\n **/","\r\nvar core = require('./common');\r\nvar Candle = require('./CandlestickChart.js');\r\n\r\nfunction HollowCandle(areaName,chartBox){\r\n\tCandle.apply(this,arguments);\r\n}\r\n\r\nvar objectCreate = core.objectCreate();\r\nHollowCandle.prototype = objectCreate(Candle.prototype);\r\nHollowCandle.prototype.constructor = HollowCandle;\r\n\r\nHollowCandle.prototype.drawCandle = function(x,highY,lowY,rect){\r\n    var ctx = this.ctx;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, highY);\r\n    ctx.lineTo(x, rect[1]);\r\n    ctx.stroke();\r\n    \r\n    ctx.beginPath();\r\n    ctx.strokeRect.apply(ctx,rect);\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, (rect[1]+rect[3]));\r\n    ctx.lineTo(x, lowY );\r\n    ctx.stroke();\r\n}\r\n\r\n\r\n\r\nmodule.exports = HollowCandle;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/HollowCandleChart.js\n ** module id = 15\n ** module chunks = 0\n **/","/**\r\n * 画月线\r\n * @param {[type]} ctx  [description]\r\n * @param {[type]} data [description]\r\n */\r\n\r\nvar core = require('./common.js');\r\nfunction MAChart(areaName,chartBox,id){\r\n    if(!chartBox.showDatas) {\r\n        console.log('没有数据')\r\n        return false;\r\n    }\r\n    this.chartBox = chartBox;\r\n    this.name=\"MAChart\";\r\n    this.areaName = areaName;\r\n    this.ctx = chartBox.ctx;\r\n    this.id = id;\r\n    this.init();\r\n}\r\n\r\nMAChart.prototype = {\r\n    construcotor: MAChart,\r\n    init: function(){},\r\n    painter: function(){\r\n        this.painting = true;\r\n        this.ctx.save();\r\n\r\n        var ctx = this.ctx, chartBox = this.chartBox, chartOpts = chartBox.chartOpts, areaOpts = chartOpts[this.areaName], theme = chartOpts.theme,height = areaOpts.height;\r\n        \r\n        var opts = !this.id ? areaOpts['opts']: areaOpts['subCharts'][this.id];\r\n        if(!this.id) {\r\n            this.getDatasRegion();\r\n        }\r\n\r\n        this.ctx.translate(areaOpts.x, areaOpts.top);\r\n        \r\n        var high = areaOpts.high, low = areaOpts.low, datas = this.getDatas();\r\n        ctx.strokeStyle = opts.color;\r\n        ctx.beginPath();\r\n        for(var j=0,jl = datas.length;j<jl;j++) {\r\n            var v = datas[j];\r\n            if(!v) continue ;\r\n            var x = core.getXByShowDataIndex(j,theme.barWidth,theme.spaceWidth),\r\n                y = core.getRelativeYByShowDataValue(v,high,low,height);\r\n\r\n            if(y&&j==0) {\r\n                ctx.moveTo(x,y);\r\n            }else {\r\n                ctx.lineTo(x,y);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        this.ctx.restore();\r\n        this.painting = false;\r\n        \r\n    },\r\n\r\n    drawBackground: function(){\r\n        this.paintCount = this.paintCount||1;\r\n        if(this.paintCount>1) {\r\n            var charOpts = this.opts, opts = charOpts[this.areaName];\r\n            var height = opts.height,y = opts.y;\r\n            if(this.isSubItem) {\r\n                height = this.canvas.height;\r\n                y = 0;\r\n            }\r\n            this.ctx.clearRect(0,y,opts.width+opts.margin,height);\r\n        }\r\n        this.paintCount++;\r\n    },\r\n\r\n    getDatas: function(calc){\r\n        if(!calc) {\r\n            return this.datas;\r\n        }\r\n        var chartBox = this.chartBox, chartOpts = chartBox.chartOpts, areaOpts = chartOpts[this.areaName]\r\n        var opts = !this.id ? areaOpts['opts']: areaOpts['subCharts'][this.id];\r\n        if(!opts.daysCount) {\r\n            throw new Error('没有设置移动平均线的日期间隔');\r\n            return false\r\n        }\r\n\r\n        var datas = this.calcMAPrices(opts.daysCount);\r\n        this.preAvg = datas.shift();\r\n        this.datas = datas;\r\n        return datas;\r\n    },\r\n\r\n    getDatasRegion: function(){\r\n        var datas = this.getDatas(true);\r\n        var areaName  = this.areaName;\r\n        var opts = this.chartBox.chartOpts[areaName];\r\n        var high = opts.high,low = opts.low;\r\n        var tempDatas = [];\r\n        for(var i=0,len = datas.length;i<len;i++) {\r\n            if(datas[i]) {\r\n                tempDatas.push(datas[i]);\r\n            }\r\n        }\r\n        if(high) {\r\n            tempDatas.push(high);\r\n        }\r\n        high = Math.max.apply(null,tempDatas);\r\n\r\n        if(low) {\r\n            tempDatas.push(low);\r\n        }\r\n        low = Math.min.apply(null,tempDatas);\r\n\r\n        this.chartBox.chartOpts[areaName].high = high;\r\n        this.chartBox.chartOpts[areaName].low = low;\r\n\r\n    },\r\n\r\n    calcMAPrices: function(daysCn){\r\n        var chartBox = this.chartBox, dataRanges = chartBox.dataRanges, datas = chartBox.datas;\r\n        var startIndex = dataRanges.start;\r\n        var result = [];\r\n        for(var i = startIndex-1; i<= dataRanges.to; i++) {            \r\n            if( i<0 || i>datas.length-1) {\r\n                result.push(false);\r\n                continue;\r\n            }\r\n            var startCalcIndex = i - daysCn +1;\r\n            if(startCalcIndex < 0) {\r\n                result.push(datas[i].close);\r\n                continue;\r\n            }\r\n            var sum = 0;\r\n            for(var k = startCalcIndex; k <= i; k++) {\r\n                sum += datas[k].close;\r\n            }\r\n            var val = sum/daysCn;\r\n            \r\n            result.push(val);\r\n        }\r\n        \r\n        return result;\r\n    },\r\n\r\n    getTip: function(index,follow) {\r\n        var opts = this.chartBox.chartOpts[this.areaName],dotLen = opts.dotLen;\r\n        var datas = this.datas;\r\n\r\n        var chartBox = this.chartBox, chartOpts = chartBox.chartOpts, areaOpts = chartOpts[this.areaName]\r\n        var opts = !this.id ? areaOpts['opts']: areaOpts['subCharts'][this.id];\r\n        if(follow) {\r\n            return '';\r\n        }\r\n        var val = datas[index];\r\n        var prevVal = index==0 ? this.preAvg : datas[index-1];\r\n        var color = this.chartBox.getColor(prevVal,val);\r\n        val = core.toMoney(val,dotLen);\r\n        return '<span style=\"color:'+opts.color+'\">MA'+opts.daysCount+':<em style=\"color:'+ color +'\">' + val + '</em></span>';       \r\n    }\r\n\r\n}\r\n\r\nmodule.exports = MAChart;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/MAChart.js\n ** module id = 16\n ** module chunks = 0\n **/","var core = require('./common.js');\r\nvar $ = require('jquery');\r\n\r\nfunction DragEvent(canvas,chartBox){\r\n\tthis.canvas = canvas;\r\n\tthis.ctx = canvas.getContext('2d');\r\n\tthis.chartBox = chartBox;\r\n\r\n\tthis.init();\r\n}\r\nvar i=0;\r\nDragEvent.prototype = {\r\n\tconstrucor: DragEvent,\r\n\tinit: function(){\r\n\t\tvar me = this;\r\n\t\t$(me.canvas).on('mousedown.drag',function(e){\r\n\t\t\tif(!e.button) {\r\n\t\t\t\tme.start(e);\r\n\t\t\t}else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}).on('mousemove.drag',function(e){\r\n\t\t\tme.move(e);\r\n\t\t}).on('mouseup.drag', function(e){\r\n\t\t\tme.end.call(me,e);\r\n\t\t}).on('mouseleave',function(e){\r\n\t\t\tme.end.call(me,e);\r\n\t\t})\r\n\t},\r\n\tstart: function(e){\r\n\t\t$(this.canvas).addClass('cur-drag');\r\n\t\tvar point = {\r\n\t\t\tx: e.pageX,\r\n\t\t\ty: e.pageY\r\n\t\t}\r\n\t\tvar dragOpts = this.chartBox.events.drag||{};\r\n\t\tvar canDrag = dragOpts.onBeforeDrag&&dragOpts.onBeforeDrag.call(this.chartBox);\r\n\t\tif(canDrag===false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.startPoint = point;\r\n\t\tthis.dataRanges = this.chartBox.dataRanges;\r\n\t\tthis.chartBox.dragging = true;\r\n\t\tif(this.canvas.clear) {\r\n\t\t\tthis.ctx.clearRect(0, 0 ,this.canvas.width, this.canvas.height);\r\n\t\t}\r\n\t\t//e.stopPropagation();\r\n\t},\r\n\r\n\tmove: function(e){\r\n\t\tvar chartBox = this.chartBox;\r\n\t\tif(!this.startPoint){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar dataRanges = this.dataRanges, startPoint = this.startPoint, dataLength = chartBox.showDatas.length;\r\n\t\tvar moveX = e.pageX - startPoint.x;\r\n\t\tvar dataCount = Math.floor(moveX*dataLength/chartBox.mainRegionWidth);\r\n\t\t\r\n\t\tif(dataCount!=0) { \r\n\t\t\tthis.canExecEnd = true;\r\n\t\t\tvar dragOpts = chartBox.events.drag||{};\r\n\t\t\tvar start  = dataRanges.start - dataCount,to = dataRanges.to - dataCount;\r\n\t\t\tvar newDataRanges = {start: start, to : to};\r\n\t\t\tthis.chartBox.painter(newDataRanges);\r\n\t\t\tdragOpts.onDrag&&dragOpts.onDrag.call(chartBox,dataRanges);\r\n\t\t\t\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t},\r\n\tend: function(e){\r\n\t\tthis.startPoint = null;\r\n\t\tthis.dataRanges = null;\r\n\t\t$(this.canvas).removeClass('cur-drag');\r\n\t\tthis.chartBox.dragging = false;\r\n\t\tif(this.canExecEnd){\r\n\t\t\tvar ev;\r\n\t\t\tif(ev = this.chartBox.events.drag.onAfterDrag) {\r\n\t\t\t\tev.call(this.chartBox);\r\n\t\t\t}\r\n\t\t\tif(this.chartBox.dataRanges) {\r\n\t\t\t\tthis.chartBox.autoLoadData();\r\n\t\t\t}\r\n\t\t\tthis.canExecEnd = false;\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t}\r\n}\r\n\r\nmodule.exports = DragEvent;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/DragEvent.js\n ** module id = 17\n ** module chunks = 0\n **/","var $ = jQuery = require('jquery');\r\n\r\nrequire('./vendor/jquery.mousewheel.min');\r\n\r\nfunction WheelEvent(canvas,chartBox){\r\n\tthis.canvas = canvas;\r\n\tthis.ctx = canvas.getContext('2d');\r\n\tthis.chartBox = chartBox;\r\n\tthis.init();\r\n}\r\n\r\nWheelEvent.prototype = {\r\n\tconstructor: WheelEvent,\r\n\tinit: function(){\r\n\t\tvar me = this;\r\n\t\t$(this.canvas).on('mousewheel',function(e){\r\n\t\t\tme.wheel.call(me,e);\r\n\t\t})\r\n\t},\r\n\twheel: function(e){\r\n\t\tvar chartBox = this.chartBox, dataRanges = chartBox.dataRanges, chartOpts = chartBox.chartOpts, theme = chartOpts.theme;\r\n\t\tvar wheelOpts = chartBox.events.wheel;\r\n\t\tvar step = wheelOpts.step||6;\r\n\t\tvar itemCount = chartBox.showDatas.length;\r\n\t\tvar changeCount = Math.ceil(itemCount*step/100);\r\n\t\tvar start = dataRanges.start, to = dataRanges.to;\r\n\t\tif(dataRanges.to > chartBox.datas.length-1) {\r\n\t\t\tto = dataRanges.to - changeCount;\r\n\t\t\tstart = dataRanges.start - changeCount;\r\n\t\t}else {\r\n\t\t\tchartBox.zoom = true;\r\n\t\t\t//放大\r\n\t\t\tif(e.deltaY > 0) {\r\n\t\t\t\tstart  = dataRanges.start + changeCount;\r\n\t\t\t}else {\r\n\t\t\t\tstart = dataRanges.start - changeCount;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar ret = wheelOpts.onWheelBefore&&wheelOpts.onWheelBefore.call(chartBox)\r\n\t\tif(ret!==false) {\r\n\t\t\tchartBox.painter({start: start, to: to},function(){\r\n\t\t\t\tchartBox.autoLoadData();\r\n\t\t\t});\r\n\t\t\twheelOpts.onWheel&&wheelOpts.onWheel.call(chartBox,dataRanges);\r\n\t\t}\r\n\t\t\r\n\t\te.stopPropagation();\r\n\t}\r\n}\r\n\r\nmodule.exports = WheelEvent;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/WheelEvent.js\n ** module id = 18\n ** module chunks = 0\n **/","/*!\r\n * jQuery Mousewheel 3.1.13\r\n * https://github.com/jquery/jquery-mousewheel/blob/master/jquery.mousewheel.min.js\r\n * Copyright 2015 jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type=\"mousewheel\",\"detail\"in g&&(m=-1*g.detail),\"wheelDelta\"in g&&(m=g.wheelDelta),\"wheelDeltaY\"in g&&(m=g.wheelDeltaY),\"wheelDeltaX\"in g&&(l=-1*g.wheelDeltaX),\"axis\"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,\"deltaY\"in g&&(m=-1*g.deltaY,j=m),\"deltaX\"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,\"mousewheel-line-height\");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,\"mousewheel-page-height\");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?\"floor\":\"ceil\"](j/f),l=Math[l>=1?\"floor\":\"ceil\"](l/f),m=Math[m>=1?\"floor\":\"ceil\"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&\"mousewheel\"===a.type&&b%120===0}var e,f,g=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],h=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:\"3.1.12\",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,\"mousewheel-line-height\",k.getLineHeight(this)),a.data(this,\"mousewheel-page-height\",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,\"mousewheel-line-height\"),a.removeData(this,\"mousewheel-page-height\")},getLineHeight:function(b){var c=a(b),d=c[\"offsetParent\"in a.fn?\"offsetParent\":\"parent\"]();return d.length||(d=a(\"body\")),parseInt(d.css(\"fontSize\"),10)||parseInt(c.css(\"fontSize\"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/vendor/jquery.mousewheel.min.js\n ** module id = 19\n ** module chunks = 0\n **/","var $ = require('jquery');\r\nvar core = require('./common.js');\r\nvar FollowTip = require('./FollowTip');\r\n\r\n\r\nfunction CrossLineEvent(canvas,chartBox){\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.chartBox = chartBox;\r\n\t\tthis.ctx = canvas.getContext('2d');\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\tCrossLineEvent.prototype = {\r\n\t\tconstructor: CrossLineEvent,\r\n\t\r\n\t\tinit: function(){\r\n\t\t\tvar me = this;\r\n\t\t\tthis.canvas.clear = true;\r\n\t\r\n\t\t\tvar followOps = this.chartBox.events.crossLine.follow;\r\n\t\t\tif(followOps){\r\n\t\t\t\tthis.followTip = new FollowTip(this.chartBox.canvasBox,followOps);\r\n\t\t\t}\r\n\t\r\n\t\t\tvar tempMove = core.throttle(me.mousemove,30);\r\n\t\t\t$(this.canvas).on('mousemove',function(e){\r\n\t\t\t\ttempMove.call(me,e);\r\n\t\t\t}).on('mouseleave',function(e){\r\n\t\t\t\tme.mouseout.call(me,e,true,true);\r\n\t\t\t}).on('mouseenter',function(e){\r\n\t\t\t\tif(window.mouseMoveLocked) return false;\r\n\t\t\t\tme.mouseenter.call(me,e);\r\n\t\t\t})\r\n\t\r\n\t\t},\r\n\t\tmouseenter: function(e) {\r\n\t\t\tthis.mouseIn = true;\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\tmousemove: function(e){\r\n\t\t\tvar ctx = this.ctx, chartBox = this.chartBox;\r\n\t\t\tif(chartBox.dragging||!this.mouseIn) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.mouseout.call(this);\r\n\t\t\t//ctx.clearRect(0, 0, this.canvas.width,this.canvas.height);\r\n\t\t\tvar pageX = e.pageX, pageY = e.pageY;\r\n\t\t\tvar offset = $(this.canvas).offset();\r\n\t\r\n\t\t\tvar pos = {\r\n\t\t\t\tx: pageX - offset.left,\r\n\t\t\t\ty: pageY - offset.top,\r\n\t\t\t}\r\n\t\r\n\t\t\tvar drawInfo = this.draw(pos);\r\n\t\t\tvar eventOpts = chartBox.events.crossLine||{};\r\n\t\t\tif(eventOpts.onCross&&drawInfo) {\r\n\t\t\t\teventOpts.onCross.call(chartBox,drawInfo);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tmouseout: function(e,out,triggle) {\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width,this.canvas.height)\r\n\t\t\tif(this.followTip) {\r\n\t\t\t\tthis.followTip.hideTip();\r\n\t\t\t\tthis.followTimer&&clearTimeout(this.followTimer);\r\n\t\t\t\tthis.followTimer = null;\r\n\t\t\t}\r\n\t\t\tvar eventOpts = this.chartBox.events.crossLine||{};\r\n\t\t\tif(eventOpts.onAfterCross&&triggle) {\r\n\t\t\t\teventOpts.onAfterCross.call(this.chartBox);\r\n\t\t\t}\r\n\t\t\tif(out) {\r\n\t\t\t\tthis.mouseIn = false;\r\n\t\t\t}\r\n\t\t\tif(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdraw: function(pos){\r\n\t\t\tvar ctx = this.ctx, chartBox = this.chartBox;\r\n\t\t\t//计算可移动的反而范围\r\n\t\t\tvar chartOpts = chartBox.chartOpts,theme = chartBox.events.crossLine;\r\n\t\t\tvar yAxisWidth = chartOpts.yAxis.width;\r\n\t\t\tvar xAxisHeight = chartOpts.xAxis.height;\r\n\t\r\n\t\t\tvar effectiveX = this.canvas.width - yAxisWidth;\r\n\t\t\tvar effectiveY = this.canvas.height - xAxisHeight;\r\n\t\r\n\t\t\tif(pos.x<0 || pos.y<0 || pos.x > (effectiveX)||pos.y>effectiveY) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar adjustX = chartBox.adjustX(pos.x);\r\n\t\t\t\r\n\t\t\tvar areas = chartOpts.areas.items,chartList = chartBox.chartList;\r\n\t\t\tvar mainAreaName = chartOpts.areas.items[0];\r\n\t\t\tvar mainAreaHeight = chartOpts[mainAreaName].height + chartOpts[mainAreaName].top;\r\n\t\t\tif(pos.y > mainAreaHeight) {\t//只在主区域有用\r\n\t\t\t\tchartBox.mouseInfo = null;\r\n\t\t\t}else {\r\n\t\t\t\tchartBox.mouseInfo = {point:{x:pos.x,y:pos.y},index:adjustX.index,width:effectiveX,height:effectiveY};\r\n\t\t\t}\r\n\t\r\n\t\t\t//在别处有用\r\n\t\t\tpos.x = adjustX.x;\r\n\t\t\tvar yVal,area;\r\n\t\t\tfor(var i=0,len=areas.length; i<len; i++) {\r\n\t\t\t\tvar chartObj = chartList[areas[i]];\r\n\t\t\t\tif(chartObj.getValueByY) {\r\n\t\t\t\t\tyVal = chartObj.getValueByY.call(chartObj,pos.y);\r\n\t\t\t\t\tarea = areas[i];\r\n\t\t\t\t\tif(yVal) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//画y轴数据\r\n\t\t\tif(yVal) {\r\n\t\t\t\tthis.drawY(yVal,pos.y);\r\n\t\t\t}\r\n\t\r\n\t\t\t//画x轴数据\r\n\t\t\tvar xValue = chartBox.showDatas[adjustX.index];\r\n\t\t\tif(xValue) {\r\n\t\t\t\tthis.drawX(xValue.quoteTime,pos.x,adjustX.index)\r\n\t\t\t\t//跟随tip\r\n\t\t\t\tif(this.followTip) {\r\n\t\t\t\t\tvar me = this;\r\n\t\t\t\t\tvar delay = this.chartBox.events.crossLine.follow.delay||1000;\r\n\t\t\t\t\tthis.followTimer = setTimeout(function(){\r\n\t\t\t\t\t\tvar fTip = '';\r\n\t\t\t\t\t\tfor(var tip in tipList) {\r\n\t\t\t\t\t\t\tfTip += chartBox.getAreaTip(tip,adjustX.index,true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tme.followTip.changeTip(fTip,pos,{width:effectiveX,height:effectiveY});\r\n\t\t\t\t\t},delay)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {xValue:xValue.quoteTime,yValue:yVal,yArea:area,index:adjustX.index}\r\n\t\t},\r\n\t\tdrawX: function(xValue,x,dataIndex){\r\n\t\t\tvar ctx = this.ctx, chartBox = this.chartBox;\r\n\t\t\tvar chartOpts = chartBox.chartOpts,theme = chartBox.events.crossLine;\r\n\t\t\t\r\n\t\t\tvar xAxisHeight = chartOpts.xAxis.height;\r\n\t\t\t\r\n\t\t\tvar lineHeight = this.canvas.height - xAxisHeight;\r\n\t\r\n\t\t\tcore.drawVLine(this.ctx, theme.lineColor, x, 0, lineHeight, 'solid');\r\n\t\t\tctx.save();\t\r\n\t\t\tctx.font = theme.font;\r\n\t\t\tvar xValue1 = core.convertDate(xValue,100,true);\r\n\t\t\tchartBox.mouseInfo&&(chartBox.mouseInfo.xValue = xValue1);\r\n\t\t\tvar w = ctx.measureText(xValue1).width;\r\n\t\t\tvar boxW = w+20;\r\n\t\t\tctx.fillStyle = theme.background;\r\n\t\t\tvar boxX = Math.max(x- boxW/2,0)\r\n\t\t\tctx.fillRect(boxX , lineHeight+2, boxW, xAxisHeight-2);\r\n\t\t\tctx.fillStyle = theme.color;\r\n\t\t\tctx.fillText(xValue1, boxX+10, this.canvas.height-10);\r\n\t\t\tctx.restore();\r\n\t\t\tvar tipList = chartBox.tipList;\r\n\t\t\tfor(var tip in tipList) {\r\n\t\t\t\tvar ele = tipList[tip];\r\n\t\t\t\tvar msg = chartBox.getAreaTip(tip,dataIndex);\r\n\t\t\t\tele.html(msg);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\tdrawY: function(Yvalue,y) {\r\n\t\t\tvar ctx = this.ctx, chartBox = this.chartBox;\r\n\t\t\tvar chartOpts = chartBox.chartOpts,theme = chartBox.events.crossLine;\r\n\t\r\n\t\t\tvar yAxisWidth = chartOpts.yAxis.width;\r\n\t\t\tvar lineWidth = this.canvas.width - yAxisWidth;\r\n\t\r\n\t\t\tchartBox.mouseInfo&&(chartBox.mouseInfo.yValue = Yvalue);\r\n\t\t\tcore.drawHLine(ctx, theme.lineColor, 0, y, lineWidth, 'solid');\r\n\t\t\tctx.save();\r\n\t\t\tctx.fillStyle = theme.background;\r\n\t\t\tctx.fillRect(lineWidth+1, y-10, yAxisWidth, 20);\r\n\t\t\tctx.fillStyle = theme.color;\r\n\t\t\tctx.font = theme.font;\r\n\t\t\tctx.fillText(Yvalue,lineWidth+7, y+5);\r\n\t\t\tctx.restore();\r\n\t\t},\r\n\t\r\n\t\r\n\t\tdrawByValue: function(crossInfo) {\r\n\t\t\tvar chartBox = this.chartBox;\r\n\t\t\tvar x = chartBox.getXByValue(crossInfo.xValue);\r\n\t\t\tvar y = chartBox.getYByValue(crossInfo.yValue,crossInfo.yArea,true);\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width,this.canvas.height);\r\n\t\t\tif(x.index) {\r\n\t\t\t\tthis.drawX(crossInfo.xValue,x.x,x.index);\r\n\t\t\t}\r\n\t\t\tif(y) {\r\n\t\t\t\tthis.drawY(crossInfo.yValue,y);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\nmodule.exports = CrossLineEvent;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/CrossLineEvent.js\n ** module id = 20\n ** module chunks = 0\n **/","var $ = require('jquery');\r\n\r\nfunction FollowTip($element,opts){\r\n\tthis.container = $element;\r\n\tthis.opts = opts;\r\n\tthis.dir = {x:1,y:1};\r\n\treturn this.init();\r\n}\r\n\r\nFollowTip.prototype = {\r\n\tconstructor: FollowTip,\r\n\tinit: function(){\r\n\t\tvar opts = this.opts;\r\n\t\tif(!opts.width||!opts.height) {\r\n\t\t\tconsole.log('请设置高度或者宽度');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar cls = opts.clsName ||''\r\n\t\tthis.wrap = $('<div class=\"canvas-follow-tip '+cls+'\" style=\"display:none; position: absolute; left:0; top:0; width:'+opts.width+'px; height:'+opts.height+'px\"></div>').appendTo(this.container);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcalcPosition: function(pos,region){\r\n\t\tvar opts = this.opts;\r\n\t\tif(opts.position) {\r\n\t\t\treturn opts.position;\r\n\t\t}\r\n\t\tvar wrapWidth,wrapHeight;\r\n\t\tif(region) {\r\n\t\t\twrapWidth = region.width;\r\n\t\t\twrapHeight = region.height;\r\n\t\t}else {\r\n\t\t\twrapWidth = this.container.width();\r\n\t\t\twrapHeight = this.container.height();\r\n\t\t}\r\n\t\tvar margin = opts.margin||0, top=0 ,left=0 ;\r\n\t\tif(this.dir.y) {\r\n\t\t\ttop = pos.y + margin;\r\n\t\t\tif(top > wrapHeight - opts.height - margin) {\r\n\t\t\t\tthis.dir.y = 0;\r\n\t\t\t\ttop = pos.y - opts.height - margin;\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\ttop = pos.y - opts.height- margin;\r\n\t\t\tif(top < opts.height+margin) {\r\n\t\t\t\tthis.dir.y = 1;\r\n\t\t\t\ttop = pos.y + margin;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.dir.x) {\r\n\t\t\tleft = pos.x + margin;\r\n\t\t\tif(left > wrapWidth - opts.width - margin) {\r\n\t\t\t\tthis.dir.x = 0;\r\n\t\t\t\tleft = pos.x - opts.width - margin;\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tleft = pos.x - opts.width - margin;\r\n\t\t\tif(left < opts.width + margin) {\r\n\t\t\t\tthis.dir.x = 1;\r\n\t\t\t\tleft = pos.x + margin;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\treturn {top:top,left:left};\r\n\t\t\r\n\t},\r\n\r\n\thideTip: function(){\r\n\t\tthis.wrap.hide();\r\n\t},\r\n\r\n\tshowTip: function(){\r\n\t\tthis.wrap.show();\r\n\t},\r\n\tchangeTipPosition: function(pos,region){\r\n\t\tvar tipPos = this.calcPosition(pos,region);\r\n\t\tthis.wrap.css(tipPos);\r\n\t},\r\n\tchangeTip: function(tip,pos,region) {\r\n\t\tthis.changeTipPosition(pos,region);\r\n\t\tif(tip) {\r\n\t\t\tthis.wrap.html(tip);\r\n\t\t}\r\n\t\tthis.showTip();\r\n\t}\r\n}\r\n\r\nmodule.exports = FollowTip;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/FollowTip.js\n ** module id = 21\n ** module chunks = 0\n **/","\r\nvar $ = require('jquery');\r\nvar FollowTip = require('./FollowTip');\r\n\r\n\r\nfunction RightClickEvent(canvas,chartBox){\r\n\tthis.canvas = canvas;\r\n\tthis.ctx = canvas.getContext('2d');\r\n\tthis.chartBox = chartBox;\r\n\tthis.dynamicMenu = [];\r\n\r\n\treturn this.init();\r\n}\r\n\r\nRightClickEvent.prototype = {\r\n\tconstructor: RightClickEvent,\r\n\tinit: function(){\r\n\t\tvar opts = this.chartBox.events.rightClick, me = this;\r\n\t\tif(!opts.menus||!opts.menus.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//生成菜单\r\n\t\tthis.initRightMenuHtml();\r\n\t\t//绑定菜单事件\r\n\t\tthis.initMenuEvents();\r\n\t\t//绑定右键出现菜单事件\r\n\t\tthis.bindRightClickEvent();\r\n\r\n\t\t//当点击页面其他地方时，要隐藏菜单\r\n\t\t$(document).on('click.rightClick',function(){\r\n\t\t\tme.rightMenuObj.hide();\r\n\t\t\tme.rightDialog.hideTip.call(me.rightDialog);\r\n\t\t});\r\n\t\treturn this;\r\n\t},\r\n\r\n\tinitRightMenuHtml: function(){\r\n\t\tvar me = this,chartBox = this.chartBox,opts = chartBox.events.rightClick;\r\n\t\t\r\n\t\t//主菜单\r\n\t\tvar menus = opts.menus;\r\n\t\tvar fragment = document.createDocumentFragment(),height=menus.length*40+2;\r\n\t\tvar mainMenu = document.createElement('div');\r\n\t\tmainMenu.className = 'main-menu';\r\n\t\tfor(var i=0,menu; menu = menus[i++];) {\r\n\t\t\tvar a = this.factoryMenu(menu,i-1);\r\n\t\t\tmainMenu.appendChild(a);\r\n\t\t}\r\n\t\tfragment.appendChild(mainMenu);\r\n\r\n\t\t//二级菜单\r\n\t\tvar subMenus = opts.subMenus;\r\n\t\tif(subMenus) {\r\n\t\t\tvar subMenu = document.createElement('div');\r\n\t\t\tsubMenu.className = 'sub-menu';\r\n\t\t\tsubMenu.style.display ='none';\r\n\t\t\tfor(var j=0,submenu;submenu = subMenus[j++];) {\r\n\t\t\t\tvar a = this.factoryMenu(submenu);\r\n\t\t\t\tsubMenu.appendChild(a);\r\n\t\t\t}\r\n\t\t\tfragment.appendChild(subMenu);\r\n\r\n\t\t\tif(opts.onClick) {\r\n\t\t\t\t$(subMenu).on('click','a',function(e){\r\n\t\t\t\t\topts.onClick.call(this,me.rightMenuObj.activeMainMenu);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis.rightDialog = new FollowTip(this.chartBox.canvasBox,{\r\n\t\t\twidth:218,\r\n\t\t\theight: height,\r\n\t\t\tmargin:5,\r\n\t\t\tclsName:'chart-right-menu'\r\n\t\t});\r\n\t\t\r\n\t\tthis.rightDialog.wrap.append(fragment);\r\n\t},\r\n\r\n\tfactoryMenu: function(menu,index) {\r\n\t\tvar type = typeof menu;\r\n\t\tvar a = document.createElement('a');\r\n\t\ta.href=\"javascript:void(0)\";\r\n\t\tif(type=='object') {\r\n\t\t\tvar tpl = menu.tpl;\r\n\t\t\tvar fn = $.type(tpl) =='function';\r\n\t\t\tif(fn) {\r\n\t\t\t\tthis.dynamicMenu.push({index:index,ele:a});\r\n\t\t\t}else {\r\n\t\t\t\ta.innerHTML = tpl;\r\n\t\t\t}\r\n\t\t\tif(menu.submenu) {\r\n\t\t\t\ta.submenu = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(menu.click) {\r\n\t\t\t\tvar me = this;\r\n\t\t\t\t$(a).on('click',function(){\r\n\t\t\t\t\tmenu.click.call(this,me,me.chartBox.mouseInfo.yValue);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\ta.innerHTML = menu;\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\t},\r\n\r\n\tinitMenuEvents: function(){\r\n\t\tvar wrap = this.rightDialog.wrap;\r\n\t\tthis.rightMenuObj = new RightMenus(wrap);\r\n\t},\r\n\r\n\tbindRightClickEvent: function(){\r\n\t\tvar dynamicMenu = this.dynamicMenu,chartBox = this.chartBox, me = this, mainMenus = chartBox.events.rightClick.menus;\r\n\t\t$(this.canvas).on('contextmenu',function(e){\r\n\t\t\tme.rightMenuObj.hide();\r\n\t\t\tvar mouseInfo = chartBox.mouseInfo;\r\n\t\t\tif(!mouseInfo) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t//更新菜单\r\n\t\t\tfor(var j=0,cur;cur=dynamicMenu[j++];){\r\n\t\t\t\tvar index = cur.index;\r\n\t\t\t\tvar tpl = mainMenus[index].tpl.call(cur.ele,me,mouseInfo.yValue);\r\n\t\t\t\tif(cur.ele.submenu) {\r\n\t\t\t\t\ttpl +='<i class=\"icon icon-triangle-right\"></i>';\r\n\t\t\t\t}\r\n\t\t\t\t$(cur.ele).html(tpl);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tme.rightDialog.changeTipPosition(mouseInfo.point, {width: mouseInfo.width, height: mouseInfo.heihgt});\r\n\t\t\tme.rightDialog.showTip();\r\n\r\n\t\t\treturn false;\r\n\t\t})\r\n\t},\r\n\r\n\tdestory: function(){\r\n\t\t$(document).off('.rightClick');\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nfunction RightMenus(wrap,opts) {\r\n\tthis.wrap = $(wrap);\r\n\tthis.subMenu = this.wrap.find('.sub-menu');\r\n\tthis.mainMenu = this.wrap.find('.main-menu');\r\n\tthis.activeMainMenu = null;\r\n\tthis.leaveTimer = null;\r\n\tthis.opts = opts;\r\n\tthis.init();\r\n}\r\nRightMenus.prototype = {\r\n\tinit: function(){\r\n\t\tvar me  = this;\r\n\t\tvar mainMenus = this.mainMenu.find('a');\r\n\r\n\t\tmainMenus.on('mouseenter',function(){\r\n\t\t\t$(this).addClass('active');\r\n\t\t\tme.activeMainMenu = this;\r\n\t\t\tvar more = this.submenu||$(this).data('submenu');\r\n\t\t\tif(more) {\r\n\t\t\t\tvar borderWidth = parseInt(me.wrap.css('borderWidth'));\r\n\t\t\t\t\r\n\t\t\t\tvar top = $(this).position().top-borderWidth;\r\n\t\t\t\tme.subMenu.css('top',top).show();\r\n\t\t\t}else {\r\n\t\t\t\tme.subMenu.hide();\r\n\t\t\t}\r\n\t\t}).on('mouseleave',function(){\r\n\t\t\tvar more = this.submenu||$(this).data('submenu');\r\n\t\t\tif(!more) {\r\n\t\t\t\t$(this).removeClass('active');\r\n\t\t\t\tme.subMenu.hide();\r\n\t\t\t\tme.activeMainMenu = null;\r\n\t\t\t\t\r\n\t\t\t}else {\r\n\t\t\t\tvar _self = this;\r\n\t\t\t\tme.leaveTimer&&clearTimeout(me.leaveTimer);\r\n\t\t\t\tme.leaveTimer = setTimeout(function(){\r\n\t\t\t\t\t$(_self).removeClass('active');\r\n\t\t\t\t\tif(me.activeMainMenu == _self) {\r\n\t\t\t\t\t\tme.activeMainMenu = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tthis.subMenu.on('mouseenter',function(){\r\n\t\t\tme.leaveTimer&&clearTimeout(me.leaveTimer);\r\n\t\t}).on('mouseleave',function(){\r\n\t\t\t$(me.activeMainMenu).removeClass('active');\r\n\t\t\tme.activeMainMenu = false;\r\n\t\t\t$(this).hide();\r\n\t\t})\r\n\t\t\r\n\t},\r\n\r\n\thide: function(){\r\n\t\tthis.activeMainMenu&&$(this.activeMainMenu).removeClass('active');\r\n\t\tthis.activeMainMenu = null;\r\n\t\tthis.subMenu.hide();\r\n\t}\r\n}\r\n\r\nmodule.exports = RightClickEvent;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/RightClickEvent.js\n ** module id = 22\n ** module chunks = 0\n **/"],"sourceRoot":""}